(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{24:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,a){return r&&_defineProperties(e.prototype,r),a&&_defineProperties(e,a),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,r){_classCallCheck(this,RecordInfo),this.type=e,this.data=r}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var r=e.type,a=e.data;if("add"===r){var o=a,t=o.index,d=o.canvas;return new RecordInfo("remove",{index:t,canvas:d})}if("modify"===r){var c=a,n=c.index,i=c.from,s=c.to;return new RecordInfo("modify",{index:n,from:s,to:i})}var l=a,_=l.index,u=l.canvas;return new RecordInfo("add",{index:_,canvas:u})},handleOperate=function(e,r){var a=e.type,o=e.data;if(console.log("handleOperate: ",a),"add"!==a)if("modify"!==a)if("remove"!==a);else{var t=o.index;r.removeLayerByIndex(t,"history")}else{var d=o,c=d.index,n=(d.from,d.to),i=r.setLayerContent(c,n,"history");r.focusLayer(i)}else{var s=o,l=s.index,_=s.canvas,u=r.addLayerContent(l,_,"history");r.focusLayer(u)}},MAX_ROCORD_NUMBER=200,recordListReducer=function(e,r){var a=e.cursor,o=e.recorderList,t=r.type,d=r.payload,c=r.pCanvasController;switch(t){case"add":a<o.length-1&&o.splice(Math.max(a,0)),MAX_ROCORD_NUMBER<=o.length&&o.splice(0,o.length-MAX_ROCORD_NUMBER+1),a++,d&&o.push(d);break;case"redo":if(++a<=o.length-1){var n=o[a];c&&handleOperate(n,c)}break;case"undo":if(a>-1){var i=o[a];c&&handleOperate(getRevertRecor(i),c)}a--}return{cursor:Math.max(Math.min(a,o.length-1),-1),recorderList:o}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(MAX_ROCORD_NUMBER,"MAX_ROCORD_NUMBER","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))}}]);