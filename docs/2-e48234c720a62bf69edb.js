(window.webpackJsonp=window.webpackJsonp||[]).push([[2,6,10,11,17,23,31,32,33],[,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var a=n(0),r=n.n(a),o=n(35),i=n.n(o),c=n(1),s=n(23),l=n(20);function u({value:t,onChange:e,defaultValue:n}){const[o,u]=Object(a.useState)(!1),[f,d]=Object(a.useState)(n||l.RGBA.BLACK);Object(a.useEffect)(()=>{t&&d(t)},[t]);const h=()=>{u(t=>!t)};return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{backgroundColor:f.toRGBAString()},className:i.a.colorBar,onPointerUp:h}),r.a.createElement(c.Drawer,{title:"colors",visible:o,onClose:h,mask:!1},r.a.createElement(s.default,{value:f,onChange:t=>{d(t),e&&e(t)}})))}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var a=n(0),r=n(58);function o({pCanvasController:t}){return Object(a.useEffect)(()=>{if(t){const e=({data:{workId:t,layerDetail:e}})=>{r.c.saveLayerDetail(t,e)},n=({data:{workId:t,layerDetail:e,index:n}})=>{r.c.saveLayerDetail(t,e,n)};return t.on("contentChange",e),t.on("addLayer",n),()=>{t.off("contentChange",e),t.off("addLayer",n)}}},[t]),null}},function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(1),i=n(37),c=n.n(i),s=n(66),l=n.n(s);var u=(t,e,n)=>{const r=()=>((t,e)=>{const n=l()(t.current,({layerId:t})=>t),a=e.current;[...n].forEach(e=>{const n=a[e.layerId];if(n){((t,e)=>{const n=e.getContext("2d");n&&(n.clearRect(0,0,e.width,e.height),n.drawImage(t,0,0,t.width,t.height))})(e.canvas,n);const a=t.current.findIndex(({layerId:t})=>t===e.layerId);t.current.splice(a,1)}})})(e,n);return Object(a.useEffect)(r,[t]),{copyCanvas:r}};e.default=({pCanvasController:t})=>{const[e,n]=Object(a.useState)([]),i=Object(a.useRef)({}),s=Object(a.useRef)([]),{copyCanvas:l}=u(e,s,i),[f,d]=Object(a.useState)(""),[h,p]=Object(a.useState)(!1),y=()=>{p(t=>(t||setTimeout(l),!t))};Object(a.useEffect)(()=>{const e=async()=>{const e=await t.getLayers();let a=[...e];s.current.push(...e),n(t=>[...t,...a])};return t.on("init",e),()=>t.off("init",e)},[]),Object(a.useEffect)(()=>{const e=({data:{layerDetail:t}})=>{d(t.layerId)},a=({data:{layerDetail:t}})=>{s.current.push(t),n(e=>[t,...e])},r=({data:{layerDetail:t}})=>{n(e=>{const n=e.indexOf(t);return n>-1&&e.splice(n,1),[...e]})},o=({data:{layerDetail:t},tag:e})=>{t&&(s.current.push(t),setTimeout(l),"user"===e&&p(!1))};return t.on("addLayer",a),t.on("contentChange",o),t.on("focusLayer",e),t.on("removeLayer",r),()=>{t.off("contentChange",o),t.off("addLayer",a),t.off("focusLayer",e),t.off("removeLayer",r)}},[]);return r.a.createElement("div",null,r.a.createElement(o.Tag,{onPointerUp:y},"111"),r.a.createElement(o.Drawer,{title:null,width:200,visible:h,onClose:y,mask:!1,className:c.a.layerDrawer},r.a.createElement(o.List,{header:r.a.createElement("span",{onPointerUp:()=>{t.addLayer()}},"addlayer +"),className:c.a.pannelWrap,itemLayout:"horizontal",dataSource:e,rowKey:"layerId",renderItem:(n,a)=>{const{visible:s,layerId:l,name:u}=n;return r.a.createElement(o.List.Item,{className:l===f?c.a.active:""},r.a.createElement(o.List.Item.Meta,{avatar:r.a.createElement("canvas",{onPointerUp:()=>{return e=n,void t.focusLayer(e);var e},key:l,id:l,ref:t=>{i.current[l]=t},className:c.a.canvases,width:"45",height:"45"}),title:r.a.createElement("span",null,`layer ${e.length-a}`),description:r.a.createElement("div",null,r.a.createElement("span",null,s?"visible":"unvisible"),r.a.createElement("span",{onPointerUp:()=>{return e=n,void t.removeLayer(e);var e}},"remove"))}))}})))}},,,function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return d}));var a=n(0),r=n.n(a),o=n(5),i=n(20),c=n(40),s=n.n(c),l=n(7),u=n(6);const f=i.RGBA.BLACK;function d({pCanvasController:t}){const e=(e=f)=>{t.setColor(e)};return Object(a.useEffect)(()=>{if(t)return t.on("init",()=>e()),t.off("init",()=>e())},[]),r.a.createElement("div",{className:s.a.topToolBar},r.a.createElement(l.default,{pCanvasController:t}),r.a.createElement(o.default,{defaultValue:f,onChange:e}),r.a.createElement(u.default,{pCanvasController:t}))}},,,,,,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"RGBA",(function(){return a}));class a{static Lerp(t,e,n){const r=[],o=(e.r-t.r)/n,i=(e.g-t.g)/n,c=(e.b-t.b)/n,s=(e.a-t.a)/n;for(let e=0;e<n;e++)r.push(new a(t.r+o*e,t.g+i*e,t.b+c*e,t.a+s*e));return r}static mutipy({r:t,g:e,b:n},r){return new a(t*r,e*r,n*r)}static add({r:t,g:e,b:n},r){return new a(t+r.r,e+r.g,n+r.b)}static mix(t,e,n){return new a(t.r+(e.r-t.r)*n,t.g+(e.g-t.g)*n,t.b+(e.b-t.b)*n)}static getLerpColor(t,e,n){const{r:r,g:o,b:i,a:c}=t;return new a((e.r-r)*n+r,(e.g-o)*n+o,(e.b-i)*n+i,(e.a-c)*n+c)}constructor(t,e,n,a=1){this.r=t,this.g=e,this.b=n,this.a=a}toRGBAString(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}}a.BLACK=new a(0,0,0),a.WHITE=new a(255,255,255)},,,function(t,e,n){"use strict";n.r(e);var a=n(62),r=n.n(a),o=n(0),i=n.n(o),c=n(35),s=n.n(c),l=n(20);const u=(t,{pixX:e,pixY:n,pixR:a,pixWidth:r,start:o,end:i},c)=>{const s=a-r,l={x:e+Math.cos(o)*s,y:n+Math.sin(o)*s},u={x:e+Math.cos(o)*a,y:n+Math.sin(o)*a},f={x:e+Math.cos(i)*s,y:n+Math.sin(i)*s},d=c.toRGBAString();t.beginPath(),t.fillStyle=d,t.strokeStyle=d,t.moveTo(l.x,l.y),t.lineTo(u.x,u.y),t.arc(e,n,a,o,i),t.lineTo(f.x,f.y),t.arc(e,n,s,i,o,!0),t.closePath(),t.fill(),t.stroke()},f=(t,{pixX:e,pixY:n,pixR:a,pixWidth:r},o)=>{const i=Math.sin(.25*Math.PI)*(a-r),c=2*i;t.clearRect(e-i,n-i,c,c);const s=t.createLinearGradient(e-i,n+i,e-i,n-i);s.addColorStop(0,o),s.addColorStop(1,"white"),t.fillStyle=s,t.fillRect(e-i,n-i,c,c);const l=t.createLinearGradient(e-i,n-i,e+i,n-i);l.addColorStop(0,"black"),l.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=l,t.fillRect(e-i,n-i,c,c)},d=(t,{x:e,y:n,width:a,r:r})=>{const o=Math.sin(.25*Math.PI)*(r-a),i=e-o,c=e+o,s=n-o,l=n+o;return t.x>i&&t.x<c&&t.y>s&&t.y<l},h=(t,e)=>{const{x:n,y:a,width:r,r:o}=e,i=(t.x-n)**2+(t.y-a)**2;return i>(o-r)**2&&i<o**2?"circle":d(t,e)?"round":null},p=(t,{x:e,y:n,width:a,r:r})=>{const o=r-.5*a,i=t.x-e,c=t.y-n,s=Math.sqrt(i**2+c**2);return{x:e+i*o/s,y:n+c*o/s}},y=(t,{x:e,y:n})=>{const a=t.x-e,r=n-t.y,o=Math.atan2(r,a),i=1-(o>=0?o:o+2*Math.PI)/(2*Math.PI),c=[new l.RGBA(255,0,0),new l.RGBA(255,255,0),new l.RGBA(0,255,0),new l.RGBA(0,255,255),new l.RGBA(0,0,255),new l.RGBA(255,0,255),new l.RGBA(255,0,0)];for(let t=0;t<6;t++){const e=t*(1/6),n=(t+1)*(1/6);if(i>e&&i<n)return l.RGBA.getLerpColor(c[t],c[t+1],1-(n-i)/(1/6));if(i===e)return c[t];if(i===n)return c[t+1]}return l.RGBA.BLACK},v=r()((t,e,n,a)=>{const r=y(e,{x:a.x,y:a.y}),o=Math.cos(.25*Math.PI)*a.r-a.width;t&&t(((t,e,n,a,r)=>{const o=n-r,i=a-r,c=2*r,s=1-Math.max(Math.min((t.y-i)/c,1),0),u=Math.max(Math.min((t.x-o)/c,1),0);return l.RGBA.mix(l.RGBA.mix(e,l.RGBA.WHITE,s),l.RGBA.BLACK,1-u)})(n,r,a.x,a.y,o))},200);e.default=({value:t,onChange:e})=>{const[n,a]=Object(o.useState)({x:0,y:0}),[r,c]=Object(o.useState)({x:0,y:0}),[m,w]=Object(o.useState)(null),[g,b]=Object(o.useState)(),[x,I]=Object(o.useState)(),R=Object(o.useRef)({isSelecting:!1}),j=Object(o.useRef)(null);Object(o.useEffect)(()=>{},[t]),Object(o.useEffect)(()=>{if(j.current){const t=j.current.getContext("2d"),e=j.current.clientWidth*devicePixelRatio;if(j.current.width=e,j.current.height=e,t){I(t);const e=.5*j.current.clientWidth,n=.5*j.current.width,r={x:e,y:e,r:e-10,width:30,pixX:n,pixY:n,pixR:n-10*devicePixelRatio,pixWidth:30*devicePixelRatio};f(t,r,"rgb(255,0,0)"),((t,e)=>{const n=[new l.RGBA(255,0,0),new l.RGBA(255,255,0),new l.RGBA(0,255,0),new l.RGBA(0,255,255),new l.RGBA(0,0,255),new l.RGBA(255,0,255),new l.RGBA(255,0,0)],a=2*Math.PI/6;for(let r=0;r<n.length-1;r++){const o=l.RGBA.Lerp(n[r],n[r+1],255),i=r*a,c=((r+1)*a-i)/o.length;for(let n=0;n<o.length-1;n++)u(t,{...e,start:i+c*n,end:i+c*(n+1)},o[n])}})(t,r),b(r),a({x:e+r.r,y:e}),c({x:e,y:e})}}},[j.current]);return Object(o.useMemo)(()=>g&&v(e,n,r,g),[n,r]),i.a.createElement("div",{className:s.a.colorPannelWrap},i.a.createElement("canvas",{ref:j,className:s.a.colorPannel}),i.a.createElement("div",{className:s.a.circlePoint,style:{transform:`translate3d(${n.x-5}px, ${n.y-5}px, 0)`}}),i.a.createElement("div",{style:{transform:`translate3d(${r.x-5}px, ${r.y-5}px, 0)`},className:s.a.selectPoint}),i.a.createElement("div",{className:s.a.canvasCover,style:{height:`${g&&2*g.x}px`},onPointerDown:({nativeEvent:{offsetX:t,offsetY:e}})=>{if(g){R.current.isSelecting=!0,w(h({x:t,y:e},g));const n=h({x:t,y:e},g);"circle"===n&&a(p({x:t,y:e},g)),"round"===n&&c({x:t,y:e})}},onPointerUp:()=>{R.current.isSelecting=!1,w(null)},onPointerMove:({nativeEvent:{offsetX:t,offsetY:e}})=>{if(R.current.isSelecting&&g&&m){if("circle"===m&&x){a(p({x:t,y:e},g));const n=y({x:t,y:e},{x:g.x,y:g.y});f(x,g,n.toRGBAString())}if("round"===m){const n=((t,e)=>{const{x:n,y:a,width:r,r:o}=e,i=(Math.sin(.25*Math.PI),t.x-n),c=t.y-a;Math.sqrt(i**2+c**2);if(d(t,e))return t})({x:t,y:e},g);n&&c(n)}}}}))}},,,,,,,,,,,,function(t,e,n){t.exports={colorBar:"colorBar_22b99",colorPannelWrap:"colorPannelWrap_94f56",colorPannel:"colorPannel_02c11",circlePoint:"circlePoint_0a8ba",selectPoint:"selectPoint_5aa22",canvasCover:"canvasCover_4958d"}},,function(t,e,n){t.exports={layerPannel:"layerPannel_e799a",layerDrawer:"layerDrawer_edc15",pannelWrap:"pannelWrap_b4fbf",canvases:"canvases_b0d45",active:"active_1674e"}},,,function(t,e,n){t.exports={topToolBar:"topToolBar_7b6e5"}},,,,,function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return p}));var a=n(46),r=n.n(a),o=n(56);new(n.n(o).a);const i=(t=0,e=0,n)=>{const a=document.createElement("canvas");a.width=t,a.height=e,a.setAttribute("uuid",r()("canvasId-"));const o=a.getContext("2d");return o&&n&&(o.fillStyle=n.toRGBAString(),o.fillRect(0,0,t,e)),a},c=(t,e)=>{const n=t.getContext("2d");null==n||n.drawImage(e,0,0)},s=t=>{const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d"),a=t.getContext("2d");return n&&a&&(n.imageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.putImageData(a.getImageData(0,0,t.width,t.height),0,0)),e},l=[];let u=0;const f=async t=>new Promise(e=>{l.push({file:t,cb:e}),(async()=>{if(u<1){let t=l.shift();for(;t;){u++;const{file:e,cb:n}=t,a=new Image,r=URL.createObjectURL(new Blob([e]));a.src=r;const o=document.createElement("canvas");try{await a.decode(),o.width=a.width,o.height=a.height,c(o,a)}catch(t){}URL.revokeObjectURL(r),n(o),u--,t=l.shift()}}})()}),d=t=>new Promise(e=>{t.toBlob(t=>(async(t,e)=>{if(t){const n=URL.createObjectURL(t);e(await(await fetch(n)).arrayBuffer())}else e(null)})(t,e),"image/png",1)});let h=()=>{const t=i(0,0).toDataURL();return h=()=>t,h()};const p=()=>h()},function(t,e,n){var a=n(52),r=0;t.exports=function(t){var e=++r;return a(t)+e}},function(t,e,n){var a=n(49),r="object"==typeof self&&self&&self.Object===Object&&self,o=a||r||Function("return this")();t.exports=o},function(t,e){t.exports=function(){return!1}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(50))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var a=n(53);t.exports=function(t){return null==t?"":a(t)}},function(t,e,n){var a=n(54),r=n(55),o=n(51),i=n(48),c=a?a.prototype:void 0,s=c?c.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return r(e,t)+"";if(i(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var a=n(47).Symbol;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,a=null==t?0:t.length,r=Array(a);++n<a;)r[n]=e(t[n],n,t);return r}},function(t,e,n){t.exports=function(){return new Worker(n.p+"WorkerName.4812e85ebc24635efccf.js")}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return f}));var a=n(59),r=n.n(a),o=n(46),i=n.n(o),c=n(20),s=n(45);class l{constructor(t,e,n="",a,r=Date.now(),o=Date.now(),c=i()(`work_${Date.now()}_`)){this.width=t,this.height=e,this.name=n,this.thumbnail=a,this.createTime=r,this.updateTime=o,this.workId=c}}class u{constructor(t,e=[]){this.workInfo=t,this.layers=e}static createEmpty(t,e,n){const a=new l(t,e,"new work",Object(s.d)()),r=[];return r.push(f.create(a,c.RGBA.WHITE)),new u(a,r)}}class f{constructor(t,e="new layer",n=!0,a=i()(`layer-${Date.now()}-`)){this.canvas=t,this.name=e,this.visible=n,this.layerId=a}static create({width:t,height:e},n){const a=Object(s.b)(t,e,n),r=new f(a);return a.setAttribute("layerId",r.layerId),r}}var d=n(15);const h=(t,e)=>e?`layers/${t}/${e}.png`:`layers/${t}`,p=t=>`thumbnail/${t}.png`;class y{constructor(t){this.workInfo=void 0,this.layers=void 0;const{workInfo:e,layers:n}=t,{thumbnail:a,workId:r,...o}=e;this.workInfo={workId:r,...o,thumbnail:p(r)},this.layers=n.map(({canvas:t,layerId:e,...n})=>({layerId:e,...n,canvas:h(r,e)}))}}class v{static async saveWork(t){if(!t)return;const e=new y(t);await this.saveWorkInfo(e);const n=this.getCanvasFileList(t,e);for(let t=0;t<n.length;t++){const{path:e,canvas:a}=n[t],{path:r,name:o}=d.a.analyzePath(e),i=await Object(s.e)(a);i&&await d.a.save({type:"image/png",path:r,data:i,name:o})}}static async saveWorkInfo(t){await d.a.save({type:"application/json",path:"",name:`${t.workInfo.workId}.json`,data:JSON.stringify(t)})}static getCanvasFileList(t,e){const{layers:n}=t,{layers:a}=e,r=[{path:e.workInfo.thumbnail,canvas:this.combimeCanvas(100,100,n.map(({canvas:t})=>t))}];return n.forEach(({canvas:t},e)=>{r.push({canvas:t,path:a[e].canvas})}),r}static combimeCanvas(t,e,n){const a=Object(s.b)(t,e),r=a.getContext("2d");if(r)for(let t=n.length-1;t>-1;t--){const e=n[t];r.drawImage(e,0,0,e.width,e.height)}return a}static async saveLayerDetail(t,e,n){const{canvas:a,layerId:o,...i}=e,c=await Object(s.e)(a);if(!c)return;const{path:l,name:u}=d.a.analyzePath(h(t,o));d.a.save({type:"image/png",path:l,name:u,data:c});const[{data:f}]=await d.a.get("",`${t}.json`),p=JSON.parse(f),y=p.layers.find(({layerId:t})=>t===o);if(!y&&r()(n)&&(p.layers.splice(n,0,{canvas:h(t,o),layerId:o,...i}),await this.saveWorkInfo(p)),y&&r()(n))throw"add layer fail: "+o}static async removeWork(t){}static async updateLayerDetail(t,e){}static async getWorkDetail(t){const[{data:e}]=await d.a.get("",`${t}.json`),{workInfo:n,layers:a}=JSON.parse(e),r=[],o=(await d.a.get(h(t))).reduce((t,{data:e,name:n})=>({...t,[n]:e}),{}),i=[];for(let t=0;t<a.length;t++){const{layerId:e,visible:n,name:r}=a[t],c=o[`${e}.png`];if(c)try{const t=await Object(s.c)(c);i.push({canvas:t,name:r,visible:n,layerId:e})}catch(t){}}return i.forEach(({canvas:t,name:e,visible:n,layerId:a},o)=>{const i=new f(t,e,n,a);r.push(i)}),new u(n,r)}static async getWorkList(){let t;const[e,n]=await Promise.all([d.a.get(""),d.a.get("thumbnail")]);return t=e.map(({data:t})=>t).map(t=>{const{workInfo:{thumbnail:e,workId:a,...r}}=JSON.parse(t),o=n.find(({name:t})=>t===`${a}.png`);if(o)return{...r,workId:a,thumbnail:URL.createObjectURL(new Blob([o.data]))};throw"workInfoList error "+a}),t}}},function(t,e,n){var a=n(60),r=n(61);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==a(t)}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var a=n(57),r=n(63),o=n(64),i=Math.max,c=Math.min;t.exports=function(t,e,n){var s,l,u,f,d,h,p=0,y=!1,v=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function w(e){var n=s,a=l;return s=l=void 0,p=e,f=t.apply(a,n)}function g(t){return p=t,d=setTimeout(x,e),y?w(t):f}function b(t){var n=t-h;return void 0===h||n>=e||n<0||v&&t-p>=u}function x(){var t=r();if(b(t))return I(t);d=setTimeout(x,function(t){var n=e-(t-h);return v?c(n,u-(t-p)):n}(t))}function I(t){return d=void 0,m&&s?w(t):(s=l=void 0,f)}function R(){var t=r(),n=b(t);if(s=arguments,l=this,h=t,n){if(void 0===d)return g(h);if(v)return clearTimeout(d),d=setTimeout(x,e),w(h)}return void 0===d&&(d=setTimeout(x,e)),f}return e=o(e)||0,a(n)&&(y=!!n.leading,u=(v="maxWait"in n)?i(o(n.maxWait)||0,e):u,m="trailing"in n?!!n.trailing:m),R.cancel=function(){void 0!==d&&clearTimeout(d),p=0,s=h=l=d=void 0},R.flush=function(){return void 0===d?f:I(r())},R}},function(t,e,n){var a=n(47);t.exports=function(){return a.Date.now()}},function(t,e,n){var a=n(57),r=n(48),o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=c.test(t);return n||s.test(t)?l(t.slice(2),n?2:8):i.test(t)?NaN:+t}},function(t,e){t.exports=function(t,e,n){for(var a=n-1,r=t.length;++a<r;)if(t[a]===e)return a;return-1}},function(t,e,n){var a=n(67),r=n(68);t.exports=function(t,e){return t&&t.length?r(t,a(e,2)):[]}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var a=n(69),r=n(70),o=n(71),i=n(72),c=n(73),s=n(74);t.exports=function(t,e,n){var l=-1,u=r,f=t.length,d=!0,h=[],p=h;if(n)d=!1,u=o;else if(f>=200){var y=e?null:c(t);if(y)return s(y);d=!1,u=i,p=new a}else p=e?[]:h;t:for(;++l<f;){var v=t[l],m=e?e(v):v;if(v=n||0!==v?v:0,d&&m==m){for(var w=p.length;w--;)if(p[w]===m)continue t;e&&p.push(m),h.push(v)}else u(p,m,n)||(p!==h&&p.push(m),h.push(v))}return h}},function(t,e,n){var a=n(51);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return a(t)?t:[t]}},function(t,e,n){var a=n(65);t.exports=function(t,e){return!!(null==t?0:t.length)&&a(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var a=-1,r=null==t?0:t.length;++a<r;)if(n(e,t[a]))return!0;return!1}},function(t,e,n){var a=n(65);t.exports=function(t,e){return!!(null==t?0:t.length)&&a(t,e,0)>-1}},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(){return[]}}]]);