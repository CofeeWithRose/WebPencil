(window.webpackJsonp=window.webpackJsonp||[]).push([[4,15],{19:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"usePCanvas",(function(){return s}));var a,n=r(0),o=r.n(n),c=r(27),u=r.n(c),i=r(42);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},s=function(){return{pCanvasRef:Object(n.useRef)(null)}};l(s,"useRef{pCanvasRef}");var d,f,v=function(e){e.workDetail;var t=e.pCanvasRef,r=Object(i.a)({maxScale:2*devicePixelRatio}).wrapRef;return Object(n.useEffect)((function(){if(t)return t={current:{}},function(){t={current:null}}}),[]),o.a.createElement("main",{ref:r,className:u.a.PCanvas},"ss")};l(v,"useTransform{{ wrapRef }}\nuseEffect{}",(function(){return[i.a]})),t.default=v,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(s,"usePCanvas","D:\\code\\WebPencil\\src\\pages\\paint\\PCanvas.tsx"),d.register(v,"default","D:\\code\\WebPencil\\src\\pages\\paint\\PCanvas.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}.call(this,r(8)(e))},27:function(e,t,r){e.exports={PCanvas:"PCanvas_bc01f",layout:"layout_72e38"}},39:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p}));var a,n=r(0),o=r.n(n),c=r(40),u=r.n(c),i=r(9),l=r(1),s=r(64);function d(e,t,r,a,n,o,c){try{var u=e[o](c),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(a,n)}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var f,v;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function p(e){var t=e.className,r=void 0===t?"":t,a=e.headNode,n=void 0===a?null:a,c=e.asideClass,f=void 0===c?"":c,v=e.asideNode,p=void 0===v?null:v,b=e.children,m=void 0===b?null:b,y=e.beforeBack,h=e.showBackButton,g=void 0===h||h,w=e.contentClassName,x=void 0===w?"":w,_=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=y,!e.t1){e.next=5;break}return e.next=4,y();case 4:e.t1=e.sent;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}e.t0=!y;case 8:if(!e.t0){e.next=10;break}i.b.goBack();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function c(e){d(o,a,n,c,u,"next",e)}function u(e){d(o,a,n,c,u,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.a.createElement("section",{className:"".concat(u.a.section," ").concat(r)},o.a.createElement("header",null,g&&o.a.createElement(l.Button,{ghost:!0,onClick:_,shape:"circle",size:"small",icon:o.a.createElement(s.a,null)}),!1,n),o.a.createElement("div",{className:u.a.wrapper},o.a.createElement("aside",{className:f},p),o.a.createElement("main",{className:x},m)))}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(p,"Home","D:\\code\\WebPencil\\src\\lauout\\BasicLayout.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}).call(this,r(8)(e))},40:function(e,t,r){e.exports={section:"section_c21f7",wrapper:"wrapper_e44d8"}},42:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return _}));var a,n=r(43),o=r.n(n),c=r(0),u=r(30),i=r.n(u),l=r(44);function s(e,t,r,a,n,o,c){try{var u=e[o](c),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(a,n)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function c(e){s(o,a,n,c,u,"next",e)}function u(e){s(o,a,n,c,u,"throw",e)}c(void 0)}))}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=function(e,t,r){return Math.min(Math.max(t,e),r)},p=function(e,t,r){return Math.abs(e-t)<r?t:e},b=function(e,t,r){var a=l.a.subtract(e,t);return l.a.add(l.a.multipy(a,r),t)},m=function(e,t,r){var a=l.a.subtract(e,t);return l.a.add(l.a.rotate(a,r),t)},y=function(e,t,r,a,n){return l.a.add(m(b(e,t,a),t,n),r)},h=new l.a;console.log("translateFun: ",y(new l.a(0,1),h,h,2,90));var g,w,x=function(e,t,r,a,n){var o=y(new l.a,e,r,a,n),c=y(new l.a,t,r,a,n);return l.a.add(l.a.subtract(c,o),r)};function _(e){var t=e||{},r=t.maxScale,a=void 0===r?2:r,n=t.minScale,u=void 0===n?.5:n,s=t.scaleEnable,f=void 0===s||s,b=t.rotateEnable,m=void 0===b||b,y=Object(c.useRef)(null),h=Object(c.useRef)({gestrueStartRotate:0,eleStartRotate:0,rotate:0,gestrueStartscale:1,eleStartScale:1,scale:1,gestrueStartTranslate:new l.a,eleStartTanslate:new l.a,translate:new l.a,center:new l.a});return Object(c.useEffect)((function(){if(null!==y.current){var e=getComputedStyle(y.current);h.current.center=new l.a(.5*parseFloat(e.width),.5*parseFloat(e.height)),y.current.style.transition="transform 0.1s";var t=new i.a.Manager(y.current);t.add(new i.a.Pan({threshold:0,pointers:2})),m&&t.add(new i.a.Rotate).recognizeWith(t.get("pan")),f&&t.add(new i.a.Pinch).recognizeWith([t.get("pan"),t.get("rotate")]);var r=o()((function(){return new Promise((function(e){requestAnimationFrame((function(){var t=h.current,r=t.rotate,a=t.scale,n=t.translate,o=n.x,c=n.y,u=t.center;y.current.style.transform="translate3d( ".concat(o,"px, ").concat(c,"px, 0)  scale(").concat(a,") rotate(").concat(r,"deg)"),y.current.style.transformOrigin="".concat(u.x,"px ").concat(u.y,"px"),e()}))}))}),10),n=function(e){var t=e.deltaX,r=e.deltaY,a=h.current.translate;h.current.gestrueStartTranslate=new l.a(t,r),h.current.eleStartTanslate=a,y.current&&(y.current.style.transition="",requestAnimationFrame((function(){y.current&&(y.current.style.transition="transform 0.1s")})))},c=function(e){var t=e.deltaX,a=e.deltaY,n=(e.center,h.current),o=n.scale,c=n.gestrueStartTranslate,u=n.eleStartTanslate,i=u.x+(t-c.x),s=u.y+(a-c.y),d=1==o?new l.a(p(i,0,10),p(s,0,10)):new l.a(i,s);h.current.translate=d,r()},s=function(){var e=d(regeneratorRuntime.mark((function e(t){var a,n,o,c,u,i,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.rotation,n=t.center,o=h.current,c=o.rotate,u=o.translate,i=o.center,s=o.scale,h.current.eleStartRotate=c,h.current.gestrueStartRotate=a,d=l.a.subtract(n,u),h.current.translate=x(i,d,u,s,c),h.current.center=d,e.next=9,r();case 9:y.current&&(y.current.style.transition="",requestAnimationFrame((function(){y.current&&(y.current.style.transition="transform 0.1s")})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.rotation,a=h.current,n=a.gestrueStartRotate,o=a.eleStartRotate,c=(a.translate,o+(t-n));h.current.rotate=p(c,0,10),r()},g=function(){var e=d(regeneratorRuntime.mark((function e(t){var a,n,o,c,u,i,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.scale,n=t.center,o=h.current,c=o.translate,u=o.scale,i=o.center,s=o.rotate,h.current.gestrueStartscale=a,h.current.eleStartScale=u,d=l.a.subtract(n,c),h.current.translate=x(i,d,c,a,s),h.current.center=d,e.next=9,r();case 9:y.current&&(y.current.style.transition="",requestAnimationFrame((function(){y.current&&(y.current.style.transition="transform 0.1s")})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.scale,n=(e.center,h.current),o=n.eleStartScale,c=n.gestrueStartscale,i=(n.translate,v(o+(t-c),u,a));h.current.scale=p(i,1,.2),r()};return t.on("panstart",n),t.on("panmove",c),t.on("rotatestart",s),t.on("rotate",b),t.on("pinchstart",g),t.on("pinchmove",w),r(),function(){t.off("panstart",n),t.off("panmove",c),t.off("rotatestart",s),t.off("rotate",b),t.off("pinchstart",g),t.off("pinchmove",w)}}}),[y.current]),{wrapRef:y}}f(_,"useRef{wrapRef}\nuseRef{transformInfoRef}\nuseEffect{}"),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(g.register(v,"getValueFromRange","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(p,"getTargetValue","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(b,"scaleFun","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(m,"rotateFun","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(y,"translateFun","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(h,"zero","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(x,"getNewTranslate","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register("transform 0.1s","TRANSACTION","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts"),g.register(_,"useTransform","D:\\code\\WebPencil\\src\\hooks\\useTransform.ts")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)}).call(this,r(8)(e))},43:function(e,t,r){var a=r(36),n=r(35);e.exports=function(e,t,r){var o=!0,c=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return n(r)&&(o="leading"in r?!!r.leading:o,c="trailing"in r?!!r.trailing:c),a(e,t,{leading:o,maxWait:t,trailing:c})}},44:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}__webpack_require__.d(__webpack_exports__,"a",(function(){return Vector2})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},normalizeAtant2=function(e){return e<0?2*Math.PI+e:e},Vector2=function(){function Vector2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Vector2),this.x=e,this.y=t}return _createClass(Vector2,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}],[{key:"dist",value:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"magnitude",value:function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}},{key:"degree",value:function(e,t,r){var a=normalizeAtant2(Math.atan2(t.y-e.y,t.x-e.x)),n=normalizeAtant2(Math.atan2(r.y-e.y,r.x-e.x));return Math.abs(n-a)}},{key:"add",value:function(e,t){return new Vector2(e.x+t.x,e.y+t.y)}},{key:"rotate",value:function(e,t){var r=Vector2.magnitude(e),a=normalizeAtant2(Math.atan2(e.y,e.x))-t%360/180*Math.PI;return new Vector2(Math.cos(a)*r,Math.sin(a)*r)}},{key:"multipy",value:function(e,t){return new Vector2(e.x*t,e.y*t)}},{key:"subtract",value:function(e,t){return new Vector2(e.x-t.x,e.y-t.y)}},{key:"move",value:function(e,t,r){var a=r.x-t.x,n=r.y-t.y;return new Vector2(e.x+a,e.y+n)}}]),Vector2}(),reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(normalizeAtant2,"normalizeAtant2","D:\\code\\WebPencil\\src\\util\\data\\Vector2.ts"),reactHotLoader.register(Vector2,"Vector2","D:\\code\\WebPencil\\src\\util\\data\\Vector2.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(8)(module))},6:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return y}));var a,n,o,c=r(0),u=r.n(c),i=r(39),l=r(27),s=r.n(l),d=r(19),f=r(9),v=r(46),p=r.n(v),b=r(20);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],a=!0,n=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(n)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(){var e=m(Object(c.useState)(),2),t=e[0];e[1];Object(c.useEffect)((function(){var e=p.a.parse(f.b.location.search.substr(1));e.width,e.height,e.type,e.workId}),[]);var r=Object(d.usePCanvas)().pCanvasRef;return u.a.createElement(i.a,{contentClassName:s.a.layout,asideNode:u.a.createElement(b.default,null)},u.a.createElement(d.default,{pCanvasRef:r,workDetail:t}))}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(y,"useState{[ workDetail, setWorkDetail ]}\nuseEffect{}\nusePCanvas{{ pCanvasRef }}",(function(){return[d.usePCanvas]})),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(y,"Paint","D:\\code\\WebPencil\\src\\pages\\paint\\index.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)}.call(this,r(8)(e))}}]);