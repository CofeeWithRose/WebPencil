(window.webpackJsonp=window.webpackJsonp||[]).push([[1,13,18,22,23,29],{11:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "PCanvas", function() { return /* binding */ PCanvas; });\n__webpack_require__.d(__webpack_exports__, "PCanvasController", function() { return /* reexport */ pcnvas_controller["PCanvasController"]; });\n__webpack_require__.d(__webpack_exports__, "usePCanvas", function() { return /* binding */ usePCanvas; });\n__webpack_require__.d(__webpack_exports__, "CanvasEventData", function() { return /* reexport */ pcnvas_controller["CanvasEventData"]; });\n__webpack_require__.d(__webpack_exports__, "CanvasEvent", function() { return /* reexport */ pcnvas_controller["CanvasEvent"]; });\n\n// EXTERNAL MODULE: external "React"\nvar external_React_ = __webpack_require__(0);\nvar external_React_default = /*#__PURE__*/__webpack_require__.n(external_React_);\n\n// EXTERNAL MODULE: ./src/pages/paint/pcanvas/style.less\nvar style = __webpack_require__(45);\nvar style_default = /*#__PURE__*/__webpack_require__.n(style);\n\n// EXTERNAL MODULE: ./node_modules/lodash/throttle.js\nvar throttle = __webpack_require__(84);\nvar throttle_default = /*#__PURE__*/__webpack_require__.n(throttle);\n\n// EXTERNAL MODULE: external "Hammer"\nvar external_Hammer_ = __webpack_require__(46);\nvar external_Hammer_default = /*#__PURE__*/__webpack_require__.n(external_Hammer_);\n\n// EXTERNAL MODULE: ./src/util/data/Vector2.ts\nvar Vector2 = __webpack_require__(80);\n\n// CONCATENATED MODULE: ./src/hooks/useTransform.ts\n\n\n\n\n\nconst getValueFromRange = (val, min, max) => Math.min(Math.max(min, val), max);\n\nconst getTargetValue = (val, targetVal, dt) => Math.abs(val - targetVal) < dt ? targetVal : val;\n\nconst scaleFun = (val, center, scale) => {\n  const valVec = Vector2["a" /* Vector2 */].subtract(val, center);\n  return Vector2["a" /* Vector2 */].add(Vector2["a" /* Vector2 */].multipy(valVec, scale), center);\n};\n\nconst rotateFun = (val, center, rotate) => {\n  const valVec = Vector2["a" /* Vector2 */].subtract(val, center);\n  return Vector2["a" /* Vector2 */].add(Vector2["a" /* Vector2 */].rotate(valVec, rotate), center);\n};\n\nconst translateFun = (val, center, translate, scale, rotate) => {\n  return Vector2["a" /* Vector2 */].add(rotateFun(scaleFun(val, center, scale), center, rotate), translate);\n};\n\nconst zero = new Vector2["a" /* Vector2 */](); // console.log(\'translateFun: \', translateFun(new Vector2(0,1), zero, zero, 2, 90))\n\n/**\n * 当transform-origin的改变（用户旋转操作时会发生）,此时scale或rotate有值会导致图像抖动，该方法可以获取修正后的transform。\n */\n\nconst getNewTranslate = (preCenter, newCenter, translate, scale, rotate) => {\n  const preVec = translateFun(new Vector2["a" /* Vector2 */](), preCenter, translate, scale, rotate);\n  const newVec = translateFun(new Vector2["a" /* Vector2 */](), newCenter, translate, scale, rotate);\n  return Vector2["a" /* Vector2 */].add(Vector2["a" /* Vector2 */].subtract(newVec, preVec), translate);\n};\n\nconst TRANSACTION = \'transform 0.1s\';\nfunction useTransform(userTransformProps) {\n  const {\n    maxScale = 2,\n    minScale = 0.5,\n    transRef,\n    viewRef\n  } = userTransformProps || {}; // const wrapRef = useRef<WrapElement>(null)\n  // const contentRef = useRef<ContentElement>(null)\n\n  const transformInfoRef = Object(external_React_["useRef"])({\n    /**\n     * 旋转开始时手势的rotate, 用于计算手势的rotate差值.\n     */\n    gestrueStartRotate: 0,\n\n    /**\n     * 旋转开始时元素的rotate，用于计算元素旋转的差值.\n     */\n    eleStartRotate: 0,\n\n    /**\n     *即将渲染的rotate.\n     */\n    rotate: 0,\n\n    /**\n     * 缩放开始时的手势识别的缩放值.\n     */\n    gestrueStartscale: 1,\n\n    /**\n     * 缩放开始时元素的缩放值.\n     */\n    eleStartScale: 1,\n\n    /**\n     * 渲染的缩放值.\n     */\n    scale: minScale,\n    gestrueStartTranslate: new Vector2["a" /* Vector2 */](),\n    eleStartTanslate: new Vector2["a" /* Vector2 */](),\n    translate: new Vector2["a" /* Vector2 */](),\n\n    /**\n     * 旋转中心点.\n     */\n    center: new Vector2["a" /* Vector2 */]()\n  });\n  Object(external_React_["useEffect"])(() => {\n    if (!(viewRef === null || viewRef === void 0 ? void 0 : viewRef.current)) return;\n\n    if (transRef && transRef.current) {\n      const computedStyle = getComputedStyle(transRef.current);\n      /**\n       * 默认的transform中心点.\n       */\n\n      transformInfoRef.current.center = new Vector2["a" /* Vector2 */](parseFloat(computedStyle.width) * 0.5, parseFloat(computedStyle.height) * 0.5);\n      /**\n       * 添加操作时的动画，增强体验流畅度.\n       */\n\n      transRef.current.style.transition = TRANSACTION;\n      const mainManager = new external_Hammer_default.a.Manager(viewRef.current);\n      mainManager.add(new external_Hammer_default.a.Pan({\n        threshold: 0,\n        pointers: 2,\n        enable: (_, data) => {\n          if (data && data.pointers.length > 1) {\n            const {\n              pointers: [p1, p2]\n            } = data;\n            console.log(Vector2["a" /* Vector2 */].dist(p1, p2));\n            return Vector2["a" /* Vector2 */].dist(p1, p2) < 200;\n          }\n\n          return false;\n        }\n      })); // mainManager.add(new Hammer.Rotate()).recognizeWith(mainManager.get(\'pan\'))\n\n      mainManager.add(new external_Hammer_default.a.Pinch({\n        enable: (_, data) => {\n          if (data && data.pointers.length > 1) {\n            const {\n              pointers: [p1, p2]\n            } = data;\n            console.log(Vector2["a" /* Vector2 */].dist(p1, p2));\n            return Vector2["a" /* Vector2 */].dist(p1, p2) > 200;\n          }\n\n          return false;\n        }\n      })).recognizeWith([mainManager.get(\'pan\')]);\n\n      const requestUpdate = throttle_default()(() => new Promise(resolve => {\n        requestAnimationFrame(() => {\n          if (!transRef.current) return;\n          const {\n            rotate,\n            scale,\n            translate: {\n              x: transformX,\n              y: transformY\n            },\n            center\n          } = transformInfoRef.current;\n          transRef.current.style.transform = `translate3d( ${transformX}px, ${transformY}px, 0)  scale(${scale}) rotate(${rotate}deg)`; // transRef.current.style.transformOrigin = `${center.x}px ${center.y}px`\n\n          resolve(); // console.log(\'translate: \', transformInfoRef.current.translate)\n          // console.log(\'center: \', transformInfoRef.current.center)\n        });\n      }), 10);\n\n      const onPanStart = ({\n        deltaX,\n        deltaY\n      }) => {\n        const {\n          translate\n        } = transformInfoRef.current;\n        transformInfoRef.current.gestrueStartTranslate = new Vector2["a" /* Vector2 */](deltaX, deltaY);\n        transformInfoRef.current.eleStartTanslate = translate;\n\n        if (transRef.current) {\n          transRef.current.style.transition = \'\';\n          requestAnimationFrame(() => {\n            if (transRef.current) {\n              transRef.current.style.transition = TRANSACTION;\n            }\n          });\n        }\n      };\n\n      const onPan = ({\n        deltaX,\n        deltaY,\n        center\n      }) => {\n        const {\n          scale,\n          gestrueStartTranslate,\n          eleStartTanslate\n        } = transformInfoRef.current;\n        const valX = eleStartTanslate.x + (deltaX - gestrueStartTranslate.x);\n        const valY = eleStartTanslate.y + (deltaY - gestrueStartTranslate.y);\n        const translate = scale == 1 ? new Vector2["a" /* Vector2 */](getTargetValue(valX, 0, 10), getTargetValue(valY, 0, 10)) : new Vector2["a" /* Vector2 */](valX, valY);\n        transformInfoRef.current.translate = translate;\n        requestUpdate();\n      }; // const onRotateStart = async ({rotation, center}: HammerInput) => {\n      //     const { rotate, translate, center: preCenter, scale } = transformInfoRef.current\n      //     transformInfoRef.current.eleStartRotate = rotate\n      //     transformInfoRef.current.gestrueStartRotate = rotation\n      //     const newCenter = Vector2.subtract(center, translate)\n      //     transformInfoRef.current.translate = getNewTranslate(preCenter, newCenter, translate, scale, rotate)\n      //     transformInfoRef.current.center = newCenter\n      //     await requestUpdate()\n      //     if(wrapRef.current){\n      //         wrapRef.current.style.transition = \'\'\n      //         requestAnimationFrame(() => {\n      //             if(wrapRef.current){\n      //                 wrapRef.current.style.transition = TRANSACTION\n      //             }\n      //         } )\n      //     }\n      // }\n      // const onRotate = ({rotation}: HammerInput) => { \n      //     const { gestrueStartRotate, eleStartRotate, translate } =  transformInfoRef.current\n      //     const deltaRotateion = rotation - gestrueStartRotate\n      //     const rotateVal = eleStartRotate +  deltaRotateion\n      //     transformInfoRef.current.rotate = getTargetValue(rotateVal, 0, 10 )\n      //     requestUpdate()\n      // }\n\n\n      const onPinchStart = async ({\n        scale,\n        center\n      }) => {\n        const {\n          translate,\n          scale: slScale,\n          center: preCenter,\n          rotate\n        } = transformInfoRef.current;\n        transformInfoRef.current.gestrueStartscale = scale;\n        transformInfoRef.current.eleStartScale = slScale;\n        const newCenter = Vector2["a" /* Vector2 */].subtract(center, translate);\n        transformInfoRef.current.translate = getNewTranslate(preCenter, newCenter, translate, scale, rotate);\n        transformInfoRef.current.center = newCenter;\n        await requestUpdate();\n\n        if (transRef.current) {\n          transRef.current.style.transition = \'\';\n          requestAnimationFrame(() => {\n            if (transRef.current) {\n              transRef.current.style.transition = TRANSACTION;\n            }\n          });\n        }\n      };\n\n      const onPinchinMove = ({\n        scale,\n        center\n      }) => {\n        const {\n          eleStartScale,\n          gestrueStartscale,\n          translate\n        } = transformInfoRef.current;\n        const deltaScale = scale - gestrueStartscale;\n        const scaleVal = getValueFromRange(eleStartScale + deltaScale, minScale, maxScale);\n        transformInfoRef.current.scale = getTargetValue(scaleVal, 1, 0.2);\n        requestUpdate();\n      };\n\n      mainManager.on(\'panstart\', onPanStart);\n      mainManager.on(\'panmove\', onPan); // mainManager.on(\'rotatestart\', onRotateStart)\n      // mainManager.on(\'rotate\', onRotate)\n\n      mainManager.on(\'pinchstart\', onPinchStart);\n      mainManager.on(\'pinchmove\', onPinchinMove);\n      requestUpdate();\n      return () => {\n        mainManager.off(\'panstart\', onPanStart);\n        mainManager.off(\'panmove\', onPan); // mainManager.off(\'rotatestart\', onRotateStart)\n        // mainManager.off(\'rotate\', onRotate)\n\n        mainManager.off(\'pinchstart\', onPinchStart);\n        mainManager.off(\'pinchmove\', onPinchinMove);\n      };\n    }\n  }, [...Object.values(userTransformProps || {})]);\n}\n// EXTERNAL MODULE: ./src/pages/paint/pcanvas/pcnvas.controller.ts + 1 modules\nvar pcnvas_controller = __webpack_require__(25);\n\n// EXTERNAL MODULE: external "antd"\nvar external_antd_ = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/pages/paint/pcanvas/index.tsx\n\n\n\n\n\n\nconst usePCanvas = () => {\n  const {\n    current: pCanvas\n  } = Object(external_React_["useRef"])(new pcnvas_controller["PCanvasController"]());\n  return {\n    pCanvas\n  };\n};\n/**\n * 手绘编辑器的画板.\n */\n\n\nconst PCanvas = ({\n  initValue,\n  pCanvasController,\n  loading\n}) => {\n  const coverRef = Object(external_React_["useRef"])(null);\n  const wrapRef = Object(external_React_["useRef"])(null);\n  const viewRef = Object(external_React_["useRef"])(null);\n  const [minScale, setMinScale] = Object(external_React_["useState"])(0.1);\n  useTransform({\n    minScale,\n    maxScale: 1,\n    viewRef,\n    transRef: wrapRef,\n    scaleRef: wrapRef\n  });\n  Object(external_React_["useEffect"])(() => {\n    if (!initValue) return;\n\n    if (pCanvasController && wrapRef.current && coverRef.current) {\n      const wrapInfo = {\n        wrap: wrapRef.current,\n        cover: coverRef.current\n      };\n      pCanvasController.init(wrapInfo, initValue);\n      return () => {};\n    }\n  }, [initValue]);\n  Object(external_React_["useEffect"])(() => {\n    if (!initValue) return;\n    const cover = coverRef.current;\n\n    if (cover) {\n      const onPointerDown = pointEvent => {\n        if (pCanvasController) {\n          pCanvasController.onPointerDown(pointEvent);\n        }\n      };\n\n      const onPointerMove = pointEvent => {\n        if (pCanvasController) {\n          pCanvasController.onPointerMove(pointEvent);\n        }\n      };\n\n      const onPointerUp = pointEvent => {\n        if (pCanvasController) {\n          pCanvasController.onPointerUp(pointEvent);\n        }\n      };\n\n      cover.addEventListener(\'pointerdown\', onPointerDown, {\n        passive: false\n      });\n      cover.addEventListener(\'pointermove\', onPointerMove, {\n        passive: false\n      });\n      cover.addEventListener(\'pointerup\', onPointerUp, {\n        passive: false\n      });\n      return () => {\n        cover.removeEventListener(\'pointerdown\', onPointerDown);\n        cover.removeEventListener(\'pointermove\', onPointerMove);\n        cover.removeEventListener(\'pointerup\', onPointerUp);\n      };\n    }\n  }, [coverRef.current, initValue]);\n  return external_React_default.a.createElement("main", {\n    ref: viewRef,\n    className: style_default.a.pCanvas\n  }, external_React_default.a.createElement("section", {\n    ref: wrapRef,\n    className: style_default.a.canvasWrap\n  }, external_React_default.a.createElement("div", {\n    ref: coverRef,\n    className: style_default.a.cover\n  })), loading && external_React_default.a.createElement("div", {\n    className: style_default.a.mask,\n    onMouseMove: ({\n      nativeEvent\n    }) => nativeEvent.stopPropagation()\n  }, external_React_default.a.createElement(external_antd_["Spin"], null)));\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaG9va3MvdXNlVHJhbnNmb3JtLnRzPzk2ZTkiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL3BhaW50L3BjYW52YXMvaW5kZXgudHN4PzRiZjUiXSwibmFtZXMiOlsiZ2V0VmFsdWVGcm9tUmFuZ2UiLCJ2YWwiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZ2V0VGFyZ2V0VmFsdWUiLCJ0YXJnZXRWYWwiLCJkdCIsImFicyIsInNjYWxlRnVuIiwiY2VudGVyIiwic2NhbGUiLCJ2YWxWZWMiLCJWZWN0b3IyIiwic3VidHJhY3QiLCJhZGQiLCJtdWx0aXB5Iiwicm90YXRlRnVuIiwicm90YXRlIiwidHJhbnNsYXRlRnVuIiwidHJhbnNsYXRlIiwiemVybyIsImdldE5ld1RyYW5zbGF0ZSIsInByZUNlbnRlciIsIm5ld0NlbnRlciIsInByZVZlYyIsIm5ld1ZlYyIsIlRSQU5TQUNUSU9OIiwidXNlVHJhbnNmb3JtIiwidXNlclRyYW5zZm9ybVByb3BzIiwibWF4U2NhbGUiLCJtaW5TY2FsZSIsInRyYW5zUmVmIiwidmlld1JlZiIsInRyYW5zZm9ybUluZm9SZWYiLCJ1c2VSZWYiLCJnZXN0cnVlU3RhcnRSb3RhdGUiLCJlbGVTdGFydFJvdGF0ZSIsImdlc3RydWVTdGFydHNjYWxlIiwiZWxlU3RhcnRTY2FsZSIsImdlc3RydWVTdGFydFRyYW5zbGF0ZSIsImVsZVN0YXJ0VGFuc2xhdGUiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiY29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJwYXJzZUZsb2F0Iiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsInRyYW5zaXRpb24iLCJtYWluTWFuYWdlciIsIkhhbW1lciIsIk1hbmFnZXIiLCJQYW4iLCJ0aHJlc2hvbGQiLCJwb2ludGVycyIsImVuYWJsZSIsIl8iLCJkYXRhIiwibGVuZ3RoIiwicDEiLCJwMiIsImNvbnNvbGUiLCJsb2ciLCJkaXN0IiwiUGluY2giLCJyZWNvZ25pemVXaXRoIiwiZ2V0IiwicmVxdWVzdFVwZGF0ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwieCIsInRyYW5zZm9ybVgiLCJ5IiwidHJhbnNmb3JtWSIsInRyYW5zZm9ybSIsIm9uUGFuU3RhcnQiLCJkZWx0YVgiLCJkZWx0YVkiLCJvblBhbiIsInZhbFgiLCJ2YWxZIiwib25QaW5jaFN0YXJ0Iiwic2xTY2FsZSIsIm9uUGluY2hpbk1vdmUiLCJkZWx0YVNjYWxlIiwic2NhbGVWYWwiLCJvbiIsIm9mZiIsIk9iamVjdCIsInZhbHVlcyIsInVzZVBDYW52YXMiLCJwQ2FudmFzIiwiUENhbnZhc0NvbnRyb2xsZXIiLCJQQ2FudmFzIiwiaW5pdFZhbHVlIiwicENhbnZhc0NvbnRyb2xsZXIiLCJsb2FkaW5nIiwiY292ZXJSZWYiLCJ3cmFwUmVmIiwic2V0TWluU2NhbGUiLCJ1c2VTdGF0ZSIsInNjYWxlUmVmIiwid3JhcEluZm8iLCJ3cmFwIiwiY292ZXIiLCJpbml0Iiwib25Qb2ludGVyRG93biIsInBvaW50RXZlbnQiLCJvblBvaW50ZXJNb3ZlIiwib25Qb2ludGVyVXAiLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdHlsZXMiLCJjYW52YXNXcmFwIiwibWFzayIsIm5hdGl2ZUV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBOztBQXNCQSxNQUFNQSxpQkFBaUIsR0FBRyxDQUFDQyxHQUFELEVBQWNDLEdBQWQsRUFBMkJDLEdBQTNCLEtBQTJDQyxJQUFJLENBQUNGLEdBQUwsQ0FBVUUsSUFBSSxDQUFDRCxHQUFMLENBQVNELEdBQVQsRUFBY0QsR0FBZCxDQUFWLEVBQThCRSxHQUE5QixDQUFyRTs7QUFFQSxNQUFNRSxjQUFjLEdBQUcsQ0FBRUosR0FBRixFQUFlSyxTQUFmLEVBQWtDQyxFQUFsQyxLQUFrREgsSUFBSSxDQUFD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QUE5RCxLQUNFLHVDQUFDLHNCQUFELE9BREYsQ0FaRyxDQUFQO0FBaUJILENBN0VBIiwiZmlsZSI6IjExLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VFZmZlY3QsIFJlZk9iamVjdCB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgSGFtbWVyIGZyb20gJ2hhbW1lcmpzJ1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi91dGlsL2RhdGEvVmVjdG9yMlwiXG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gJ2xvZGFzaCdcblxuZXhwb3J0IGludGVyZmFjZSBVc2VUcmFuc2Zvcm1Qcm9wcyB7XG4gICAgXG4gICAgbWF4U2NhbGU/OiBudW1iZXIsXG5cbiAgICBtaW5TY2FsZT8gOm51bWJlcixcblxuICAgIC8vIHNjYWxlRW5hYmxlPzogYm9vbGVhblxuXG4gICAgLy8gcm90YXRlRW5hYmxlPzogYm9vbGVhblxuICAgIHNjYWxlUmVmPzogUmVmT2JqZWN0PEhUTUxFbGVtZW50PixcblxuICAgIHRyYW5zUmVmPzogUmVmT2JqZWN0PEhUTUxFbGVtZW50PixcblxuICAgIC8vIHJvdGF0ZUVsZT86IEhUTUxFbGVtZW50LFxuXG4gICAgdmlld1JlZjogUmVmT2JqZWN0PEhUTUxFbGVtZW50PixcblxufVxuXG5jb25zdCBnZXRWYWx1ZUZyb21SYW5nZSA9ICh2YWw6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSA9PiBNYXRoLm1pbiggTWF0aC5tYXgobWluLCB2YWwpLCBtYXggKVxuXG5jb25zdCBnZXRUYXJnZXRWYWx1ZSA9ICggdmFsOiBudW1iZXIsIHRhcmdldFZhbDogbnVtYmVyLCBkdDogbnVtYmVyICkgPT4gTWF0aC5hYnModmFsIC0gdGFyZ2V0VmFsKSA8IGR0PyB0YXJnZXRWYWw6dmFsXG5cbmNvbnN0IHNjYWxlRnVuID0gKHZhbDogVmVjdG9yMiwgY2VudGVyOiBWZWN0b3IyLCAgc2NhbGU6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHZhbFZlYyA9IFZlY3RvcjIuc3VidHJhY3QodmFsLCBjZW50ZXIpXG4gICAgcmV0dXJuIFZlY3RvcjIuYWRkKFZlY3RvcjIubXVsdGlweSh2YWxWZWMsIHNjYWxlKSwgY2VudGVyKVxufVxuXG5jb25zdCByb3RhdGVGdW4gPSAodmFsOiBWZWN0b3IyLCBjZW50ZXI6IFZlY3RvcjIsICByb3RhdGU6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHZhbFZlYyA9IFZlY3RvcjIuc3VidHJhY3QodmFsLCBjZW50ZXIpXG4gICAgcmV0dXJuIFZlY3RvcjIuYWRkKFZlY3RvcjIucm90YXRlKHZhbFZlYywgcm90YXRlKSwgY2VudGVyKVxufVxuXG5jb25zdCB0cmFuc2xhdGVGdW4gPSAodmFsOiBWZWN0b3IyLCBjZW50ZXI6IFZlY3RvcjIsIHRyYW5zbGF0ZTogVmVjdG9yMiwgc2NhbGU6IG51bWJlciwgcm90YXRlOiBudW1iZXIgKTogVmVjdG9yMiA9PiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuYWRkKHJvdGF0ZUZ1bihzY2FsZUZ1bih2YWwsY2VudGVyLCBzY2FsZSksIGNlbnRlcixyb3RhdGUpLCB0cmFuc2xhdGUpXG59XG5cbmNvbnN0IHplcm8gPSBuZXcgVmVjdG9yMigpXG4vLyBjb25zb2xlLmxvZygndHJhbnNsYXRlRnVuOiAnLCB0cmFuc2xhdGVGdW4obmV3IFZlY3RvcjIoMCwxKSwgemVybywgemVybywgMiwgOTApKVxuXG4vKipcbiAqIOW9k3RyYW5zZm9ybS1vcmlnaW7nmoTmlLnlj5jvvIjnlKjmiLfml4vovazmk43kvZzml7bkvJrlj5HnlJ/vvIks5q2k5pe2c2NhbGXmiJZyb3RhdGXmnInlgLzkvJrlr7zoh7Tlm77lg4/mipbliqjvvIzor6Xmlrnms5Xlj6/ku6Xojrflj5bkv67mraPlkI7nmoR0cmFuc2Zvcm3jgIJcbiAqL1xuY29uc3QgZ2V0TmV3VHJhbnNsYXRlID0gKHByZUNlbnRlcjogVmVjdG9yMiwgbmV3Q2VudGVyOiBWZWN0b3IyLCB0cmFuc2xhdGU6IFZlY3RvcjIsIHNjYWxlOiBudW1iZXIsIHJvdGF0ZTogbnVtYmVyKTogVmVjdG9yMiA9PiB7XG4gICAgY29uc3QgcHJlVmVjID0gdHJhbnNsYXRlRnVuKG5ldyBWZWN0b3IyLCBwcmVDZW50ZXIsIHRyYW5zbGF0ZSwgc2NhbGUsIHJvdGF0ZSlcbiAgICBjb25zdCBuZXdWZWMgPSB0cmFuc2xhdGVGdW4obmV3IFZlY3RvcjIsIG5ld0NlbnRlciwgdHJhbnNsYXRlLCBzY2FsZSwgcm90YXRlKVxuICAgIHJldHVybiBWZWN0b3IyLmFkZChWZWN0b3IyLnN1YnRyYWN0KG5ld1ZlYywgcHJlVmVjKSwgdHJhbnNsYXRlKVxufVxuXG5jb25zdCBUUkFOU0FDVElPTiA9ICd0cmFuc2Zvcm0gMC4xcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVHJhbnNmb3JtKHVzZXJUcmFuc2Zvcm1Qcm9wcz86IFVzZVRyYW5zZm9ybVByb3BzKXtcbiAgICBjb25zdCB7XG4gICAgICAgIFxuICAgICAgICBtYXhTY2FsZSA9IDIsXG5cbiAgICAgICAgbWluU2NhbGUgPSAwLjUsXG5cbiAgICAgICAgdHJhbnNSZWYsXG5cbiAgICAgICAgdmlld1JlZixcblxuICAgIH0gPSB1c2VyVHJhbnNmb3JtUHJvcHN8fHt9XG5cbiAgICAvLyBjb25zdCB3cmFwUmVmID0gdXNlUmVmPFdyYXBFbGVtZW50PihudWxsKVxuICAgIC8vIGNvbnN0IGNvbnRlbnRSZWYgPSB1c2VSZWY8Q29udGVudEVsZW1lbnQ+KG51bGwpXG4gICAgY29uc3QgdHJhbnNmb3JtSW5mb1JlZiA9IHVzZVJlZih7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml4vovazlvIDlp4vml7bmiYvlir/nmoRyb3RhdGUsIOeUqOS6juiuoeeul+aJi+WKv+eahHJvdGF0ZeW3ruWAvC5cbiAgICAgICAgICovXG4gICAgICAgIGdlc3RydWVTdGFydFJvdGF0ZTogMCxcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml4vovazlvIDlp4vml7blhYPntKDnmoRyb3RhdGXvvIznlKjkuo7orqHnrpflhYPntKDml4vovaznmoTlt67lgLwuXG4gICAgICAgICAqL1xuICAgICAgICBlbGVTdGFydFJvdGF0ZTogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICrljbPlsIbmuLLmn5PnmoRyb3RhdGUuXG4gICAgICAgICAqL1xuICAgICAgICByb3RhdGU6IDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOe8qeaUvuW8gOWni+aXtueahOaJi+WKv+ivhuWIq+eahOe8qeaUvuWAvC5cbiAgICAgICAgICovXG4gICAgICAgIGdlc3RydWVTdGFydHNjYWxlOiAxLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDnvKnmlL7lvIDlp4vml7blhYPntKDnmoTnvKnmlL7lgLwuXG4gICAgICAgICAqL1xuICAgICAgICBlbGVTdGFydFNjYWxlOiAxLFxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOa4suafk+eahOe8qeaUvuWAvC5cbiAgICAgICAgICovXG4gICAgICAgIHNjYWxlOiBtaW5TY2FsZSxcblxuICAgICAgICBnZXN0cnVlU3RhcnRUcmFuc2xhdGU6bmV3IFZlY3RvcjIoKSxcblxuICAgICAgICBlbGVTdGFydFRhbnNsYXRlOm5ldyBWZWN0b3IyKCksXG5cbiAgICAgICAgdHJhbnNsYXRlOiBuZXcgVmVjdG9yMigpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDml4vovazkuK3lv4PngrkuXG4gICAgICAgICAqL1xuICAgICAgICBjZW50ZXI6IG5ldyBWZWN0b3IyKCksXG4gICAgfSlcblxuICAgIHVzZUVmZmVjdCgoKT0+IHtcbiAgICAgIGlmKCF2aWV3UmVmPy5jdXJyZW50KSByZXR1cm5cbiAgICAgICAgaWYoIHRyYW5zUmVmJiZ0cmFuc1JlZi5jdXJyZW50ICl7XG4gICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRyYW5zUmVmLmN1cnJlbnQpXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICog6buY6K6k55qEdHJhbnNmb3Jt5Lit5b+D54K5LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmFuc2Zvcm1JbmZvUmVmLmN1cnJlbnQuY2VudGVyID0gbmV3IFZlY3RvcjIocGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLndpZHRoKSAqIDAuNSwgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLmhlaWdodCkgKiAwLjUpXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICog5re75Yqg5pON5L2c5pe255qE5Yqo55S777yM5aKe5by65L2T6aqM5rWB55WF5bqmLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmFuc1JlZi5jdXJyZW50LnN0eWxlLnRyYW5zaXRpb24gPSBUUkFOU0FDVElPTlxuICAgICAgICAgICAgY29uc3QgbWFpbk1hbmFnZXIgPSBuZXcgSGFtbWVyLk1hbmFnZXIodmlld1JlZi5jdXJyZW50KVxuICAgICAgICAgICAgbWFpbk1hbmFnZXIuYWRkKG5ldyBIYW1tZXIuUGFuKCB7IHRocmVzaG9sZDogMCwgcG9pbnRlcnM6IDIsIFxuICAgICAgICAgICAgICBlbmFibGU6IChfLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoZGF0YSYmZGF0YS5wb2ludGVycy5sZW5ndGggPjEpe1xuICAgICAgICAgICAgICAgICAgY29uc3QgeyBwb2ludGVyczogWyBwMSwgcDIgXSB9ID0gZGF0YVxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIFZlY3RvcjIuZGlzdChwMSxwMikpXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVmVjdG9yMi5kaXN0KHAxLHAyKTwyMDBcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC8vIG1haW5NYW5hZ2VyLmFkZChuZXcgSGFtbWVyLlJvdGF0ZSgpKS5yZWNvZ25pemVXaXRoKG1haW5NYW5hZ2VyLmdldCgncGFuJykpXG4gICAgICAgICAgICBtYWluTWFuYWdlci5hZGQobmV3IEhhbW1lci5QaW5jaCh7XG4gICAgICAgICAgICAgIGVuYWJsZTogKF8sIGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZihkYXRhJiZkYXRhLnBvaW50ZXJzLmxlbmd0aCA+MSl7XG4gICAgICAgICAgICAgICAgICBjb25zdCB7IHBvaW50ZXJzOiBbIHAxLCBwMiBdIH0gPSBkYXRhXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggVmVjdG9yMi5kaXN0KHAxLHAyKSlcbiAgICAgICAgICAgICAgICAgIHJldHVybiBWZWN0b3IyLmRpc3QocDEscDIpPiAyMDBcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkucmVjb2duaXplV2l0aChbbWFpbk1hbmFnZXIuZ2V0KCdwYW4nKSBdKVxuXG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RVcGRhdGUgPSAgdGhyb3R0bGUoKCkgPT4gXG4gICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYoIXRyYW5zUmVmLmN1cnJlbnQpIHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByb3RhdGUsIHNjYWxlLCB0cmFuc2xhdGU6eyB4OnRyYW5zZm9ybVgsIHk6IHRyYW5zZm9ybVl9LCBjZW50ZXIgfSA9IHRyYW5zZm9ybUluZm9SZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCAke3RyYW5zZm9ybVh9cHgsICR7dHJhbnNmb3JtWX1weCwgMCkgIHNjYWxlKCR7c2NhbGV9KSByb3RhdGUoJHtyb3RhdGV9ZGVnKWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc1JlZi5jdXJyZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAke2NlbnRlci54fXB4ICR7Y2VudGVyLnl9cHhgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmFuc2xhdGU6ICcsIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC50cmFuc2xhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2VudGVyOiAnLCB0cmFuc2Zvcm1JbmZvUmVmLmN1cnJlbnQuY2VudGVyKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pLCAxMClcblxuICAgICAgICAgICAgY29uc3Qgb25QYW5TdGFydCA9ICh7ZGVsdGFYLCBkZWx0YVkgfTogSGFtbWVySW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRyYW5zbGF0ZSB9ID0gdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50Lmdlc3RydWVTdGFydFRyYW5zbGF0ZSA9IG5ldyBWZWN0b3IyKGRlbHRhWCwgZGVsdGFZKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC5lbGVTdGFydFRhbnNsYXRlID0gdHJhbnNsYXRlO1xuICAgICAgICAgICAgICAgIGlmKHRyYW5zUmVmLmN1cnJlbnQpe1xuICAgICAgICAgICAgICAgICAgdHJhbnNSZWYuY3VycmVudC5zdHlsZS50cmFuc2l0aW9uID0gJydcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRyYW5zUmVmLmN1cnJlbnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc1JlZi5jdXJyZW50LnN0eWxlLnRyYW5zaXRpb24gPSBUUkFOU0FDVElPTlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9uUGFuID0gKHtkZWx0YVgsIGRlbHRhWSwgY2VudGVyIH06IEhhbW1lcklucHV0KSA9PntcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNjYWxlLCBnZXN0cnVlU3RhcnRUcmFuc2xhdGUsIGVsZVN0YXJ0VGFuc2xhdGUgfSA9IHRyYW5zZm9ybUluZm9SZWYuY3VycmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbFggPSBlbGVTdGFydFRhbnNsYXRlLnggKyAoZGVsdGFYIC0gZ2VzdHJ1ZVN0YXJ0VHJhbnNsYXRlLngpXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsWSA9IGVsZVN0YXJ0VGFuc2xhdGUueSArIChkZWx0YVkgLSBnZXN0cnVlU3RhcnRUcmFuc2xhdGUueSlcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2xhdGUgPSBzY2FsZSA9PTE/IFxuICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKCBnZXRUYXJnZXRWYWx1ZSh2YWxYLCAwLCAxMCApLCAgZ2V0VGFyZ2V0VmFsdWUodmFsWSwgMCwgMTApKTpcbiAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMih2YWxYLCB2YWxZKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC50cmFuc2xhdGUgPSB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXBkYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNvbnN0IG9uUm90YXRlU3RhcnQgPSBhc3luYyAoe3JvdGF0aW9uLCBjZW50ZXJ9OiBIYW1tZXJJbnB1dCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIGNvbnN0IHsgcm90YXRlLCB0cmFuc2xhdGUsIGNlbnRlcjogcHJlQ2VudGVyLCBzY2FsZSB9ID0gdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50XG4gICAgICAgICAgICAvLyAgICAgdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50LmVsZVN0YXJ0Um90YXRlID0gcm90YXRlXG4gICAgICAgICAgICAvLyAgICAgdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50Lmdlc3RydWVTdGFydFJvdGF0ZSA9IHJvdGF0aW9uXG4gICAgICAgICAgICAvLyAgICAgY29uc3QgbmV3Q2VudGVyID0gVmVjdG9yMi5zdWJ0cmFjdChjZW50ZXIsIHRyYW5zbGF0ZSlcbiAgICAgICAgICAgIC8vICAgICB0cmFuc2Zvcm1JbmZvUmVmLmN1cnJlbnQudHJhbnNsYXRlID0gZ2V0TmV3VHJhbnNsYXRlKHByZUNlbnRlciwgbmV3Q2VudGVyLCB0cmFuc2xhdGUsIHNjYWxlLCByb3RhdGUpXG4gICAgICAgICAgICAvLyAgICAgdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50LmNlbnRlciA9IG5ld0NlbnRlclxuICAgICAgICAgICAgLy8gICAgIGF3YWl0IHJlcXVlc3RVcGRhdGUoKVxuICAgICAgICAgICAgLy8gICAgIGlmKHdyYXBSZWYuY3VycmVudCl7XG4gICAgICAgICAgICAvLyAgICAgICAgIHdyYXBSZWYuY3VycmVudC5zdHlsZS50cmFuc2l0aW9uID0gJydcbiAgICAgICAgICAgIC8vICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGlmKHdyYXBSZWYuY3VycmVudCl7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgd3JhcFJlZi5jdXJyZW50LnN0eWxlLnRyYW5zaXRpb24gPSBUUkFOU0FDVElPTlxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgICAgICB9IClcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBjb25zdCBvblJvdGF0ZSA9ICh7cm90YXRpb259OiBIYW1tZXJJbnB1dCkgPT4geyBcbiAgICAgICAgICAgIC8vICAgICBjb25zdCB7IGdlc3RydWVTdGFydFJvdGF0ZSwgZWxlU3RhcnRSb3RhdGUsIHRyYW5zbGF0ZSB9ID0gIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudFxuICAgICAgICAgICAgLy8gICAgIGNvbnN0IGRlbHRhUm90YXRlaW9uID0gcm90YXRpb24gLSBnZXN0cnVlU3RhcnRSb3RhdGVcbiAgICAgICAgICAgIC8vICAgICBjb25zdCByb3RhdGVWYWwgPSBlbGVTdGFydFJvdGF0ZSArICBkZWx0YVJvdGF0ZWlvblxuICAgICAgICAgICAgLy8gICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC5yb3RhdGUgPSBnZXRUYXJnZXRWYWx1ZShyb3RhdGVWYWwsIDAsIDEwIClcbiAgICAgICAgICAgIC8vICAgICByZXF1ZXN0VXBkYXRlKClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9uUGluY2hTdGFydCA9IGFzeW5jICh7IHNjYWxlLCBjZW50ZXIgfTogSGFtbWVySW5wdXQpID0+e1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdHJhbnNsYXRlLCBzY2FsZTogc2xTY2FsZSwgY2VudGVyOnByZUNlbnRlciwgcm90YXRlIH0gPSB0cmFuc2Zvcm1JbmZvUmVmLmN1cnJlbnRcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1JbmZvUmVmLmN1cnJlbnQuZ2VzdHJ1ZVN0YXJ0c2NhbGUgPSBzY2FsZVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC5lbGVTdGFydFNjYWxlID0gc2xTY2FsZVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NlbnRlciA9IFZlY3RvcjIuc3VidHJhY3QoY2VudGVyLCB0cmFuc2xhdGUpXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtSW5mb1JlZi5jdXJyZW50LnRyYW5zbGF0ZSA9IGdldE5ld1RyYW5zbGF0ZShwcmVDZW50ZXIsIG5ld0NlbnRlciwgdHJhbnNsYXRlLCBzY2FsZSwgcm90YXRlKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC5jZW50ZXIgPSBuZXdDZW50ZXJcbiAgICAgICAgICAgICAgICBhd2FpdCByZXF1ZXN0VXBkYXRlKClcbiAgICAgICAgICAgICAgICBpZih0cmFuc1JlZi5jdXJyZW50KXtcbiAgICAgICAgICAgICAgICAgIHRyYW5zUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNpdGlvbiA9ICcnXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0cmFuc1JlZi5jdXJyZW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNSZWYuY3VycmVudC5zdHlsZS50cmFuc2l0aW9uID0gVFJBTlNBQ1RJT05cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvblBpbmNoaW5Nb3ZlID0gKHsgc2NhbGUsIGNlbnRlciB9OiBIYW1tZXJJbnB1dCkgPT4geyBcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVsZVN0YXJ0U2NhbGUsIGdlc3RydWVTdGFydHNjYWxlLCB0cmFuc2xhdGUgfSA9IHRyYW5zZm9ybUluZm9SZWYuY3VycmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhU2NhbGUgPSBzY2FsZSAtIGdlc3RydWVTdGFydHNjYWxlXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVWYWwgPSBnZXRWYWx1ZUZyb21SYW5nZShlbGVTdGFydFNjYWxlICsgZGVsdGFTY2FsZSwgbWluU2NhbGUsIG1heFNjYWxlKVxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUluZm9SZWYuY3VycmVudC5zY2FsZSA9IGdldFRhcmdldFZhbHVlKHNjYWxlVmFsLCAxLCAwLjIpXG4gICAgICAgICAgICAgICAgcmVxdWVzdFVwZGF0ZSgpXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFpbk1hbmFnZXIub24oJ3BhbnN0YXJ0Jywgb25QYW5TdGFydClcbiAgICAgICAgICAgIG1haW5NYW5hZ2VyLm9uKCdwYW5tb3ZlJywgb25QYW4pXG5cblxuICAgICAgICAgICAgLy8gbWFpbk1hbmFnZXIub24oJ3JvdGF0ZXN0YXJ0Jywgb25Sb3RhdGVTdGFydClcbiAgICAgICAgICAgIC8vIG1haW5NYW5hZ2VyLm9uKCdyb3RhdGUnLCBvblJvdGF0ZSlcblxuICAgICAgICAgICAgbWFpbk1hbmFnZXIub24oJ3BpbmNoc3RhcnQnLCBvblBpbmNoU3RhcnQpXG4gICAgICAgICAgICBtYWluTWFuYWdlci5vbigncGluY2htb3ZlJywgb25QaW5jaGluTW92ZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVxdWVzdFVwZGF0ZSgpXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG1haW5NYW5hZ2VyLm9mZigncGFuc3RhcnQnLCBvblBhblN0YXJ0KVxuICAgICAgICAgICAgICAgIG1haW5NYW5hZ2VyLm9mZigncGFubW92ZScsIG9uUGFuKVxuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgIC8vIG1haW5NYW5hZ2VyLm9mZigncm90YXRlc3RhcnQnLCBvblJvdGF0ZVN0YXJ0KVxuICAgICAgICAgICAgICAgIC8vIG1haW5NYW5hZ2VyLm9mZigncm90YXRlJywgb25Sb3RhdGUpXG4gICAgXG4gICAgICAgICAgICAgICAgbWFpbk1hbmFnZXIub2ZmKCdwaW5jaHN0YXJ0Jywgb25QaW5jaFN0YXJ0KVxuICAgICAgICAgICAgICAgIG1haW5NYW5hZ2VyLm9mZigncGluY2htb3ZlJywgb25QaW5jaGluTW92ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFsuLi5PYmplY3QudmFsdWVzKHVzZXJUcmFuc2Zvcm1Qcm9wc3x8e30pXSlcblxufSIsImltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9zdHlsZS5sZXNzJ1xuaW1wb3J0IHsgV29ya0RldGFpbCB9IGZyb20gJy4uLy4uLy4uL3dvcmtTdG9yYWdlJ1xuaW1wb3J0IHVzZVRyYW5zZm9ybSBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VUcmFuc2Zvcm0nXG5pbXBvcnQgeyBQQ2FudmFzQ29udHJvbGxlciwgV3JhcEluZm8sIENhbnZhc0V2ZW50RGF0YSwgQ2FudmFzRXZlbnQgfSBmcm9tICcuL3BjbnZhcy5jb250cm9sbGVyJ1xuaW1wb3J0IHsgU3BpbiB9IGZyb20gJ2FudGQnXG4gXG5cbiBpbnRlcmZhY2UgUENhbnZhc1Byb3BzIHtcblxuICAgIGluaXRWYWx1ZT86IFdvcmtEZXRhaWwsXG5cbiAgICBwQ2FudmFzQ29udHJvbGxlcj86IFBDYW52YXNDb250cm9sbGVyXG5cbiAgICBsb2FkaW5nOiBib29sZWFuXG5cbn1cblxuIGNvbnN0IHVzZVBDYW52YXMgPSAoKSA9PiB7XG4gIGNvbnN0IHtjdXJyZW50OiBwQ2FudmFzfSA9IHVzZVJlZihuZXcgUENhbnZhc0NvbnRyb2xsZXIoKSlcbiAgcmV0dXJuIHtcbiAgICBwQ2FudmFzXG4gIH1cbn1cblxuLyoqXG4gKiDmiYvnu5jnvJbovpHlmajnmoTnlLvmnb8uXG4gKi9cbiBjb25zdCBQQ2FudmFzID0gKHsgaW5pdFZhbHVlLCBwQ2FudmFzQ29udHJvbGxlciwgbG9hZGluZyB9OiBQQ2FudmFzUHJvcHMpID0+e1xuICAgXG4gIGNvbnN0IGNvdmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuXG4gIGNvbnN0IHdyYXBSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgY29uc3Qgdmlld1JlZiA9IHVzZVJlZjxIVE1MRWxlbWVudD4obnVsbClcblxuICBjb25zdCBbIG1pblNjYWxlLCBzZXRNaW5TY2FsZSBdID0gdXNlU3RhdGUoMC4xKVxuXG5cbiAgdXNlVHJhbnNmb3JtKHsgbWluU2NhbGUsIG1heFNjYWxlOiAxLCB2aWV3UmVmLCB0cmFuc1JlZjogd3JhcFJlZiwgc2NhbGVSZWY6IHdyYXBSZWYgfSlcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYoIWluaXRWYWx1ZSApIHJldHVyblxuICAgIGlmKHBDYW52YXNDb250cm9sbGVyJiYgd3JhcFJlZi5jdXJyZW50JiZjb3ZlclJlZi5jdXJyZW50KXtcbiAgICAgICAgY29uc3Qgd3JhcEluZm86IFdyYXBJbmZvID0ge1xuICAgICAgICAgIHdyYXA6IHdyYXBSZWYuY3VycmVudCxcbiAgICAgICAgICBjb3ZlcjogY292ZXJSZWYuY3VycmVudCxcbiAgICAgICAgfVxuICAgICAgIHBDYW52YXNDb250cm9sbGVyLmluaXQod3JhcEluZm8sIGluaXRWYWx1ZSlcbiAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgIH1cbiAgICB9XG4gIH0sIFtpbml0VmFsdWVdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYoIWluaXRWYWx1ZSApIHJldHVyblxuICAgIGNvbnN0IGNvdmVyID0gY292ZXJSZWYuY3VycmVudFxuICAgIGlmKGNvdmVyKXtcblxuICAgICAgY29uc3Qgb25Qb2ludGVyRG93biA9IChwb2ludEV2ZW50OiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgICAgaWYocENhbnZhc0NvbnRyb2xsZXIpe1xuICAgICAgICAgIHBDYW52YXNDb250cm9sbGVyLm9uUG9pbnRlckRvd24ocG9pbnRFdmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgb25Qb2ludGVyTW92ZSA9IChwb2ludEV2ZW50OiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgICAgaWYocENhbnZhc0NvbnRyb2xsZXIpe1xuICAgICAgICAgIHBDYW52YXNDb250cm9sbGVyLm9uUG9pbnRlck1vdmUocG9pbnRFdmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgb25Qb2ludGVyVXAgPSAocG9pbnRFdmVudDogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGlmKHBDYW52YXNDb250cm9sbGVyKXtcbiAgICAgICAgICBwQ2FudmFzQ29udHJvbGxlci5vblBvaW50ZXJVcChwb2ludEV2ZW50KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb3Zlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24sIHtwYXNzaXZlOiBmYWxzZX0pXG4gICAgICBjb3Zlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUsIHtwYXNzaXZlOiBmYWxzZX0pXG4gICAgICBjb3Zlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvblBvaW50ZXJVcCwge3Bhc3NpdmU6IGZhbHNlfSlcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY292ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBvblBvaW50ZXJEb3duKVxuICAgICAgICBjb3Zlci5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUpXG4gICAgICAgIGNvdmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgfSwgW2NvdmVyUmVmLmN1cnJlbnQsIGluaXRWYWx1ZV0pXG5cbiAgXG4gICAgcmV0dXJuIDxtYWluIFxuICAgICAgICByZWY9e3ZpZXdSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnBDYW52YXN9XG5cbiAgICA+XG4gICAgICA8c2VjdGlvblxuICAgICAgICByZWY9e3dyYXBSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLmNhbnZhc1dyYXB9XG4gICAgICA+XG4gICAgICAgIDxkaXYgcmVmPXtjb3ZlclJlZn0gY2xhc3NOYW1lPXtzdHlsZXMuY292ZXJ9PjwvZGl2PlxuICAgICAgPC9zZWN0aW9uPlxuICAgICAgeyBsb2FkaW5nJiZcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5tYXNrfSBvbk1vdXNlTW92ZT17ICh7bmF0aXZlRXZlbnR9KSA9PiBuYXRpdmVFdmVudC5zdG9wUHJvcGFnYXRpb24oKSAgfT5cbiAgICAgICAgICA8U3Bpbi8+IFxuICAgICAgICA8L2Rpdj5cbiAgICAgIH1cbiAgICA8L21haW4+XG59XG5cbmV4cG9ydCB7XG4gIFBDYW52YXMsXG4gIFBDYW52YXNDb250cm9sbGVyLFxuICB1c2VQQ2FudmFzLFxuICBDYW52YXNFdmVudERhdGEsXG4gIENhbnZhc0V2ZW50LFxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n')},21:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RGBA", function() { return RGBA; });\nclass RGBA {\n  static Lerp(from, to, number) {\n    const result = [];\n    const dtR = (to.r - from.r) / number;\n    const dtG = (to.g - from.g) / number;\n    const dtB = (to.b - from.b) / number;\n    const dtA = (to.a - from.a) / number;\n\n    for (let i = 0; i < number; i++) {\n      result.push(new RGBA(from.r + dtR * i, from.g + dtG * i, from.b + dtB * i, from.a + dtA * i));\n    }\n\n    return result;\n  }\n\n  static mutipy({\n    r,\n    g,\n    b\n  }, percent) {\n    return new RGBA(r * percent, g * percent, b * percent);\n  }\n\n  static add({\n    r,\n    g,\n    b\n  }, B) {\n    return new RGBA(r + B.r, g + B.g, b + B.b);\n  }\n  /**\n   * 将a倾向b颜色，percent表示程度，当为1时，则为颜色.\n   * @param a \n   * @param b \n   * @param percent \n   */\n\n\n  static mix(a, b, percent) {\n    return new RGBA(a.r + (b.r - a.r) * percent, a.g + (b.g - a.g) * percent, a.b + (b.b - a.b) * percent);\n  }\n\n  static getLerpColor(from, to, percent) {\n    const {\n      r,\n      g,\n      b,\n      a\n    } = from;\n    return new RGBA((to.r - r) * percent + r, (to.g - g) * percent + g, (to.b - b) * percent + b, (to.a - a) * percent + a);\n  }\n\n  constructor(r, g, b, a = 1) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n  }\n\n  toRGBAString() {\n    return `rgba(${this.r},${this.g},${this.b},${this.a})`;\n  }\n\n}\nRGBA.BLACK = new RGBA(0, 0, 0);\nRGBA.WHITE = new RGBA(255, 255, 255);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9jb2xvci1zZWxlY3Rvci9yZ2JhLnRzP2RjNzgiXSwibmFtZXMiOlsiUkdCQSIsIkxlcnAiLCJmcm9tIiwidG8iLCJudW1iZXIiLCJyZXN1bHQiLCJkdFIiLCJyIiwiZHRHIiwiZyIsImR0QiIsImIiLCJkdEEiLCJhIiwiaSIsInB1c2giLCJtdXRpcHkiLCJwZXJjZW50IiwiYWRkIiwiQiIsIm1peCIsImdldExlcnBDb2xvciIsImNvbnN0cnVjdG9yIiwidG9SR0JBU3RyaW5nIiwiQkxBQ0siLCJXSElURSJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFPLE1BQU1BLElBQU4sQ0FBVztBQUVqQixTQUFPQyxJQUFQLENBQVlDLElBQVosRUFBd0JDLEVBQXhCLEVBQWtDQyxNQUFsQyxFQUFpRDtBQUNoRCxVQUFNQyxNQUFhLEdBQUcsRUFBdEI7QUFDQSxVQUFNQyxHQUFHLEdBQUcsQ0FBQ0gsRUFBRSxDQUFDSSxDQUFILEdBQUtMLElBQUksQ0FBQ0ssQ0FBWCxJQUFjSCxNQUExQjtBQUNBLFVBQU1JLEdBQUcsR0FBRyxDQUFDTCxFQUFFLENBQUNNLENBQUgsR0FBS1AsSUFBSSxDQUFDTyxDQUFYLElBQWNMLE1BQTFCO0FBQ0EsVUFBTU0sR0FBRyxHQUFHLENBQUNQLEVBQUUsQ0FBQ1EsQ0FBSCxHQUFLVCxJQUFJLENBQUNTLENBQVgsSUFBY1AsTUFBMUI7QUFDQSxVQUFNUSxHQUFHLEdBQUcsQ0FBQ1QsRUFBRSxDQUFDVSxDQUFILEdBQUtYLElBQUksQ0FBQ1csQ0FBWCxJQUFjVCxNQUExQjs7QUFDQSxTQUFJLElBQUlVLENBQUMsR0FBRSxDQUFYLEVBQWNBLENBQUMsR0FBRVYsTUFBakIsRUFBeUJVLENBQUMsRUFBMUIsRUFBNkI7QUFDNUJULFlBQU0sQ0FBQ1UsSUFBUCxDQUFZLElBQUlmLElBQUosQ0FDWEUsSUFBSSxDQUFDSyxDQUFMLEdBQVNELEdBQUcsR0FBRVEsQ0FESCxFQUVYWixJQUFJLENBQUNPLENBQUwsR0FBU0QsR0FBRyxHQUFFTSxDQUZILEVBR1haLElBQUksQ0FBQ1MsQ0FBTCxHQUFTRCxHQUFHLEdBQUVJLENBSEgsRUFJWFosSUFBSSxDQUFDVyxDQUFMLEdBQVNELEdBQUcsR0FBRUUsQ0FKSCxDQUFaO0FBTUE7O0FBQ0QsV0FBT1QsTUFBUDtBQUNBOztBQUVELFNBQU9XLE1BQVAsQ0FBYztBQUFDVCxLQUFEO0FBQUdFLEtBQUg7QUFBS0U7QUFBTCxHQUFkLEVBQTRCTSxPQUE1QixFQUE0QztBQUMzQyxXQUFPLElBQUlqQixJQUFKLENBQVNPLENBQUMsR0FBQ1UsT0FBWCxFQUFvQlIsQ0FBQyxHQUFHUSxPQUF4QixFQUFpQ04sQ0FBQyxHQUFFTSxPQUFwQyxDQUFQO0FBQ0E7O0FBRUQsU0FBT0MsR0FBUCxDQUFXO0FBQUNYLEtBQUQ7QUFBR0UsS0FBSDtBQUFLRTtBQUFMLEdBQVgsRUFBMEJRLENBQTFCLEVBQWtDO0FBQ2pDLFdBQU8sSUFBSW5CLElBQUosQ0FBU08sQ0FBQyxHQUFDWSxDQUFDLENBQUNaLENBQWIsRUFBZ0JFLENBQUMsR0FBQ1UsQ0FBQyxDQUFDVixDQUFwQixFQUF1QkUsQ0FBQyxHQUFDUSxDQUFDLENBQUNSLENBQTNCLENBQVA7QUFDQTtBQUVEOzs7Ozs7OztBQU1BLFNBQU9TLEdBQVAsQ0FBV1AsQ0FBWCxFQUFrQkYsQ0FBbEIsRUFBMEJNLE9BQTFCLEVBQTBDO0FBQ3pDLFdBQU8sSUFBSWpCLElBQUosQ0FDTmEsQ0FBQyxDQUFDTixDQUFGLEdBQU0sQ0FBQ0ksQ0FBQyxDQUFDSixDQUFGLEdBQUlNLENBQUMsQ0FBQ04sQ0FBUCxJQUFZVSxPQURaLEVBRU5KLENBQUMsQ0FBQ0osQ0FBRixHQUFNLENBQUNFLENBQUMsQ0FBQ0YsQ0FBRixHQUFJSSxDQUFDLENBQUNKLENBQVAsSUFBWVEsT0FGWixFQUdOSixDQUFDLENBQUNGLENBQUYsR0FBTSxDQUFDQSxDQUFDLENBQUNBLENBQUYsR0FBSUUsQ0FBQyxDQUFDRixDQUFQLElBQVlNLE9BSFosQ0FBUDtBQUtBOztBQUVELFNBQU9JLFlBQVAsQ0FBb0JuQixJQUFwQixFQUFnQ0MsRUFBaEMsRUFBeUNjLE9BQXpDLEVBQXlEO0FBQ3hELFVBQU07QUFBQ1YsT0FBRDtBQUFHRSxPQUFIO0FBQUtFLE9BQUw7QUFBT0U7QUFBUCxRQUFZWCxJQUFsQjtBQUNBLFdBQU8sSUFBSUYsSUFBSixDQUNOLENBQUNHLEVBQUUsQ0FBQ0ksQ0FBSCxHQUFNQSxDQUFQLElBQVVVLE9BQVYsR0FBb0JWLENBRGQsRUFFTixDQUFDSixFQUFFLENBQUNNLENBQUgsR0FBTUEsQ0FBUCxJQUFVUSxPQUFWLEdBQW9CUixDQUZkLEVBR04sQ0FBQ04sRUFBRSxDQUFDUSxDQUFILEdBQU1BLENBQVAsSUFBVU0sT0FBVixHQUFvQk4sQ0FIZCxFQUlOLENBQUNSLEVBQUUsQ0FBQ1UsQ0FBSCxHQUFNQSxDQUFQLElBQVVJLE9BQVYsR0FBb0JKLENBSmQsQ0FBUDtBQU1BOztBQUtBUyxhQUFXLENBQ09mLENBRFAsRUFFT0UsQ0FGUCxFQUdPRSxDQUhQLEVBSU9FLENBQVMsR0FBRyxDQUpuQixFQUtWO0FBQUEsU0FKaUJOLENBSWpCLEdBSmlCQSxDQUlqQjtBQUFBLFNBSGlCRSxDQUdqQixHQUhpQkEsQ0FHakI7QUFBQSxTQUZpQkUsQ0FFakIsR0FGaUJBLENBRWpCO0FBQUEsU0FEaUJFLENBQ2pCLEdBRGlCQSxDQUNqQjtBQUFFOztBQUVIVSxjQUFZLEdBQUU7QUFDYixXQUFRLFFBQU8sS0FBS2hCLENBQUUsSUFBRyxLQUFLRSxDQUFFLElBQUcsS0FBS0UsQ0FBRSxJQUFHLEtBQUtFLENBQUUsR0FBcEQ7QUFDQTs7QUEvRGU7QUFBTGIsSSxDQW1ES3dCLEssR0FBUSxJQUFJeEIsSUFBSixDQUFTLENBQVQsRUFBVyxDQUFYLEVBQWEsQ0FBYixDO0FBbkRiQSxJLENBcURLeUIsSyxHQUFRLElBQUl6QixJQUFKLENBQVMsR0FBVCxFQUFhLEdBQWIsRUFBaUIsR0FBakIsQyIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGNsYXNzIFJHQkEge1xuXG5cdHN0YXRpYyBMZXJwKGZyb206IFJHQkEsIHRvOiBSR0JBLCBudW1iZXI6IG51bWJlcil7XG5cdFx0Y29uc3QgcmVzdWx0OlJHQkFbXSA9IFtdXG5cdFx0Y29uc3QgZHRSID0gKHRvLnItZnJvbS5yKS9udW1iZXJcblx0XHRjb25zdCBkdEcgPSAodG8uZy1mcm9tLmcpL251bWJlclxuXHRcdGNvbnN0IGR0QiA9ICh0by5iLWZyb20uYikvbnVtYmVyXG5cdFx0Y29uc3QgZHRBID0gKHRvLmEtZnJvbS5hKS9udW1iZXJcblx0XHRmb3IobGV0IGkgPTA7IGk8IG51bWJlcjsgaSsrKXtcblx0XHRcdHJlc3VsdC5wdXNoKG5ldyBSR0JBKFxuXHRcdFx0XHRmcm9tLnIgKyBkdFIgKmksXG5cdFx0XHRcdGZyb20uZyArIGR0RyAqaSxcblx0XHRcdFx0ZnJvbS5iICsgZHRCICppLFxuXHRcdFx0XHRmcm9tLmEgKyBkdEEgKmksXG5cdFx0XHQpKVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0XG5cdH1cblxuXHRzdGF0aWMgbXV0aXB5KHtyLGcsYn06UkdCQSwgcGVyY2VudDogbnVtYmVyKXtcblx0XHRyZXR1cm4gbmV3IFJHQkEocipwZXJjZW50LCBnICogcGVyY2VudCwgYiAqcGVyY2VudClcblx0fVxuXG5cdHN0YXRpYyBhZGQoe3IsZyxifTogUkdCQSwgQjogUkdCQSl7XG5cdFx0cmV0dXJuIG5ldyBSR0JBKHIrQi5yLCBnK0IuZywgYitCLmIgKVxuXHR9XG5cblx0LyoqXG5cdCAqIOWwhmHlgL7lkJFi6aKc6Imy77yMcGVyY2VudOihqOekuueoi+W6pu+8jOW9k+S4ujHml7bvvIzliJnkuLrpopzoibIuXG5cdCAqIEBwYXJhbSBhIFxuXHQgKiBAcGFyYW0gYiBcblx0ICogQHBhcmFtIHBlcmNlbnQgXG5cdCAqL1xuXHRzdGF0aWMgbWl4KGE6UkdCQSxiOlJHQkEsIHBlcmNlbnQ6IG51bWJlcil7XG5cdFx0cmV0dXJuIG5ldyBSR0JBKFxuXHRcdFx0YS5yICsgKGIuci1hLnIpICogcGVyY2VudCxcblx0XHRcdGEuZyArIChiLmctYS5nKSAqIHBlcmNlbnQsXG5cdFx0XHRhLmIgKyAoYi5iLWEuYikgKiBwZXJjZW50XG5cdFx0KVxuXHR9XG5cblx0c3RhdGljIGdldExlcnBDb2xvcihmcm9tOiBSR0JBLCB0bzpSR0JBLCBwZXJjZW50OiBudW1iZXIpe1xuXHRcdGNvbnN0IHtyLGcsYixhfSA9IGZyb21cblx0XHRyZXR1cm4gbmV3IFJHQkEoXG5cdFx0XHQodG8uciAtcikqcGVyY2VudCArIHIsXG5cdFx0XHQodG8uZyAtZykqcGVyY2VudCArIGcsXG5cdFx0XHQodG8uYiAtYikqcGVyY2VudCArIGIsXG5cdFx0XHQodG8uYSAtYSkqcGVyY2VudCArIGEsXG5cdFx0KVxuXHR9XG5cbiAgc3RhdGljIHJlYWRvbmx5IEJMQUNLID0gbmV3IFJHQkEoMCwwLDApXG4gIFxuICBzdGF0aWMgcmVhZG9ubHkgV0hJVEUgPSBuZXcgUkdCQSgyNTUsMjU1LDI1NSlcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHI6IG51bWJlcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgZzogbnVtYmVyLFxuICAgIHB1YmxpYyByZWFkb25seSBiOiBudW1iZXIsXG4gICAgcHVibGljIHJlYWRvbmx5IGE6IG51bWJlciA9IDEsXG4gICl7fVxuXG4gIHRvUkdCQVN0cmluZygpe1xuICBcdHJldHVybiBgcmdiYSgke3RoaXMucn0sJHt0aGlzLmd9LCR7dGhpcy5ifSwke3RoaXMuYX0pYFxuICB9XG5cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n')},22:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrushStatus", function() { return BrushStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrushType", function() { return BrushType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbstractBrush", function() { return AbstractBrush; });\nclass BrushStatus {\n  constructor(x, y, pressure, tiltX, tiltY) {\n    this.x = x;\n    this.y = y;\n    this.pressure = pressure;\n    this.tiltX = tiltX;\n    this.tiltY = tiltY;\n  }\n\n}\nlet BrushType;\n\n(function (BrushType) {\n  BrushType[BrushType["pen"] = 1] = "pen";\n  BrushType[BrushType["selector"] = 2] = "selector";\n})(BrushType || (BrushType = {}));\n\nclass AbstractBrush {\n  constructor(type, name) {\n    this.type = type;\n    this.name = name;\n  }\n\n  init() {}\n\n  destory() {}\n\n  onStart(status, context) {}\n\n  onDraw(brushStatus, contx) {}\n\n  onEnd(brushStatus, contx) {}\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaC90eXBlcy50cz9lMTdhIl0sIm5hbWVzIjpbIkJydXNoU3RhdHVzIiwiY29uc3RydWN0b3IiLCJ4IiwieSIsInByZXNzdXJlIiwidGlsdFgiLCJ0aWx0WSIsIkJydXNoVHlwZSIsIkFic3RyYWN0QnJ1c2giLCJ0eXBlIiwibmFtZSIsImluaXQiLCJkZXN0b3J5Iiwib25TdGFydCIsInN0YXR1cyIsImNvbnRleHQiLCJvbkRyYXciLCJicnVzaFN0YXR1cyIsImNvbnR4Iiwib25FbmQiXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQU8sTUFBTUEsV0FBTixDQUFrQjtBQUN2QkMsYUFBVyxDQUVTQyxDQUZULEVBSVNDLENBSlQsRUFNU0MsUUFOVCxFQVFTQyxLQVJULEVBVVNDLEtBVlQsRUFXVDtBQUFBLFNBVGtCSixDQVNsQixHQVRrQkEsQ0FTbEI7QUFBQSxTQVBrQkMsQ0FPbEIsR0FQa0JBLENBT2xCO0FBQUEsU0FMa0JDLFFBS2xCLEdBTGtCQSxRQUtsQjtBQUFBLFNBSGtCQyxLQUdsQixHQUhrQkEsS0FHbEI7QUFBQSxTQURrQkMsS0FDbEIsR0FEa0JBLEtBQ2xCO0FBQUc7O0FBWmtCO0FBZ0JsQixJQUFLQyxTQUFaOztXQUFZQSxTO0FBQUFBLFcsQ0FBQUEsUztBQUFBQSxXLENBQUFBLFM7R0FBQUEsUyxLQUFBQSxTOztBQU9MLE1BQWVDLGFBQWYsQ0FBNkI7QUFDbENQLGFBQVcsQ0FDT1EsSUFEUCxFQUVPQyxJQUZQLEVBR1Q7QUFBQSxTQUZnQkQsSUFFaEIsR0FGZ0JBLElBRWhCO0FBQUEsU0FEZ0JDLElBQ2hCLEdBRGdCQSxJQUNoQjtBQUFFOztBQUVKQyxNQUFJLEdBQVMsQ0FBRTs7QUFFZkMsU0FBTyxHQUFTLENBQUU7O0FBRWxCQyxTQUFPLENBQUNDLE1BQUQsRUFBc0JDLE9BQXRCLEVBQXFELENBQUU7O0FBRTlEQyxRQUFNLENBQUNDLFdBQUQsRUFBNkJDLEtBQTdCLEVBQXlELENBQUU7O0FBRWpFQyxPQUFLLENBQUNGLFdBQUQsRUFBMkJDLEtBQTNCLEVBQXdELENBQUU7O0FBZDdCIiwiZmlsZSI6IjIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUENhbnZhc0NvbnRleHQgfSBmcm9tIFwiQC9wYWdlcy9wYWludC9wY2FudmFzL3BjYW52YXMuY29udGV4dFwiXG5cbmV4cG9ydCBjbGFzcyBCcnVzaFN0YXR1cyB7XG4gIGNvbnN0cnVjdG9yKFxuXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgeDogbnVtYmVyLFxuXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgeTogbnVtYmVyLFxuXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgcHJlc3N1cmU6IG51bWJlcixcblxuICAgICAgcHVibGljIHJlYWRvbmx5IHRpbHRYOiBudW1iZXIsXG5cbiAgICAgIHB1YmxpYyByZWFkb25seSB0aWx0WTogbnVtYmVyLFxuICApIHsgfVxuXG59XG5cbmV4cG9ydCBlbnVtIEJydXNoVHlwZSB7XG5cbiAgcGVuID0gMSxcblxuICBzZWxlY3RvciA9IDIsXG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEJydXNoIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHR5cGU6IEJydXNoVHlwZSwgXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICApIHt9XG5cbiAgaW5pdCgpOiB2b2lkIHt9XG5cbiAgZGVzdG9yeSgpOiB2b2lkIHt9XG5cbiAgb25TdGFydChzdGF0dXM6IEJydXNoU3RhdHVzLCBjb250ZXh0OiBQQ2FudmFzQ29udGV4dCk6IHZvaWQge31cblxuICBvbkRyYXcoYnJ1c2hTdGF0dXM6IEJydXNoU3RhdHVzW10sIGNvbnR4OiBQQ2FudmFzQ29udGV4dCk6IHZvaWR7fVxuXG4gIG9uRW5kKGJydXNoU3RhdHVzOiBCcnVzaFN0YXR1cywgY29udHg6IFBDYW52YXNDb250ZXh0KTogdm9pZCB7fVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n')},25:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"CanvasEvent\", function() { return /* binding */ CanvasEvent; });\n__webpack_require__.d(__webpack_exports__, \"PCanvasController\", function() { return /* binding */ pcnvas_controller_PCanvasController; });\n\n// EXTERNAL MODULE: ./src/pages/paint/top-tool-bar/tool-item/color-selector/rgba.ts\nvar rgba = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./src/pages/paint/pcanvas/pcanvas.context.ts\nvar pcanvas_context = __webpack_require__(26);\n\n// EXTERNAL MODULE: ./src/workStorage/index.ts + 1 modules\nvar workStorage = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./src/pages/paint/pcanvas/pcanvas.layer.ts\nvar pcanvas_layer = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/events/events.js\nvar events = __webpack_require__(76);\n\n// CONCATENATED MODULE: ./src/util/event.ts\n\nclass event_PEventEmiter {\n  constructor() {\n    this.eventEmitter = new events[\"EventEmitter\"]();\n  }\n\n  on(event, listener) {\n    const fun = listener;\n    this.eventEmitter.addListener(event, fun);\n  }\n\n  off(event, listener) {\n    const fun = listener;\n    this.eventEmitter.removeListener(event, fun);\n  }\n\n  emit(event, params) {\n    setTimeout(() => {\n      this.eventEmitter.emit(event, params);\n    }, 1);\n  }\n\n}\n// EXTERNAL MODULE: ./src/util/canvas.ts\nvar util_canvas = __webpack_require__(47);\n\n// EXTERNAL MODULE: ./src/pages/paint/top-tool-bar/tool-item/brush/types.ts\nvar types = __webpack_require__(22);\n\n// CONCATENATED MODULE: ./src/pages/paint/pcanvas/pcnvas.controller.ts\n\n\n\n\n\n\n\nclass CanvasEvent {\n  constructor(data, tag = 'user') {\n    this.data = data;\n    this.tag = tag;\n  }\n\n}\n\nconst pointEvent2BrunshStatus = ({\n  offsetX: x,\n  offsetY: y,\n  tiltX,\n  tiltY,\n  pressure\n}) => {\n  // console.log('pressure...', pressure)\n  pressure = pressure > 1 ? pressure * 0.01 : pressure === 0 ? 1 : pressure;\n  return new types[\"BrushStatus\"](x, y, pressure, tiltX, tiltY);\n};\n\n/**\n * 用于控制PCanvascontroller component 的对象.\n * \n * // TODO\n * 对的操作放入组件中.\n */\nclass pcnvas_controller_PCanvasController extends event_PEventEmiter {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.layerManager = void 0;\n    this.color = rgba[\"RGBA\"].BLACK;\n    this.pointerIds = {};\n    this.workId = void 0;\n\n    this.onBrushEnd = () => {\n      const curLayerDetail = this.layerManager.getFocusDetail();\n      const preContent = Object(util_canvas[\"a\" /* copyCanvas */])(curLayerDetail.canvas);\n      this.layerManager.applyTempCanvas();\n      const index = this.layerManager.layers.indexOf(curLayerDetail);\n      this.emit('contentChange', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: curLayerDetail,\n        preContent,\n        index\n      }));\n    };\n  }\n\n  async init({\n    wrap,\n    cover\n  }, workDetail) {\n    const {\n      width,\n      height,\n      workId\n    } = workDetail.workInfo;\n    wrap.style.width = `${width}px`;\n    wrap.style.height = `${height}px`;\n    this.workId = workId;\n    this.layerManager = new pcanvas_layer[\"PcanvasLayers\"]({\n      cover,\n      wrap,\n      width,\n      height\n    });\n    this.layerManager.init(workDetail.layers);\n    this.context = new pcanvas_context[\"PCanvasContext\"](this.layerManager.getCanvas(), this.layerManager.getContext(), width, height, this.onBrushEnd);\n    this.emit('init', new CanvasEvent(null));\n    this.emit('focusLayer', new CanvasEvent({\n      layerDetail: this.layerManager.getFocusDetail()\n    })); // logCanvasData('init: ', this.layerManager.layers[0].canvas)\n  }\n\n  setColor({\n    r,\n    g,\n    b\n  }) {\n    const color = new rgba[\"RGBA\"](r, g, b, this.color.a);\n    this.setRGBA(color);\n  }\n\n  setRGBA(color) {\n    this.context.color = color.toRGBAString();\n    this.color = color;\n    this.emit('colorchange', new CanvasEvent({\n      color\n    }));\n  }\n\n  setOpacity(opacity) {\n    const {\n      r,\n      g,\n      b\n    } = this.color;\n    const color = new rgba[\"RGBA\"](r, g, b, opacity);\n    this.setRGBA(color);\n  }\n\n  async getLayers() {\n    return [...this.layerManager.layers];\n  }\n\n  addLayer() {\n    const layerDetail = this.layerManager.addLayer(workStorage[\"a\" /* LayerDetail */].create(this.layerManager.wrapInfo));\n    this.layerManager.focusLayer(layerDetail);\n    const index = this.layerManager.layers.indexOf(layerDetail);\n    this.emit('addLayer', new CanvasEvent({\n      workId: this.workId,\n      layerDetail,\n      index\n    }));\n    this.emit('focusLayer', new CanvasEvent({\n      layerDetail\n    }));\n  }\n\n  addLayerContent(index, canvas, creator = 'user') {\n    const {\n      width,\n      height\n    } = canvas;\n    const layerDetail = workStorage[\"a\" /* LayerDetail */].create({\n      width,\n      height\n    });\n    const ctx = layerDetail.canvas.getContext('2d');\n    ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(canvas, 0, 0, width, height);\n    this.layerManager.addLayer(layerDetail, index);\n    this.emit('addLayer', new CanvasEvent({\n      workId: this.workId,\n      layerDetail,\n      index\n    }, creator));\n    return layerDetail;\n  }\n\n  setLayerContent(index, canvas, creator = 'user') {\n    const layerDetail = this.layerManager.layers[index];\n    const oldCanvas = layerDetail.canvas;\n    const {\n      width,\n      height\n    } = oldCanvas;\n    const preContent = Object(util_canvas[\"a\" /* copyCanvas */])(layerDetail.canvas);\n    const ctx = layerDetail.canvas.getContext('2d');\n    ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, width, height);\n    ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(canvas, 0, 0, width, height);\n    this.emit('contentChange', new CanvasEvent({\n      workId: this.workId,\n      layerDetail,\n      index,\n      preContent\n    }, creator));\n    return layerDetail;\n  }\n\n  focusLayer(layerDetail) {\n    this.layerManager.focusLayer(layerDetail);\n    this.emit('focusLayer', new CanvasEvent({\n      layerDetail\n    }));\n  }\n\n  removeLayer(layerDetail, creator = 'user') {\n    const {\n      index,\n      isFocus\n    } = this.layerManager.removeLayer(layerDetail);\n    this.emit('removeLayer', new CanvasEvent({\n      workId: this.workId,\n      layerDetail,\n      index\n    }, creator));\n\n    if (isFocus) {\n      const layerDetail = this.layerManager.layers[0];\n      this.focusLayer(layerDetail);\n      this.emit('focusLayer', new CanvasEvent({\n        layerDetail\n      }, creator));\n    }\n  }\n\n  removeLayerByIndex(index, creator = 'user') {\n    const layerDetail = this.layerManager.layers[index];\n    this.removeLayer(layerDetail, creator);\n  }\n\n  setBrushWidth(width) {\n    this.context.brushWidth = width;\n  }\n\n  setBrush(brush) {\n    if (this.context.brush) {\n      this.context.brush.destory();\n    }\n\n    brush.init();\n    this.context.brush = brush;\n  }\n\n  onPointerDown(p) {\n    this.pointerIds[p.pointerId] = true;\n    const s = pointEvent2BrunshStatus(p); // console.log('f', s)\n\n    this.context.brush.onStart(s, this.context);\n  }\n\n  onPointerMove(pointerEvent) {\n    if (Object.keys(this.pointerIds).length > 1) return;\n    let ponterEvents;\n\n    if (pointerEvent.getCoalescedEvents) {\n      // console.log('getCoalescedEvents')\n      ponterEvents = pointerEvent.getCoalescedEvents();\n    } else {\n      // console.log('not getCoalescedEvents')\n      ponterEvents = [pointerEvent];\n    }\n\n    this.context.brush.onDraw(ponterEvents.map(p => pointEvent2BrunshStatus(p)), this.context);\n  }\n\n  onPointerUp(p) {\n    delete this.pointerIds[p.pointerId];\n    this.context.brush.onEnd(pointEvent2BrunshStatus(p), this.context);\n  }\n\n}\n\nfunction logCanvasData(rep = '', canvas) {\n  const ctx = canvas.getContext('2d');\n  console.log(rep, ctx === null || ctx === void 0 ? void 0 : ctx.getImageData(0, 0, 1, 1).data);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9ldmVudC50cz9jOTA2Iiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9wYWludC9wY2FudmFzL3BjbnZhcy5jb250cm9sbGVyLnRzPzlmY2YiXSwibmFtZXMiOlsiUEV2ZW50RW1pdGVyIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwib24iLCJldmVudCIsImxpc3RlbmVyIiwiZnVuIiwiYWRkTGlzdGVuZXIiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsImVtaXQiLCJwYXJhbXMiLCJzZXRUaW1lb3V0IiwiQ2FudmFzRXZlbnQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ0YWciLCJwb2ludEV2ZW50MkJydW5zaFN0YXR1cyIsIm9mZnNldFgiLCJ4Iiwib2Zmc2V0WSIsInkiLCJ0aWx0WCIsInRpbHRZIiwicHJlc3N1cmUiLCJCcnVzaFN0YXR1cyIsIlBDYW52YXNDb250cm9sbGVyIiwiY29udGV4dCIsImxheWVyTWFuYWdlciIsImNvbG9yIiwiUkdCQSIsIkJMQUNLIiwicG9pbnRlcklkcyIsIndvcmtJZCIsIm9uQnJ1c2hFbmQiLCJjdXJMYXllckRldGFpbCIsImdldEZvY3VzRGV0YWlsIiwicHJlQ29udGVudCIsImNvcHlDYW52YXMiLCJjYW52YXMiLCJhcHBseVRlbXBDYW52YXMiLCJpbmRleCIsImxheWVycyIsImluZGV4T2YiLCJsYXllckRldGFpbCIsImluaXQiLCJ3cmFwIiwiY292ZXIiLCJ3b3JrRGV0YWlsIiwid2lkdGgiLCJoZWlnaHQiLCJ3b3JrSW5mbyIsInN0eWxlIiwiUGNhbnZhc0xheWVycyIsIlBDYW52YXNDb250ZXh0IiwiZ2V0Q2FudmFzIiwiZ2V0Q29udGV4dCIsInNldENvbG9yIiwiciIsImciLCJiIiwiYSIsInNldFJHQkEiLCJ0b1JHQkFTdHJpbmciLCJzZXRPcGFjaXR5Iiwib3BhY2l0eSIsImdldExheWVycyIsImFkZExheWVyIiwiTGF5ZXJEZXRhaWwiLCJjcmVhdGUiLCJ3cmFwSW5mbyIsImZvY3VzTGF5ZXIiLCJhZGRMYXllckNvbnRlbnQiLCJjcmVhdG9yIiwiY3R4IiwiZHJhd0ltYWdlIiwic2V0TGF5ZXJDb250ZW50Iiwib2xkQ2FudmFzIiwiY2xlYXJSZWN0IiwicmVtb3ZlTGF5ZXIiLCJpc0ZvY3VzIiwicmVtb3ZlTGF5ZXJCeUluZGV4Iiwic2V0QnJ1c2hXaWR0aCIsImJydXNoV2lkdGgiLCJzZXRCcnVzaCIsImJydXNoIiwiZGVzdG9yeSIsIm9uUG9pbnRlckRvd24iLCJwIiwicG9pbnRlcklkIiwicyIsIm9uU3RhcnQiLCJvblBvaW50ZXJNb3ZlIiwicG9pbnRlckV2ZW50IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInBvbnRlckV2ZW50cyIsImdldENvYWxlc2NlZEV2ZW50cyIsIm9uRHJhdyIsIm1hcCIsIm9uUG9pbnRlclVwIiwib25FbmQiLCJsb2dDYW52YXNEYXRhIiwicmVwIiwiY29uc29sZSIsImxvZyIsImdldEltYWdlRGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUdlLE1BQU1BLGtCQUFOLENBQStCO0FBQUE7QUFBQSxTQUVoQ0MsWUFGZ0MsR0FFakIsSUFBSUMsc0JBQUosRUFGaUI7QUFBQTs7QUFJMUNDLElBQUUsQ0FBNEJDLEtBQTVCLEVBQXNDQyxRQUF0QyxFQUE4RTtBQUMvRSxVQUFNQyxHQUEwQixHQUFHRCxRQUFuQztBQUNBLFNBQUtKLFlBQUwsQ0FBa0JNLFdBQWxCLENBQThCSCxLQUE5QixFQUErQ0UsR0FBL0M7QUFDQTs7QUFFREUsS0FBRyxDQUE0QkosS0FBNUIsRUFBc0NDLFFBQXRDLEVBQThFO0FBQ2hGLFVBQU1DLEdBQTBCLEdBQUdELFFBQW5DO0FBQ0EsU0FBS0osWUFBTCxDQUFrQlEsY0FBbEIsQ0FBaUNMLEtBQWpDLEVBQWtERSxHQUFsRDtBQUNBOztBQUVESSxNQUFJLENBQTRCTixLQUE1QixFQUFzQ08sTUFBdEMsRUFBMkQ7QUFDM0RDLGNBQVUsQ0FBQyxNQUFNO0FBQ2IsV0FBS1gs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Q0FBRCxDQUFoRCxFQUFvRCxLQUFLN0QsT0FBekQ7QUFFSDs7QUFuSmdFOztBQStKckUsU0FBUzRFLGFBQVQsQ0FBdUJDLEdBQUcsR0FBQyxFQUEzQixFQUErQmpFLE1BQS9CLEVBQTBEO0FBQ3RELFFBQU1tQyxHQUFHLEdBQUduQyxNQUFNLENBQUNpQixVQUFQLENBQWtCLElBQWxCLENBQVo7QUFDRGlELFNBQU8sQ0FBQ0MsR0FBUixDQUFZRixHQUFaLEVBQWlCOUIsR0FBakIsYUFBaUJBLEdBQWpCLHVCQUFpQkEsR0FBRyxDQUFFaUMsWUFBTCxDQUFrQixDQUFsQixFQUFvQixDQUFwQixFQUFzQixDQUF0QixFQUF3QixDQUF4QixFQUEyQjVGLElBQTVDO0FBQ0QiLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUEV2ZW50RW1pdGVyIDxFdmVudERhdGE+IHtcbiAgXG4gICAgcHJvdGVjdGVkIGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKVxuXG4gICAgb248VCBleHRlbmRzIGtleW9mIEV2ZW50RGF0YT4oZXZlbnQ6IFQsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50RGF0YVtUXSkgPT4gdm9pZCl7XG4gICAgXHRjb25zdCBmdW46ICguLi5wOiBhbnlbXSkgPT4gdm9pZCA9IGxpc3RlbmVyIGFzIGFueSBcbiAgICBcdHRoaXMuZXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKGV2ZW50IGFzIHN0cmluZywgZnVuIClcbiAgICB9XG5cbiAgICBvZmY8VCBleHRlbmRzIGtleW9mIEV2ZW50RGF0YT4oZXZlbnQ6IFQsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50RGF0YVtUXSkgPT4gdm9pZCl7XG4gICAgXHRjb25zdCBmdW46ICguLi5wOiBhbnlbXSkgPT4gdm9pZCA9IGxpc3RlbmVyIGFzIGFueSBcbiAgICBcdHRoaXMuZXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKGV2ZW50IGFzIHN0cmluZywgZnVuIClcbiAgICB9XG5cbiAgICBlbWl0PFQgZXh0ZW5kcyBrZXlvZiBFdmVudERhdGE+KGV2ZW50OiBULCBwYXJhbXM6IEV2ZW50RGF0YVtUXSl7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChldmVudCBhcyBzdHJpbmcsIHBhcmFtcylcbiAgICAgICAgfSwxKVxuICAgIH1cblxufSIsImltcG9ydCB7IFJHQkEgfSBmcm9tIFwiLi4vdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9jb2xvci1zZWxlY3Rvci9yZ2JhXCJcbmltcG9ydCB7IFBDYW52YXNDb250ZXh0IH0gZnJvbSBcIi4vcGNhbnZhcy5jb250ZXh0XCJcbmltcG9ydCB7IEJydXNoIH0gZnJvbSBcIi4uL3RvcC10b29sLWJhci90b29sLWl0ZW0vYnJ1c2hcIlxuaW1wb3J0IHsgV29ya0RldGFpbCwgTGF5ZXJEZXRhaWwgfSBmcm9tIFwiLi4vLi4vLi4vd29ya1N0b3JhZ2VcIlxuaW1wb3J0IHsgUGNhbnZhc0xheWVycyB9IGZyb20gXCIuL3BjYW52YXMubGF5ZXJcIlxuaW1wb3J0IFBFdmVudEVtaXRlciBmcm9tIFwiLi4vLi4vLi4vdXRpbC9ldmVudFwiXG5pbXBvcnQgeyBjb3B5Q2FudmFzIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2FudmFzXCJcbmltcG9ydCB7IEJydXNoU3RhdHVzIH0gZnJvbSBcIi4uL3RvcC10b29sLWJhci90b29sLWl0ZW0vYnJ1c2gvdHlwZXNcIlxuXG5leHBvcnQgdHlwZSBFdm5ldENyZWF0b3IgPSAndXNlcid8J2hpc3RvcnknXG5cbmV4cG9ydCBjbGFzcyBDYW52YXNFdmVudDxUPW51bGw+IHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICBwdWJsaWMgZGF0YTogVCxcbiAgICAgICBwdWJsaWMgdGFnOkV2bmV0Q3JlYXRvcj0ndXNlcicsXG4gICAgKXt9XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYW52YXNFdmVudERhdGEge1xuXG4gICAgaW5pdDogQ2FudmFzRXZlbnRcblxuICAgIGNvbG9yY2hhbmdlOiBDYW52YXNFdmVudDx7Y29sb3I6IFJHQkF9PlxuXG4gICAgYWRkTGF5ZXI6IENhbnZhc0V2ZW50PHt3b3JrSWQ6c3RyaW5nLCBsYXllckRldGFpbDogTGF5ZXJEZXRhaWwsIGluZGV4OiBudW1iZXJ9PlxuXG4gICAgY29udGVudENoYW5nZTogQ2FudmFzRXZlbnQ8eyB3b3JrSWQ6c3RyaW5nICwgbGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsLCBwcmVDb250ZW50OiBIVE1MQ2FudmFzRWxlbWVudCwgaW5kZXg6IG51bWJlciB9PlxuXG4gICAgZm9jdXNMYXllcjogQ2FudmFzRXZlbnQ8eyBsYXllckRldGFpbDogTGF5ZXJEZXRhaWwgfT5cblxuICAgIHJlbW92ZUxheWVyOiBDYW52YXNFdmVudDx7IHdvcmtJZDpzdHJpbmcsIGxheWVyRGV0YWlsOiBMYXllckRldGFpbCwgaW5kZXg6IG51bWJlcn0+XG59XG5cblxuY29uc3QgcG9pbnRFdmVudDJCcnVuc2hTdGF0dXMgPSAoe29mZnNldFg6IHgsIG9mZnNldFk6IHksdGlsdFgsdGlsdFksIHByZXNzdXJlfTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ3ByZXNzdXJlLi4uJywgcHJlc3N1cmUpXG4gICAgcHJlc3N1cmUgPSBwcmVzc3VyZT4xPyBwcmVzc3VyZSAqIDAuMDEgOiBcbiAgICAgICAgICAgICAgICBwcmVzc3VyZSA9PT0gMD8gMTogcHJlc3N1cmU7XG4gICAgcmV0dXJuIG5ldyBCcnVzaFN0YXR1cyh4LCB5LCAgcHJlc3N1cmUsIHRpbHRYLCB0aWx0WSlcbn1cbmV4cG9ydCB0eXBlIFdyYXBJbmZvID0geyB3cmFwOiBIVE1MRWxlbWVudCwgY292ZXI6IEhUTUxFbGVtZW50IH1cbi8qKlxuICog55So5LqO5o6n5Yi2UENhbnZhc2NvbnRyb2xsZXIgY29tcG9uZW50IOeahOWvueixoS5cbiAqIFxuICogLy8gVE9ET1xuICog5a+555qE5pON5L2c5pS+5YWl57uE5Lu25LitLlxuICovXG5leHBvcnQgY2xhc3MgUENhbnZhc0NvbnRyb2xsZXIgZXh0ZW5kcyBQRXZlbnRFbWl0ZXI8Q2FudmFzRXZlbnREYXRhPiB7XG5cbiAgICBwcm90ZWN0ZWQgY29udGV4dDogUENhbnZhc0NvbnRleHQ7XG5cbiAgICBwcm90ZWN0ZWQgbGF5ZXJNYW5hZ2VyOlBjYW52YXNMYXllcnM7XG5cbiAgICBwcm90ZWN0ZWQgY29sb3IgPSBSR0JBLkJMQUNLO1xuXG4gICAgcHJvdGVjdGVkIHBvaW50ZXJJZHM6IHtbaWQ6c3RyaW5nXTogYm9vbGVhbn0gPSB7fVxuXG4gICAgcHJvdGVjdGVkIHdvcmtJZDogc3RyaW5nXG5cbiAgICBhc3luYyBpbml0KCB7d3JhcCwgY292ZXJ9OiAgV3JhcEluZm8sIHdvcmtEZXRhaWw6IFdvcmtEZXRhaWwgKXtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCB3b3JrSWQgfSA9IHdvcmtEZXRhaWwud29ya0luZm9cbiAgICAgICAgd3JhcC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YFxuICAgICAgICB3cmFwLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGBcbiAgICAgICAgdGhpcy53b3JrSWQgPSB3b3JrSWRcbiAgICAgICAgdGhpcy5sYXllck1hbmFnZXIgPSBuZXcgUGNhbnZhc0xheWVycyh7Y292ZXIsIHdyYXAsIHdpZHRoLCBoZWlnaHR9KVxuICAgICAgICB0aGlzLmxheWVyTWFuYWdlci5pbml0KHdvcmtEZXRhaWwubGF5ZXJzKVxuICAgICAgICB0aGlzLmNvbnRleHQgPSBuZXcgUENhbnZhc0NvbnRleHQoXG4gICAgICAgICAgICB0aGlzLmxheWVyTWFuYWdlci5nZXRDYW52YXMoKSxcbiAgICAgICAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmdldENvbnRleHQoKSxcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy5vbkJydXNoRW5kLFxuICAgICAgICApXG4gICAgICAgIHRoaXMuZW1pdCgnaW5pdCcsIG5ldyBDYW52YXNFdmVudChudWxsKSApXG4gICAgICAgIHRoaXMuZW1pdCgnZm9jdXNMYXllcicsIG5ldyBDYW52YXNFdmVudCh7IGxheWVyRGV0YWlsOiB0aGlzLmxheWVyTWFuYWdlci5nZXRGb2N1c0RldGFpbCgpIH0pKVxuICAgICAgICAvLyBsb2dDYW52YXNEYXRhKCdpbml0OiAnLCB0aGlzLmxheWVyTWFuYWdlci5sYXllcnNbMF0uY2FudmFzKVxuICAgIH1cblxuICAgIHNldENvbG9yKHtyLGcsYn06IFJHQkEpIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBuZXcgUkdCQShyLGcsYiwgdGhpcy5jb2xvci5hKVxuICAgICAgICB0aGlzLnNldFJHQkEoY29sb3IpXG4gICAgfVxuXG4gICAgc2V0UkdCQShjb2xvcjogUkdCQSk6dm9pZHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmNvbG9yID0gY29sb3IudG9SR0JBU3RyaW5nKClcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yXG4gICAgICAgIHRoaXMuZW1pdCgnY29sb3JjaGFuZ2UnLCBuZXcgQ2FudmFzRXZlbnQoe2NvbG9yIH0pKVxuICAgIH1cblxuICAgIHNldE9wYWNpdHkob3BhY2l0eTogbnVtYmVyKXtcbiAgICAgICAgY29uc3Qge3IsZyxifSA9IHRoaXMuY29sb3JcbiAgICAgICAgY29uc3QgY29sb3IgPSBuZXcgUkdCQShyLCBnLCBiLCBvcGFjaXR5KVxuICAgICAgICB0aGlzLnNldFJHQkEoY29sb3IpXG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRMYXllcnMoKXtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmxheWVyTWFuYWdlci5sYXllcnNdXG4gICAgfVxuXG4gICAgYWRkTGF5ZXIoKXtcbiAgICAgICAgY29uc3QgbGF5ZXJEZXRhaWwgPSAgdGhpcy5sYXllck1hbmFnZXIuYWRkTGF5ZXIoTGF5ZXJEZXRhaWwuY3JlYXRlKHRoaXMubGF5ZXJNYW5hZ2VyLndyYXBJbmZvKSlcbiAgICAgICAgdGhpcy5sYXllck1hbmFnZXIuZm9jdXNMYXllcihsYXllckRldGFpbClcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxheWVyTWFuYWdlci5sYXllcnMuaW5kZXhPZihsYXllckRldGFpbClcbiAgICAgICAgdGhpcy5lbWl0KCdhZGRMYXllcicsICBuZXcgQ2FudmFzRXZlbnQoe3dvcmtJZDogdGhpcy53b3JrSWQsIGxheWVyRGV0YWlsLCBpbmRleCB9KSlcbiAgICAgICAgdGhpcy5lbWl0KCdmb2N1c0xheWVyJywgbmV3IENhbnZhc0V2ZW50KHtsYXllckRldGFpbH0pKVxuXG4gICAgfVxuXG4gICAgYWRkTGF5ZXJDb250ZW50KGluZGV4OiBudW1iZXIsIGNhbnZhczpIVE1MQ2FudmFzRWxlbWVudHwgSFRNTEltYWdlRWxlbWVudCwgY3JlYXRvcjogRXZuZXRDcmVhdG9yPSd1c2VyJyk6IExheWVyRGV0YWlsIHtcbiAgICAgICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gY2FudmFzXG4gICAgICAgIGNvbnN0IGxheWVyRGV0YWlsID0gTGF5ZXJEZXRhaWwuY3JlYXRlKHt3aWR0aCwgaGVpZ2h0fSlcbiAgICAgICAgY29uc3QgY3R4ID0gbGF5ZXJEZXRhaWwuY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICAgICAgY3R4Py5kcmF3SW1hZ2UoY2FudmFzLCAwLDAsIHdpZHRoLCBoZWlnaHQpXG4gICAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmFkZExheWVyKGxheWVyRGV0YWlsLCBpbmRleClcbiAgICAgICAgdGhpcy5lbWl0KCdhZGRMYXllcicsIG5ldyBDYW52YXNFdmVudCh7IHdvcmtJZDogdGhpcy53b3JrSWQgLCBsYXllckRldGFpbCwgaW5kZXh9LCBjcmVhdG9yKSlcbiAgICAgICAgcmV0dXJuIGxheWVyRGV0YWlsXG5cbiAgICB9XG5cbiAgICBzZXRMYXllckNvbnRlbnQoaW5kZXg6IG51bWJlciwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudHwgSFRNTEltYWdlRWxlbWVudCwgY3JlYXRvcjogRXZuZXRDcmVhdG9yID0gJ3VzZXInKSB7XG4gICAgICAgIGNvbnN0IGxheWVyRGV0YWlsID0gdGhpcy5sYXllck1hbmFnZXIubGF5ZXJzW2luZGV4XVxuICAgICAgICBjb25zdCBvbGRDYW52YXMgPSBsYXllckRldGFpbC5jYW52YXNcbiAgICAgICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gb2xkQ2FudmFzXG4gICAgICAgIGNvbnN0IHByZUNvbnRlbnQgPSBjb3B5Q2FudmFzKGxheWVyRGV0YWlsLmNhbnZhcylcbiAgICAgICAgY29uc3QgY3R4ID0gbGF5ZXJEZXRhaWwuY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICAgICAgY3R4Py5jbGVhclJlY3QoMCwwLCB3aWR0aCwgaGVpZ2h0KVxuICAgICAgICBjdHg/LmRyYXdJbWFnZShjYW52YXMsIDAsMCx3aWR0aCwgaGVpZ2h0KVxuICAgICAgICB0aGlzLmVtaXQoJ2NvbnRlbnRDaGFuZ2UnLCBuZXcgQ2FudmFzRXZlbnQoeyB3b3JrSWQ6IHRoaXMud29ya0lkICwgbGF5ZXJEZXRhaWwsIGluZGV4LCBwcmVDb250ZW50LCAgfSwgY3JlYXRvcikpXG4gICAgICAgIHJldHVybiBsYXllckRldGFpbFxuICAgIH1cblxuXG5cbiAgICBmb2N1c0xheWVyKGxheWVyRGV0YWlsOiBMYXllckRldGFpbCk6dm9pZCB7XG4gICAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmZvY3VzTGF5ZXIobGF5ZXJEZXRhaWwpXG4gICAgICAgIHRoaXMuZW1pdCgnZm9jdXNMYXllcicsIG5ldyBDYW52YXNFdmVudCh7IGxheWVyRGV0YWlsIH0pKVxuICAgIH1cblxuICAgIHJlbW92ZUxheWVyKGxheWVyRGV0YWlsOiBMYXllckRldGFpbCwgY3JlYXRvcjogRXZuZXRDcmVhdG9yPSd1c2VyJyk6IHZvaWR7XG4gICAgICAgIGNvbnN0IHsgaW5kZXgsIGlzRm9jdXMgfSA9ICB0aGlzLmxheWVyTWFuYWdlci5yZW1vdmVMYXllcihsYXllckRldGFpbClcbiAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMYXllcicsIG5ldyBDYW52YXNFdmVudCh7d29ya0lkOiB0aGlzLndvcmtJZCwgbGF5ZXJEZXRhaWwsIGluZGV4fSwgY3JlYXRvcikpXG4gICAgICAgIGlmKGlzRm9jdXMpe1xuICAgICAgICAgICAgY29uc3QgbGF5ZXJEZXRhaWwgPSB0aGlzLmxheWVyTWFuYWdlci5sYXllcnNbMF1cbiAgICAgICAgICAgIHRoaXMuZm9jdXNMYXllcihsYXllckRldGFpbClcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZm9jdXNMYXllcicsIG5ldyBDYW52YXNFdmVudCh7bGF5ZXJEZXRhaWx9LCBjcmVhdG9yKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVMYXllckJ5SW5kZXgoaW5kZXg6IG51bWJlciwgY3JlYXRvcjogRXZuZXRDcmVhdG9yPSd1c2VyJyk6IHZvaWQge1xuICAgICAgICBjb25zdCBsYXllckRldGFpbCA9IHRoaXMubGF5ZXJNYW5hZ2VyLmxheWVyc1tpbmRleF1cbiAgICAgICAgdGhpcy5yZW1vdmVMYXllcihsYXllckRldGFpbCwgY3JlYXRvcilcbiAgICB9XG5cbiAgICBzZXRCcnVzaFdpZHRoKHdpZHRoOiBudW1iZXIpe1xuICAgICAgICB0aGlzLmNvbnRleHQuYnJ1c2hXaWR0aCA9IHdpZHRoXG4gICAgfVxuICBcblxuICAgIHNldEJydXNoKGJydXNoOiBCcnVzaCl7XG4gICAgICAgIGlmKHRoaXMuY29udGV4dC5icnVzaCl7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuYnJ1c2guZGVzdG9yeSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJ1c2guaW5pdCgpXG4gICAgICAgIHRoaXMuY29udGV4dC5icnVzaCA9IGJydXNoXG4gICAgfVxuXG4gICAgb25Qb2ludGVyRG93bihwOiBQb2ludGVyRXZlbnQpe1xuICAgICAgICB0aGlzLnBvaW50ZXJJZHNbcC5wb2ludGVySWRdID0gdHJ1ZVxuICAgICAgICBjb25zdCBzID0gcG9pbnRFdmVudDJCcnVuc2hTdGF0dXMocClcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2YnLCBzKVxuICAgICAgICB0aGlzLmNvbnRleHQuYnJ1c2gub25TdGFydChzLHRoaXMuY29udGV4dClcbiAgICB9XG5cbiAgICBvblBvaW50ZXJNb3ZlKHBvaW50ZXJFdmVudDogUG9pbnRlckV2ZW50KTp2b2lke1xuICAgICAgaWYoT2JqZWN0LmtleXModGhpcy5wb2ludGVySWRzKS5sZW5ndGg+MSkgcmV0dXJuXG4gICAgICAgIGxldCBwb250ZXJFdmVudHM6IFBvaW50ZXJFdmVudFtdO1xuICAgICAgICBpZigocG9pbnRlckV2ZW50IGFzIGFueSkuZ2V0Q29hbGVzY2VkRXZlbnRzKXtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2V0Q29hbGVzY2VkRXZlbnRzJylcbiAgICAgICAgICBwb250ZXJFdmVudHMgPSAocG9pbnRlckV2ZW50IGFzIGFueSApLmdldENvYWxlc2NlZEV2ZW50cygpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdub3QgZ2V0Q29hbGVzY2VkRXZlbnRzJylcbiAgICAgICAgICAgIHBvbnRlckV2ZW50cyA9ICBbcG9pbnRlckV2ZW50XVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGV4dC5icnVzaC5vbkRyYXcoXG4gICAgICAgICAgICBwb250ZXJFdmVudHMubWFwKCBwID0+IHBvaW50RXZlbnQyQnJ1bnNoU3RhdHVzKHApICksXG4gICAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgIH1cblxuICAgIG9uUG9pbnRlclVwKHA6IFBvaW50ZXJFdmVudCk6IHZvaWR7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBvaW50ZXJJZHNbcC5wb2ludGVySWRdXG4gICAgICAgIHRoaXMuY29udGV4dC5icnVzaC5vbkVuZChwb2ludEV2ZW50MkJydW5zaFN0YXR1cyhwKSx0aGlzLmNvbnRleHQpXG4gICAgICAgIFxuICAgIH1cblxuICAgIHByb3RlY3RlZCBvbkJydXNoRW5kID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3VyTGF5ZXJEZXRhaWwgPSB0aGlzLmxheWVyTWFuYWdlci5nZXRGb2N1c0RldGFpbCgpXG4gICAgICAgIGNvbnN0IHByZUNvbnRlbnQgPSBjb3B5Q2FudmFzKGN1ckxheWVyRGV0YWlsLmNhbnZhcylcbiAgICAgICAgdGhpcy5sYXllck1hbmFnZXIuYXBwbHlUZW1wQ2FudmFzKClcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxheWVyTWFuYWdlci5sYXllcnMuaW5kZXhPZihjdXJMYXllckRldGFpbClcbiAgICAgICAgdGhpcy5lbWl0KCdjb250ZW50Q2hhbmdlJywgbmV3IENhbnZhc0V2ZW50KHsgd29ya0lkOiB0aGlzLndvcmtJZCAsIGxheWVyRGV0YWlsOiBjdXJMYXllckRldGFpbCwgcHJlQ29udGVudCwgaW5kZXh9KSkgXG4gICAgfVxuXG5cbiB9XG5mdW5jdGlvbiBsb2dDYW52YXNEYXRhKHJlcD0nJywgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICBjb25zb2xlLmxvZyhyZXAsIGN0eD8uZ2V0SW1hZ2VEYXRhKDAsMCwxLDEpLmRhdGEpIFxuIH1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n")},26:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCanvasContext", function() { return PCanvasContext; });\n/* harmony import */ var _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21);\n/* harmony import */ var _top_tool_bar_tool_item_brush__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);\n\n\nclass PCanvasContext {\n  constructor(curCanvas, curCanvasContext2D, width, height, onBrushEnd, brush = new _top_tool_bar_tool_item_brush__WEBPACK_IMPORTED_MODULE_1__["Brush"](), color = _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__["RGBA"].BLACK.toRGBAString(), brushWidth = 100) {\n    this.curCanvas = curCanvas;\n    this.curCanvasContext2D = curCanvasContext2D;\n    this.width = width;\n    this.height = height;\n    this.onBrushEnd = onBrushEnd;\n    this.brush = brush;\n    this.color = color;\n    this.brushWidth = brushWidth;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY2FudmFzLmNvbnRleHQudHM/ZGE5OSJdLCJuYW1lcyI6WyJQQ2FudmFzQ29udGV4dCIsImNvbnN0cnVjdG9yIiwiY3VyQ2FudmFzIiwiY3VyQ2FudmFzQ29udGV4dDJEIiwid2lkdGgiLCJoZWlnaHQiLCJvbkJydXNoRW5kIiwiYnJ1c2giLCJCcnVzaCIsImNvbG9yIiwiUkdCQSIsIkJMQUNLIiwidG9SR0JBU3RyaW5nIiwiYnJ1c2hXaWR0aCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRU8sTUFBTUEsY0FBTixDQUFxQjtBQUV4QkMsYUFBVyxDQUVBQyxTQUZBLEVBT0FDLGtCQVBBLEVBU0FDLEtBVEEsRUFXQUMsTUFYQSxFQWFBQyxVQWJBLEVBZUFDLEtBQVksR0FBRyxJQUFJQyxtRUFBSixFQWZmLEVBaUJBQyxLQUFhLEdBQUdDLGdGQUFJLENBQUNDLEtBQUwsQ0FBV0MsWUFBWCxFQWpCaEIsRUFtQkFDLFVBQWtCLEdBQUcsR0FuQnJCLEVBc0JWO0FBQUEsU0FwQlVYLFNBb0JWLEdBcEJVQSxTQW9CVjtBQUFBLFNBZlVDLGtCQWVWLEdBZlVBLGtCQWVWO0FBQUEsU0FiVUMsS0FhVixHQWJVQSxLQWFWO0FBQUEsU0FYVUMsTUFXVixHQVhVQSxNQVdWO0FBQUEsU0FUVUMsVUFTVixHQVRVQSxVQVNWO0FBQUEsU0FQVUMsS0FPVixHQVBVQSxLQU9WO0FBQUEsU0FMVUUsS0FLVixHQUxVQSxLQUtWO0FBQUEsU0FIVUksVUFHVixHQUhVQSxVQUdWO0FBQUU7O0FBeEJxQiIsImZpbGUiOiIyNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJHQkEgfSBmcm9tIFwiLi4vdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9jb2xvci1zZWxlY3Rvci9yZ2JhXCI7XG5pbXBvcnQgeyBCcnVzaCB9IGZyb20gXCIuLi90b3AtdG9vbC1iYXIvdG9vbC1pdGVtL2JydXNoXCI7XG5cbmV4cG9ydCBjbGFzcyBQQ2FudmFzQ29udGV4dCB7XG5cbiAgICBjb25zdHJ1Y3RvcihcblxuICAgICAgICBwdWJsaWMgY3VyQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcblxuICAgICAgICAvKipcbiAgICAgICAgICog5b2T5YmN6YCJ5Lit5Zu+5bGC55qEY29udGV4dC5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjdXJDYW52YXNDb250ZXh0MkQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyLFxuXG4gICAgICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBvbkJydXNoRW5kOiAoKSA9PiB2b2lkLFxuXG4gICAgICAgIHB1YmxpYyBicnVzaDogQnJ1c2ggPSBuZXcgQnJ1c2goKSxcblxuICAgICAgICBwdWJsaWMgY29sb3I6IHN0cmluZyA9IFJHQkEuQkxBQ0sudG9SR0JBU3RyaW5nKCksXG5cbiAgICAgICAgcHVibGljIGJydXNoV2lkdGg6IG51bWJlciA9IDEwMCxcblxuXG4gICAgKXt9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n')},27:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PcanvasLayers\", function() { return PcanvasLayers; });\n/* harmony import */ var _workStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59);\n\nclass PcanvasLayers {\n  /**\n   * 临时图层,始终位于当前绘制图层的上方.\n   */\n\n  /**\n   * 当前绘制的图层.\n   */\n  constructor(wrapInfo) {\n    this.wrapInfo = wrapInfo;\n    this.tempLayer = void 0;\n    this.layers = void 0;\n    this.focusedLayerDetail = void 0;\n  }\n\n  async init(layers) {\n    const wrapInfo = this.wrapInfo;\n    const {\n      wrap,\n      cover\n    } = wrapInfo;\n    let lastElement = cover;\n    this.layers = layers;\n    layers.forEach((layer, index) => {\n      const {\n        canvas,\n        layerId,\n        visible\n      } = layer;\n      wrap.insertBefore(canvas, lastElement);\n      lastElement = canvas;\n\n      if (!visible) {\n        canvas.className = 'unvisible';\n      }\n    });\n    this.tempLayer = _workStorage__WEBPACK_IMPORTED_MODULE_0__[/* LayerDetail */ \"a\"].create(wrapInfo);\n    wrap.insertBefore(this.tempLayer.canvas, cover); // console.log('this.tempLayer: ', this.tempLayer.layerId)\n\n    this.focusedLayerDetail = layers[0];\n  }\n\n  getCanvas() {\n    return this.tempLayer.canvas;\n  }\n\n  applyTempCanvas() {\n    const ctx = this.focusedLayerDetail.canvas.getContext('2d');\n    const tempCtx = this.tempLayer.canvas.getContext('2d');\n\n    if (ctx && tempCtx) {\n      const {\n        width,\n        height\n      } = this.tempLayer.canvas;\n      ctx.drawImage(this.tempLayer.canvas, 0, 0, width, height);\n      tempCtx.clearRect(0, 0, width, height);\n    }\n  }\n\n  getFocusDetail() {\n    return this.focusedLayerDetail;\n  }\n\n  focusLayer(layerDetail) {\n    const nextLayer = this.layers[this.layers.indexOf(layerDetail) - 1];\n    const nextCanvas = nextLayer && nextLayer.canvas && nextLayer !== this.tempLayer ? nextLayer.canvas : this.wrapInfo.cover;\n    this.wrapInfo.wrap.insertBefore(this.tempLayer.canvas, nextCanvas);\n    this.focusedLayerDetail = layerDetail; // TOFIX: update templyer in layers.\n  }\n\n  addLayer(newLayer, index = 0) {\n    const {\n      wrap\n    } = this.wrapInfo;\n    const oldLayerDetail = this.layers[index - 1];\n    const ele = oldLayerDetail && oldLayerDetail.canvas || this.wrapInfo.cover;\n    wrap.insertBefore(newLayer.canvas, ele);\n    this.layers.splice(index, 0, newLayer);\n    return newLayer;\n  }\n\n  removeLayer(layerDetail) {\n    const index = this.layers.indexOf(layerDetail);\n\n    if (index > -1) {\n      this.wrapInfo.wrap.removeChild(layerDetail.canvas);\n      this.layers.splice(index, 1);\n    } else {\n      console.warn('layerDetail has been removed');\n    }\n\n    return {\n      index,\n      isFocus: this.focusedLayerDetail === layerDetail\n    };\n  }\n\n  getContext() {\n    const ctx = this.tempLayer.canvas.getContext('2d');\n\n    if (ctx === null) {\n      throw 'get context faliled.';\n    }\n\n    ctx.imageSmoothingEnabled = false;\n    return ctx;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY2FudmFzLmxheWVyLnRzPzY0OWMiXSwibmFtZXMiOlsiUGNhbnZhc0xheWVycyIsImNvbnN0cnVjdG9yIiwid3JhcEluZm8iLCJ0ZW1wTGF5ZXIiLCJsYXllcnMiLCJmb2N1c2VkTGF5ZXJEZXRhaWwiLCJpbml0Iiwid3JhcCIsImNvdmVyIiwibGFzdEVsZW1lbnQiLCJmb3JFYWNoIiwibGF5ZXIiLCJpbmRleCIsImNhbnZhcyIsImxheWVySWQiLCJ2aXNpYmxlIiwiaW5zZXJ0QmVmb3JlIiwiY2xhc3NOYW1lIiwiTGF5ZXJEZXRhaWwiLCJjcmVhdGUiLCJnZXRDYW52YXMiLCJhcHBseVRlbXBDYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwidGVtcEN0eCIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhd0ltYWdlIiwiY2xlYXJSZWN0IiwiZ2V0Rm9jdXNEZXRhaWwiLCJmb2N1c0xheWVyIiwibGF5ZXJEZXRhaWwiLCJuZXh0TGF5ZXIiLCJpbmRleE9mIiwibmV4dENhbnZhcyIsImFkZExheWVyIiwibmV3TGF5ZXIiLCJvbGRMYXllckRldGFpbCIsImVsZSIsInNwbGljZSIsInJlbW92ZUxheWVyIiwicmVtb3ZlQ2hpbGQiLCJjb25zb2xlIiwid2FybiIsImlzRm9jdXMiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBVU8sTUFBTUEsYUFBTixDQUFtQjtBQUV0Qjs7OztBQU1BOzs7QUFLQUMsYUFBVyxDQUFpQkMsUUFBakIsRUFBb0M7QUFBQSxTQUFuQkEsUUFBbUIsR0FBbkJBLFFBQW1CO0FBQUEsU0FSckNDLFNBUXFDO0FBQUEsU0FOeENDLE1BTXdDO0FBQUEsU0FGckNDLGtCQUVxQztBQUFFOztBQUdqRCxRQUFNQyxJQUFOLENBQVlGLE1BQVosRUFBaUQ7QUFDL0MsVUFBTUYsUUFBUSxHQUFHLEtBQUtBLFFBQXRCO0FBQ0EsVUFB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LE1BQUwsQ0FBWW1DLE1BQVosQ0FBbUIzQixLQUFuQixFQUEwQixDQUExQixFQUE2QndCLFFBQTdCO0FBQ0EsV0FBT0EsUUFBUDtBQUNIOztBQUdESSxhQUFXLENBQUNULFdBQUQsRUFBMEI7QUFDakMsVUFBTW5CLEtBQUssR0FBRyxLQUFLUixNQUFMLENBQVk2QixPQUFaLENBQW9CRixXQUFwQixDQUFkOztBQUNBLFFBQUduQixLQUFLLEdBQUcsQ0FBQyxDQUFaLEVBQWM7QUFDVixXQUFLVixRQUFMLENBQWNLLElBQWQsQ0FBbUJrQyxXQUFuQixDQUErQlYsV0FBVyxDQUFDbEIsTUFBM0M7QUFDQSxXQUFLVCxNQUFMLENBQVltQyxNQUFaLENBQW1CM0IsS0FBbkIsRUFBMEIsQ0FBMUI7QUFDSCxLQUhELE1BR0s7QUFDRDhCLGFBQU8sQ0FBQ0MsSUFBUixDQUFhLDhCQUFiO0FBQ0g7O0FBQ0QsV0FBTztBQUFFL0IsV0FBRjtBQUFTZ0MsYUFBTyxFQUFHLEtBQUt2QyxrQkFBTCxLQUE0QjBCO0FBQS9DLEtBQVA7QUFDSDs7QUFFRFIsWUFBVSxHQUFFO0FBQ1IsVUFBTUQsR0FBRyxHQUFHLEtBQUtuQixTQUFMLENBQWVVLE1BQWYsQ0FBc0JVLFVBQXRCLENBQWlDLElBQWpDLENBQVo7O0FBQ0EsUUFBR0QsR0FBRyxLQUFLLElBQVgsRUFBZ0I7QUFDWixZQUFNLHNCQUFOO0FBQ0g7O0FBQ0RBLE9BQUcsQ0FBQ3VCLHFCQUFKLEdBQTRCLEtBQTVCO0FBQ0EsV0FBT3ZCLEdBQVA7QUFDSDs7QUExRnFCIiwiZmlsZSI6IjI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGF5ZXJEZXRhaWwgfSBmcm9tIFwiLi4vLi4vLi4vd29ya1N0b3JhZ2VcIjtcbmltcG9ydCB7IGNvcHlDYW52YXMgfSBmcm9tICdAL3V0aWwvY2FudmFzJ1xuXG5leHBvcnQgdHlwZSBXcmFwSW5mbyA9IHsgXG4gIHJlYWRvbmx5ICB3cmFwOiBIVE1MRWxlbWVudCxcbiAgcmVhZG9ubHkgIGNvdmVyOiBIVE1MRWxlbWVudCxcbiAgcmVhZG9ubHkgIHdpZHRoOiBudW1iZXIsXG4gIHJlYWRvbmx5ICBoZWlnaHQ6IG51bWJlcixcbiB9XG5cbmV4cG9ydCBjbGFzcyBQY2FudmFzTGF5ZXJze1xuXG4gICAgLyoqXG4gICAgICog5Li05pe25Zu+5bGCLOWni+e7iOS9jeS6juW9k+WJjee7mOWItuWbvuWxgueahOS4iuaWuS5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdGVtcExheWVyOkxheWVyRGV0YWlsO1xuXG4gICAgcHVibGljIGxheWVyczogIExheWVyRGV0YWlsPEhUTUxDYW52YXNFbGVtZW50PltdIFxuICAgIC8qKlxuICAgICAqIOW9k+WJjee7mOWItueahOWbvuWxgi5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZm9jdXNlZExheWVyRGV0YWlsOiBMYXllckRldGFpbDtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSB3cmFwSW5mbzogV3JhcEluZm8pe31cblxuXG4gICAgYXN5bmMgaW5pdCggbGF5ZXJzOiBMYXllckRldGFpbFtdKTogUHJvbWlzZTx2b2lkPntcbiAgICAgIGNvbnN0IHdyYXBJbmZvID0gdGhpcy53cmFwSW5mb1xuICAgICAgY29uc3QgeyB3cmFwLCBjb3ZlciB9ID0gd3JhcEluZm9cbiAgICAgIGxldCBsYXN0RWxlbWVudDogSFRNTEVsZW1lbnQ9IGNvdmVyXG4gICAgICB0aGlzLmxheWVycyA9IGxheWVyc1xuICAgICAgbGF5ZXJzLmZvckVhY2goIChsYXllcixpbmRleCkgPT4ge1xuICAgICAgY29uc3QgeyBjYW52YXMsIGxheWVySWQsIHZpc2libGUgfSA9IGxheWVyXG4gICAgICB3cmFwLmluc2VydEJlZm9yZSggY2FudmFzLCBsYXN0RWxlbWVudCk7XG4gICAgICAgIGxhc3RFbGVtZW50ID0gY2FudmFzXG4gICAgICAgIGlmKCF2aXNpYmxlKXtcbiAgICAgICAgICAgIGNhbnZhcy5jbGFzc05hbWUgPSAndW52aXNpYmxlJ1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICB0aGlzLnRlbXBMYXllciA9IExheWVyRGV0YWlsLmNyZWF0ZSh3cmFwSW5mbylcbiAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzLnRlbXBMYXllci5jYW52YXMsIGNvdmVyKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnRlbXBMYXllcjogJywgdGhpcy50ZW1wTGF5ZXIubGF5ZXJJZClcbiAgICAgIHRoaXMuZm9jdXNlZExheWVyRGV0YWlsID0gbGF5ZXJzWzBdXG4gICAgfVxuXG4gICAgZ2V0Q2FudmFzKCk6SFRNTENhbnZhc0VsZW1lbnR7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBMYXllci5jYW52YXNcbiAgICB9XG5cbiAgICBhcHBseVRlbXBDYW52YXMoKTogdm9pZHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5mb2N1c2VkTGF5ZXJEZXRhaWwuY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICAgICAgY29uc3QgdGVtcEN0eCA9IHRoaXMudGVtcExheWVyLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIGlmKGN0eCAmJiB0ZW1wQ3R4KXtcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCAgfSA9IHRoaXMudGVtcExheWVyLmNhbnZhc1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLnRlbXBMYXllci5jYW52YXMsIDAsIDAsIHdpZHRoLCBoZWlnaHQpXG4gICAgICAgICAgICB0ZW1wQ3R4LmNsZWFyUmVjdCgwLCAwICx3aWR0aCwgaGVpZ2h0KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Rm9jdXNEZXRhaWwoKTogTGF5ZXJEZXRhaWwge1xuICAgICAgICByZXR1cm4gdGhpcy5mb2N1c2VkTGF5ZXJEZXRhaWxcbiAgICB9XG5cbiAgICBmb2N1c0xheWVyKGxheWVyRGV0YWlsOiBMYXllckRldGFpbCl7XG4gICAgICAgIGNvbnN0IG5leHRMYXllciA9IHRoaXMubGF5ZXJzW3RoaXMubGF5ZXJzLmluZGV4T2YobGF5ZXJEZXRhaWwpIC0gMV1cbiAgICAgICAgY29uc3QgbmV4dENhbnZhcyA9IG5leHRMYXllciYmbmV4dExheWVyLmNhbnZhcyAmJiBuZXh0TGF5ZXIgIT09IHRoaXMudGVtcExheWVyID8gbmV4dExheWVyLmNhbnZhcyA6ICB0aGlzLndyYXBJbmZvLmNvdmVyXG4gICAgICAgIHRoaXMud3JhcEluZm8ud3JhcC5pbnNlcnRCZWZvcmUodGhpcy50ZW1wTGF5ZXIuY2FudmFzLCBuZXh0Q2FudmFzKVxuICAgICAgICB0aGlzLmZvY3VzZWRMYXllckRldGFpbCA9IGxheWVyRGV0YWlsXG4gICAgICAgIC8vIFRPRklYOiB1cGRhdGUgdGVtcGx5ZXIgaW4gbGF5ZXJzLlxuICAgIH1cblxuICAgIGFkZExheWVyKG5ld0xheWVyOiBMYXllckRldGFpbCwgaW5kZXggPSAwKXtcbiAgICAgICAgY29uc3QgeyB3cmFwIH0gPSB0aGlzLndyYXBJbmZvXG4gICAgICAgIGNvbnN0IG9sZExheWVyRGV0YWlsID0gdGhpcy5sYXllcnNbaW5kZXgtMV1cbiAgICAgICAgY29uc3QgZWxlID0gb2xkTGF5ZXJEZXRhaWwmJm9sZExheWVyRGV0YWlsLmNhbnZhcyB8fCB0aGlzLndyYXBJbmZvLmNvdmVyXG4gICAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKG5ld0xheWVyLmNhbnZhcywgZWxlKVxuICAgICAgICB0aGlzLmxheWVycy5zcGxpY2UoaW5kZXgsIDAsIG5ld0xheWVyKVxuICAgICAgICByZXR1cm4gbmV3TGF5ZXJcbiAgICB9XG5cblxuICAgIHJlbW92ZUxheWVyKGxheWVyRGV0YWlsOiBMYXllckRldGFpbCl7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5sYXllcnMuaW5kZXhPZihsYXllckRldGFpbClcbiAgICAgICAgaWYoaW5kZXggPiAtMSl7XG4gICAgICAgICAgICB0aGlzLndyYXBJbmZvLndyYXAucmVtb3ZlQ2hpbGQobGF5ZXJEZXRhaWwuY2FudmFzKVxuICAgICAgICAgICAgdGhpcy5sYXllcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignbGF5ZXJEZXRhaWwgaGFzIGJlZW4gcmVtb3ZlZCcpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgaW5kZXgsIGlzRm9jdXM6ICB0aGlzLmZvY3VzZWRMYXllckRldGFpbCA9PT0gbGF5ZXJEZXRhaWx9XG4gICAgfVxuXG4gICAgZ2V0Q29udGV4dCgpe1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLnRlbXBMYXllci5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICBpZihjdHggPT09IG51bGwpe1xuICAgICAgICAgICAgdGhyb3cgJ2dldCBjb250ZXh0IGZhbGlsZWQuJ1xuICAgICAgICB9XG4gICAgICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZVxuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cblxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n")},3:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Brush", function() { return Brush; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22);\n\n/**\n * 带压感的brush，bug待修复.\n * 根据移动，与context, 控制画出的形状并填充.\n */\n\nclass Brush {\n  constructor() {\n    this.type = _types__WEBPACK_IMPORTED_MODULE_0__["BrushType"].pen;\n    this.name = \'default\';\n    this.isPainting = false;\n    this.pathList = [];\n    this.animeHandle = void 0;\n\n    this.paintPath = ctx => {\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n      ctx.beginPath();\n      const f = this.pathList[0];\n      ctx.moveTo(f.x, f.y);\n\n      for (let i = 1; i < this.pathList.length; i++) {\n        const {\n          x,\n          y\n        } = this.pathList[i];\n        ctx.lineTo(x, y);\n      }\n\n      ctx.stroke();\n    };\n  }\n\n  init() {}\n\n  destory() {}\n\n  onStart(status, context) {\n    const {\n      curCanvasContext2D: ctx,\n      color,\n      brushWidth\n    } = context;\n    this.isPainting = true;\n    this.pathList.push(status);\n    ctx.strokeStyle = color;\n    ctx.lineWidth = brushWidth;\n    ctx.lineCap = \'round\';\n    ctx.lineJoin = "round";\n  }\n\n  onDraw(brushStatus, contx) {\n    if (this.isPainting) {\n      const {\n        curCanvasContext2D: ctx\n      } = contx;\n\n      for (let i = 0; i < brushStatus.length; i++) {\n        this.pathList.push(brushStatus[i]);\n      }\n\n      cancelAnimationFrame(this.animeHandle);\n      this.animeHandle = requestAnimationFrame(() => {\n        this.paintPath(ctx);\n      });\n    }\n  }\n\n  onEnd(brushStatus, {\n    onBrushEnd\n  }) {\n    requestAnimationFrame(() => {\n      this.isPainting = false;\n      this.pathList = [];\n      onBrushEnd();\n    });\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaC9pbmRleC50cz8yMjY2Il0sIm5hbWVzIjpbIkJydXNoIiwidHlwZSIsIkJydXNoVHlwZSIsInBlbiIsIm5hbWUiLCJpc1BhaW50aW5nIiwicGF0aExpc3QiLCJhbmltZUhhbmRsZSIsInBhaW50UGF0aCIsImN0eCIsImNsZWFyUmVjdCIsImNhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiYmVnaW5QYXRoIiwiZiIsIm1vdmVUbyIsIngiLCJ5IiwiaSIsImxlbmd0aCIsImxpbmVUbyIsInN0cm9rZSIsImluaXQiLCJkZXN0b3J5Iiwib25TdGFydCIsInN0YXR1cyIsImNvbnRleHQiLCJjdXJDYW52YXNDb250ZXh0MkQiLCJjb2xvciIsImJydXNoV2lkdGgiLCJwdXNoIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJsaW5lQ2FwIiwibGluZUpvaW4iLCJvbkRyYXciLCJicnVzaFN0YXR1cyIsImNvbnR4IiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbkVuZCIsIm9uQnJ1c2hFbmQiXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7Ozs7O0FBSU8sTUFBTUEsS0FBTixDQUFzQztBQUFBO0FBQUEsU0FHaENDLElBSGdDLEdBR2RDLGdEQUFTLENBQUNDLEdBSEk7QUFBQSxTQUtoQ0MsSUFMZ0MsR0FLekIsU0FMeUI7QUFBQSxTQU8vQkMsVUFQK0IsR0FPbEIsS0FQa0I7QUFBQSxTQVMvQkMsUUFUK0IsR0FTVCxFQVRTO0FBQUEsU0FXL0JDLFdBWCtCOztBQUFBLFNBMkMvQkMsU0EzQytCLEdBMkNsQkMsR0FBRCxJQUFtQztBQUN2REEsU0FBRyxDQUFDQyxTQUFKLENBQWMsQ0FBZCxFQUFnQixDQUFoQixFQUFtQkQsR0FBRyxDQUFDRSxNQUFKLENBQVdDLEtBQTlCLEVBQXFDSCxHQUFHLENBQUNFLE1BQUosQ0FBV0UsTUFBaEQ7QUFDQUosU0FBRyxDQUFDSyxTQUFKO0FBQ0EsWUFBTUMsQ0FBQyxHQUFHLEtBQUtULFFBQUwsQ0FBYyxDQUFkLENBQVY7QUFDQUcsU0FBRyxDQUFDTyxNQUFKLENBQVdELENBQUMsQ0FBQ0UsQ0FBYixFQUFnQkYsQ0FBQyxDQUFDRyxDQUFsQjs7QUFDQSxXQUFLLElBQUlDLENBQUMsR0FBRSxDQUFaLEVBQWVBLENBQUMsR0FBRSxLQUFLYixRQUFMLENBQWNjLE1BQWhDLEVBQXdDRCxDQUFDLEVBQXpDLEVBQTZDO0FBQzNDLGNBQU07QUFBQ0YsV0FBRDtBQUFJQztBQUFKLFlBQVMsS0FBS1osUUFBTCxDQUFjYSxDQUFkLENBQWY7QUFDQVYsV0FBRyxDQUFDWSxNQUFKLENBQVdKLENBQVgsRUFBYUMsQ0FBYjtBQUNEOztBQUNEVCxTQUFHLENBQUNhLE1BQUo7QUFDRCxLQXJEd0M7QUFBQTs7QUFhekNDLE1BQUksR0FBRSxDQUFFOztBQUVSQyxTQUFPLEdBQUUsQ0FBRTs7QUFFWEMsU0FBTyxDQUFDQyxNQUFELEVBQXNCQyxPQUF0QixFQUErQztBQUNsRCxVQUFNO0FBQUNDLHdCQUFrQixFQUFFbkIsR0FBckI7QUFBMEJvQixXQUExQjtBQUFpQ0M7QUFBakMsUUFBK0NILE9BQXJEO0FBQ0EsU0FBS3RCLFVBQUwsR0FBa0IsSUFBbEI7QUFDQSxTQUFLQyxRQUFMLENBQWN5QixJQUFkLENBQW1CTCxNQUFuQjtBQUNBakIsT0FBRyxDQUFDdUIsV0FBSixHQUFrQkgsS0FBbEI7QUFDQXBCLE9BQUcsQ0FBQ3dCLFNBQUosR0FBZ0JILFVBQWhCO0FBQ0FyQixPQUFHLENBQUN5QixPQUFKLEdBQWEsT0FBYjtBQUNBekIsT0FBRyxDQUFDMEIsUUFBSixHQUFlLE9BQWY7QUFDSDs7QUFJREMsUUFBTSxDQUFDQyxXQUFELEVBQTZCQyxLQUE3QixFQUEwRDtBQUM5RCxRQUFHLEtBQUtqQyxVQUFSLEVBQW1CO0FBQ2YsWUFBTztBQUFFdUIsMEJBQWtCLEVBQUVuQjtBQUF0QixVQUE4QjZCLEtBQXJDOztBQUNBLFdBQUssSUFBSW5CLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUVrQixXQUFXLENBQUNqQixNQUEvQixFQUF1Q0QsQ0FBQyxFQUF4QyxFQUEyQztBQUN6QyxhQUFLYixRQUFMLENBQWN5QixJQUFkLENBQW9CTSxXQUFXLENBQUNsQixDQUFELENBQS9CO0FBQ0Q7O0FBQ0RvQiwwQkFBb0IsQ0FBQyxLQUFLaEMsV0FBTixDQUFwQjtBQUVBLFdBQUtBLFdBQUwsR0FBbUJpQyxxQkFBcUIsQ0FBQyxNQUFNO0FBQy9DLGFBQUtoQyxTQUFMLENBQWVDLEdBQWY7QUFDQyxPQUZ1QyxDQUF4QztBQUdIO0FBQ0Y7O0FBY0RnQyxPQUFLLENBQUNKLFdBQUQsRUFBMkI7QUFBQ0s7QUFBRCxHQUEzQixFQUF5RDtBQUM1REYseUJBQXFCLENBQUMsTUFBTTtBQUMxQixXQUFLbkMsVUFBTCxHQUFrQixLQUFsQjtBQUNBLFdBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQW9DLGdCQUFVO0FBQ1gsS0FKb0IsQ0FBckI7QUFLRDs7QUE3RHdDIiwiZmlsZSI6IjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQ2FudmFzQ29udGV4dCB9IGZyb20gXCIuLi8uLi8uLi9wY2FudmFzL3BjYW52YXMuY29udGV4dFwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsL2RhdGEvVmVjdG9yMlwiO1xuaW1wb3J0IHsgQnJ1c2hUeXBlLCBCcnVzaFN0YXR1cywgQWJzdHJhY3RCcnVzaCB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICog5bim5Y6L5oSf55qEYnJ1c2jvvIxidWflvoXkv67lpI0uXG4gKiDmoLnmja7np7vliqjvvIzkuI5jb250ZXh0LCDmjqfliLbnlLvlh7rnmoTlvaLnirblubbloavlhYUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCcnVzaCAgaW1wbGVtZW50cyBBYnN0cmFjdEJydXNoIHtcblxuXG4gICAgcmVhZG9ubHkgdHlwZTogQnJ1c2hUeXBlID0gQnJ1c2hUeXBlLnBlblxuXG4gICAgcmVhZG9ubHkgbmFtZSA9ICdkZWZhdWx0J1xuXG4gICAgcHJvdGVjdGVkIGlzUGFpbnRpbmcgPSBmYWxzZVxuXG4gICAgcHJvdGVjdGVkIHBhdGhMaXN0OiBWZWN0b3IyW10gPSBbXVxuXG4gICAgcHJvdGVjdGVkIGFuaW1lSGFuZGxlOiBudW1iZXJcblxuICAgIGluaXQoKXt9XG5cbiAgICBkZXN0b3J5KCl7fVxuXG4gICAgb25TdGFydChzdGF0dXM6IEJydXNoU3RhdHVzLCBjb250ZXh0OiBQQ2FudmFzQ29udGV4dCkge1xuICAgICAgICBjb25zdCB7Y3VyQ2FudmFzQ29udGV4dDJEOiBjdHgsIGNvbG9yLCBicnVzaFdpZHRofSA9IGNvbnRleHRcbiAgICAgICAgdGhpcy5pc1BhaW50aW5nID0gdHJ1ZVxuICAgICAgICB0aGlzLnBhdGhMaXN0LnB1c2goc3RhdHVzKVxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvclxuICAgICAgICBjdHgubGluZVdpZHRoID0gYnJ1c2hXaWR0aFxuICAgICAgICBjdHgubGluZUNhcCA9J3JvdW5kJ1xuICAgICAgICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XG4gICAgfVxuXG4gIFxuXG4gICAgb25EcmF3KGJydXNoU3RhdHVzOiBCcnVzaFN0YXR1c1tdLCBjb250eDogUENhbnZhc0NvbnRleHQpOiB2b2lkIHtcbiAgICAgIGlmKHRoaXMuaXNQYWludGluZyl7XG4gICAgICAgICAgY29uc3QgIHsgY3VyQ2FudmFzQ29udGV4dDJEOiBjdHggfSA9IGNvbnR4XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8IGJydXNoU3RhdHVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHRoaXMucGF0aExpc3QucHVzaCggYnJ1c2hTdGF0dXNbaV0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWVIYW5kbGUpXG5cbiAgICAgICAgICB0aGlzLmFuaW1lSGFuZGxlID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBhaW50UGF0aChjdHgpO1xuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHBhaW50UGF0aCA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4ge1xuICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KVxuICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICBjb25zdCBmID0gdGhpcy5wYXRoTGlzdFswXVxuICAgICAgY3R4Lm1vdmVUbyhmLngsIGYueSApXG4gICAgICBmb3IoIGxldCBpID0xOyBpPCB0aGlzLnBhdGhMaXN0Lmxlbmd0aDsgaSsrICl7XG4gICAgICAgIGNvbnN0IHt4LCB5fSA9IHRoaXMucGF0aExpc3RbaV1cbiAgICAgICAgY3R4LmxpbmVUbyh4LHkpXG4gICAgICB9XG4gICAgICBjdHguc3Ryb2tlKClcbiAgICB9XG5cbiAgICBvbkVuZChicnVzaFN0YXR1czogQnJ1c2hTdGF0dXMsIHtvbkJydXNoRW5kfTogUENhbnZhc0NvbnRleHQpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNQYWludGluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMucGF0aExpc3QgPSBbXVxuICAgICAgICBvbkJydXNoRW5kKClcbiAgICAgIH0pXG4gICAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')},45:function(module,exports,__webpack_require__){eval('// extracted by mini-css-extract-plugin\nmodule.exports = {"pCanvas":"pCanvas_efb40","mask":"mask_d19cf","canvasWrap":"canvasWrap_4e8dd","unvisible":"unvisible_0b5e4","cover":"cover_edb6c"};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9zdHlsZS5sZXNzP2E0MTQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQkFBa0IiLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wicENhbnZhc1wiOlwicENhbnZhc19lZmI0MFwiLFwibWFza1wiOlwibWFza19kMTljZlwiLFwiY2FudmFzV3JhcFwiOlwiY2FudmFzV3JhcF80ZThkZFwiLFwidW52aXNpYmxlXCI6XCJ1bnZpc2libGVfMGI1ZTRcIixcImNvdmVyXCI6XCJjb3Zlcl9lZGI2Y1wifTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///45\n')},47:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return createCanvas; });\n/* unused harmony export setContent */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return copyCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return createImageByFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return toBlob; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return emptyUrl; });\n/* harmony import */ var lodash_uniqueId__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48);\n/* harmony import */ var lodash_uniqueId__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_uniqueId__WEBPACK_IMPORTED_MODULE_0__);\n\nconst createCanvas = (width = 0, height = 0, background) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  canvas.setAttribute('uuid', lodash_uniqueId__WEBPACK_IMPORTED_MODULE_0___default()('canvasId-'));\n  const ctx = canvas.getContext('2d');\n\n  if (ctx) {\n    if (background) {\n      ctx.fillStyle = background.toRGBAString();\n      ctx.fillRect(0, 0, width, height);\n    }\n  }\n\n  return canvas;\n};\nconst setContent = (des, source) => {\n  const ctx = des.getContext('2d');\n  console.log(source.width, source.height);\n  ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(source, 0, 0);\n};\nconst copyCanvas = canvas => {\n  const newC = document.createElement('canvas');\n  newC.width = canvas.width;\n  newC.height = canvas.height;\n  const ctx = newC.getContext('2d');\n\n  if (ctx) {\n    ctx.imageSmoothingEnabled = false;\n    ctx.clearRect(0, 0, newC.width, newC.height);\n    ctx.drawImage(canvas, 0, 0, canvas.width, canvas.height);\n  }\n\n  return newC;\n};\nconst deCodeImageTask = [];\nlet decodingNumber = 0;\n\nconst handleDecodeTask = async () => {\n  if (decodingNumber < 1) {\n    let task = deCodeImageTask.shift();\n\n    while (task) {\n      decodingNumber++;\n      const {\n        file,\n        cb\n      } = task;\n      const img = new Image();\n      img.src = URL.createObjectURL(file);\n\n      try {\n        await img.decode();\n      } catch (e) {\n        console.error(e, 'img decode error', e.message);\n      }\n\n      URL.revokeObjectURL(img.src);\n      cb(img);\n      decodingNumber--;\n      task = deCodeImageTask.shift(); // console.log(decodingNumber,deCodeImageTask.length )\n    }\n  }\n};\n/**\n * 由于浏览器img解码内存限制，控制解码的并发.\n * @param canvasFile \n */\n\n\nconst createImageByFile = async canvasFile => {\n  return new Promise(cb => {\n    deCodeImageTask.push({\n      file: canvasFile,\n      cb\n    });\n    handleDecodeTask();\n  });\n};\nconst toBlob = canvas => {\n  return new Promise(resolve => {\n    canvas.toBlob(resolve, 'image/png', 1);\n  });\n};\n\nlet _emptyUrl = () => {\n  const canvas = createCanvas(0, 0);\n  const str = canvas.toDataURL();\n\n  _emptyUrl = () => str;\n\n  return _emptyUrl();\n};\n\nconst emptyUrl = () => {\n  return _emptyUrl();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9jYW52YXMudHM/OWQwMiJdLCJuYW1lcyI6WyJjcmVhdGVDYW52YXMiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmQiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjdHgiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwidG9SR0JBU3RyaW5nIiwiZmlsbFJlY3QiLCJzZXRDb250ZW50IiwiZGVzIiwic291cmNlIiwiY29uc29sZSIsImxvZyIsImRyYXdJbWFnZSIsImNvcHlDYW52YXMiLCJuZXdDIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiY2xlYXJSZWN0IiwiZGVDb2RlSW1hZ2VUYXNrIiwiZGVjb2RpbmdOdW1iZXIiLCJoYW5kbGVEZWNvZGVUYXNrIiwidGFzayIsInNoaWZ0IiwiZmlsZSIsImNiIiwiaW1nIiwiSW1hZ2UiLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJkZWNvZGUiLCJlIiwiZXJyb3IiLCJtZXNzYWdlIiwicmV2b2tlT2JqZWN0VVJMIiwiY3JlYXRlSW1hZ2VCeUZpbGUiLCJjYW52YXNGaWxlIiwiUHJvbWlzZSIsInB1c2giLCJ0b0Jsb2IiLCJyZXNvbHZlIiwiX2VtcHR5VXJsIiwic3RyIiwidG9EYXRhVVJMIiwiZW1wdHlVcmwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUlPLE1BQU1BLFlBQVksR0FBRyxDQUFDQyxLQUFLLEdBQUcsQ0FBVCxFQUFZQyxNQUFNLEdBQUUsQ0FBcEIsRUFBdUJDLFVBQXZCLEtBQTZDO0FBQ3JFLFFBQU1DLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFFBQXZCLENBQWY7QUFDQUYsUUFBTSxDQUFDSCxLQUFQLEdBQWVBLEtBQWY7QUFDQUcsUUFBTSxDQUFDRixNQUFQLEdBQWdCQSxNQUFoQjtBQUNBRSxRQUFNLENBQUNHLFlBQVAsQ0FBb0IsTUFBcEIsRUFBNEIsdURBQVMsV0FB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QUFDekNOLG1CQUFlLENBQUNvQixJQUFoQixDQUFzQjtBQUFDZixVQUFJLEVBQUNhLFVBQU47QUFBa0JaO0FBQWxCLEtBQXRCO0FBQ0FKLG9CQUFnQjtBQUNqQixHQUhNLENBQVA7QUFLRCxDQU5NO0FBU0EsTUFBTW1CLE1BQU0sR0FBSXhDLE1BQUQsSUFBK0I7QUFDakQsU0FBTyxJQUFJc0MsT0FBSixDQUF5QkcsT0FBTyxJQUFJO0FBQ3ZDekMsVUFBTSxDQUFDd0MsTUFBUCxDQUFjQyxPQUFkLEVBQXVCLFdBQXZCLEVBQW9DLENBQXBDO0FBQ0gsR0FGTSxDQUFQO0FBR0gsQ0FKTTs7QUFNUCxJQUFJQyxTQUFTLEdBQUcsTUFBYTtBQUN6QixRQUFNMUMsTUFBTSxHQUFHSixZQUFZLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBM0I7QUFDQSxRQUFNK0MsR0FBRyxHQUFJM0MsTUFBTSxDQUFDNEMsU0FBUCxFQUFiOztBQUNBRixXQUFTLEdBQUcsTUFBTUMsR0FBbEI7O0FBQ0EsU0FBT0QsU0FBUyxFQUFoQjtBQUNILENBTEQ7O0FBT08sTUFBTUcsUUFBUSxHQUFHLE1BQU07QUFDM0IsU0FBT0gsU0FBUyxFQUFoQjtBQUNGLENBRk0iLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSR0JBIH0gZnJvbSBcIi4uL3BhZ2VzL3BhaW50L3RvcC10b29sLWJhci90b29sLWl0ZW0vY29sb3Itc2VsZWN0b3IvcmdiYVwiXG5pbXBvcnQge3VuaXF1ZUlkfSBmcm9tICdsb2Rhc2gnXG5cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhbnZhcyA9ICh3aWR0aCA9IDAsIGhlaWdodCA9MCwgYmFja2dyb3VuZD86IFJHQkEpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodFxuICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3V1aWQnLCB1bmlxdWVJZCgnY2FudmFzSWQtJykpXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIGlmKGN0eCl7XG4gICAgICAgICAgICBpZihiYWNrZ3JvdW5kKXtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZC50b1JHQkFTdHJpbmcoKVxuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgcmV0dXJuIGNhbnZhc1xufVxuXG5leHBvcnQgY29uc3Qgc2V0Q29udGVudCA9IChkZXM6IEhUTUxDYW52YXNFbGVtZW50LCBzb3VyY2U6IEhUTUxDYW52YXNFbGVtZW50fCBIVE1MSW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY3R4ID0gZGVzLmdldENvbnRleHQoJzJkJylcbiAgICBjb25zb2xlLmxvZyhzb3VyY2Uud2lkdGgsIHNvdXJjZS5oZWlnaHQpXG4gICAgY3R4Py5kcmF3SW1hZ2Uoc291cmNlLCAwLCAwKVxufVxuXG5leHBvcnQgY29uc3QgY29weUNhbnZhcyA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50fCBIVE1MSW1hZ2VFbGVtZW50KSA9PntcbiAgICBjb25zdCBuZXdDID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICBuZXdDLndpZHRoID0gY2FudmFzLndpZHRoXG4gICAgbmV3Qy5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0XG4gICAgY29uc3QgY3R4ID0gbmV3Qy5nZXRDb250ZXh0KCcyZCcpXG4gICAgaWYoY3R4KXtcbiAgICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZVxuICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsIG5ld0Mud2lkdGgsIG5ld0MuaGVpZ2h0KVxuICAgICAgY3R4LmRyYXdJbWFnZShjYW52YXMsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodClcbiAgICB9XG4gIFxuICAgIHJldHVybiBuZXdDO1xufVxuXG5jb25zdCBkZUNvZGVJbWFnZVRhc2s6IHtmaWxlOkZpbGUsIGNiOiAoaW1nOkhUTUxJbWFnZUVsZW1lbnQpID0+IHZvaWR9W10gID0gW11cbmxldCBkZWNvZGluZ051bWJlciA9IDBcblxuXG5jb25zdCBoYW5kbGVEZWNvZGVUYXNrID0gYXN5bmMgKCkgPT4ge1xuICBpZihkZWNvZGluZ051bWJlcjwxKXtcbiAgICBsZXQgdGFzayA9IGRlQ29kZUltYWdlVGFzay5zaGlmdCgpXG4gICAgd2hpbGUodGFzayl7XG4gICAgICBkZWNvZGluZ051bWJlcisrXG4gICAgICBjb25zdCB7IGZpbGUsIGNiIH0gPSB0YXNrXG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKVxuICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSlcbiAgICAgIHRyeXtcbiAgICAgICAgYXdhaXQgaW1nLmRlY29kZSgpXG4gICAgICB9Y2F0Y2goZSl7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSwgJ2ltZyBkZWNvZGUgZXJyb3InLCBlLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGltZy5zcmMpXG4gICAgICBjYihpbWcpXG4gICAgICBkZWNvZGluZ051bWJlci0tXG4gICAgICB0YXNrID0gZGVDb2RlSW1hZ2VUYXNrLnNoaWZ0KClcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRlY29kaW5nTnVtYmVyLGRlQ29kZUltYWdlVGFzay5sZW5ndGggKVxuICAgIH1cbiAgICBcbiAgfVxufVxuLyoqXG4gKiDnlLHkuo7mtY/op4jlmahpbWfop6PnoIHlhoXlrZjpmZDliLbvvIzmjqfliLbop6PnoIHnmoTlubblj5EuXG4gKiBAcGFyYW0gY2FudmFzRmlsZSBcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUltYWdlQnlGaWxlID0gYXN5bmMgKGNhbnZhc0ZpbGU6IEZpbGUpICA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PihjYiA9PiB7XG4gICAgZGVDb2RlSW1hZ2VUYXNrLnB1c2goIHtmaWxlOmNhbnZhc0ZpbGUsIGNifSApXG4gICAgaGFuZGxlRGVjb2RlVGFzaygpXG4gIH0pXG4gICAgXG59XG5cblxuZXhwb3J0IGNvbnN0IHRvQmxvYiA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPEJsb2IgfCBudWxsPihyZXNvbHZlID0+IHtcbiAgICAgICAgY2FudmFzLnRvQmxvYihyZXNvbHZlLCAnaW1hZ2UvcG5nJywgMSlcbiAgICB9KVxufVxuXG5sZXQgX2VtcHR5VXJsID0gKCk6c3RyaW5nID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBjcmVhdGVDYW52YXMoMCwwKVxuICAgIGNvbnN0IHN0ciA9ICBjYW52YXMudG9EYXRhVVJMKClcbiAgICBfZW1wdHlVcmwgPSAoKSA9PiBzdHJcbiAgICByZXR1cm4gX2VtcHR5VXJsKClcbn1cblxuZXhwb3J0IGNvbnN0IGVtcHR5VXJsID0gKCkgPT4ge1xuICAgcmV0dXJuIF9lbXB0eVVybCgpXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///47\n")},59:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* binding */ workStorage_WorkStorage; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* reexport */ work_data_WorkDetail; });\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* reexport */ work_data_LayerDetail; });\n\n// UNUSED EXPORTS: WorkDetailDesFile, WorkInfo\n\n// EXTERNAL MODULE: ./node_modules/lodash/isNumber.js\nvar isNumber = __webpack_require__(60);\nvar isNumber_default = /*#__PURE__*/__webpack_require__.n(isNumber);\n\n// EXTERNAL MODULE: ./node_modules/lodash/uniqueId.js\nvar uniqueId = __webpack_require__(48);\nvar uniqueId_default = /*#__PURE__*/__webpack_require__.n(uniqueId);\n\n// EXTERNAL MODULE: ./src/pages/paint/top-tool-bar/tool-item/color-selector/rgba.ts\nvar rgba = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./src/util/canvas.ts\nvar util_canvas = __webpack_require__(47);\n\n// CONCATENATED MODULE: ./src/workStorage/work-data.ts\n\n\n\n/**\n * 作品的描述信息.\n */\n\nclass work_data_WorkInfo {\n  constructor(width, height, name = '', thumbnail, createTime = Date.now(), updateTime = Date.now(), workId = uniqueId_default()(`work_${Date.now()}_`)) {\n    this.width = width;\n    this.height = height;\n    this.name = name;\n    this.thumbnail = thumbnail;\n    this.createTime = createTime;\n    this.updateTime = updateTime;\n    this.workId = workId;\n  }\n\n}\n/**\n * 作品的全部信息.\n */\n\nclass work_data_WorkDetail {\n  constructor(workInfo, layers = []) {\n    this.workInfo = workInfo;\n    this.layers = layers;\n  }\n  /**\n  * \n  * @param width \n  * @param height \n  * @param background \n  */\n\n\n  static createEmpty(width, height, background) {\n    const workInfo = new work_data_WorkInfo(width, height, 'new work', Object(util_canvas[\"d\" /* emptyUrl */])());\n    const layers = [];\n    layers.push(work_data_LayerDetail.create(workInfo, rgba[\"RGBA\"].WHITE));\n    return new work_data_WorkDetail(workInfo, layers);\n  }\n\n} // export enum  LayerDetailType{\n//     TEMP_COVER= 1,\n//     NORMAL = 2,\n// }\n\n/**\n * 作品的图层信息.\n */\n\nclass work_data_LayerDetail {\n  constructor(canvas, name = 'new layer', visible = true, layerId = uniqueId_default()(`layer-${Date.now()}-`)) {\n    this.canvas = canvas;\n    this.name = name;\n    this.visible = visible;\n    this.layerId = layerId;\n  }\n\n  static create({\n    width,\n    height\n  }, color) {\n    const canvas = Object(util_canvas[\"b\" /* createCanvas */])(width, height, color);\n    const layer = new work_data_LayerDetail(canvas);\n    canvas.setAttribute('layerId', layer.layerId);\n    return layer;\n  }\n\n}\n// EXTERNAL MODULE: ./src/workStorage/file-system/index.ts\nvar file_system = __webpack_require__(15);\n\n// CONCATENATED MODULE: ./src/workStorage/index.ts\n\n\n\n\n\nconst getLayerPath = (workId, layerId) => layerId ? `layers/${workId}/${layerId}.png` : `layers/${workId}`;\n\nconst getThumbnailPath = workId => `thumbnail/${workId}.png`; // export class WorkLayerFile {\n//     public workLayersId: string\n//     public workDetailFiles: WorkDetailFile[] = []\n//     constructor({ workLayersId, layers }: WorkLayers) {\n//         this.workLayersId = workLayersId\n//         layers.forEach(({ canvas, layerId, ...rest }) => {\n//             this.workDetailFiles.push({ ...rest, layerId, filePath:  getLayerPath(workLayersId, layerId)})\n//         })\n//     }\n// }\n\n\nclass WorkDetailDesFile {\n  constructor(workDetail) {\n    this.workInfo = void 0;\n    this.layers = void 0;\n    const {\n      workInfo,\n      layers\n    } = workDetail;\n    const {\n      thumbnail,\n      workId,\n      ...restWorkInfo\n    } = workInfo;\n    this.workInfo = {\n      workId,\n      ...restWorkInfo,\n      thumbnail: getThumbnailPath(workId)\n    };\n    this.layers = layers.map(({\n      canvas,\n      layerId,\n      ...rest\n    }) => ({\n      layerId,\n      ...rest,\n      canvas: getLayerPath(workId, layerId)\n    }));\n  }\n\n}\n/**\n * 对作品的持久化存储操作的中间接口.\n * des: workinfo:\n *      content:  \n */\n\nclass workStorage_WorkStorage {\n  /**\n   * 添加作品.\n   * @param workedetail \n   */\n  static async saveWork(workedetail) {\n    if (!workedetail) return;\n    console.time('saveWork');\n    const desFileDate = new WorkDetailDesFile(workedetail);\n    await this.saveWorkInfo(desFileDate);\n    const canvasFileList = this.getCanvasFileList(workedetail, desFileDate);\n\n    for (let i = 0; i < canvasFileList.length; i++) {\n      const {\n        path,\n        canvas\n      } = canvasFileList[i];\n      const data = await Object(util_canvas[\"e\" /* toBlob */])(canvas);\n\n      if (data) {\n        await file_system[\"a\" /* FileApi */].save({\n          type: 'image/png',\n          path,\n          data\n        });\n      }\n    }\n\n    console.timeEnd('saveWork');\n  }\n\n  static async saveWorkInfo(desFileDate) {\n    await file_system[\"a\" /* FileApi */].save({\n      type: 'application/json',\n      path: `${desFileDate.workInfo.workId}.json`,\n      data: JSON.stringify(desFileDate)\n    });\n  }\n\n  static getCanvasFileList(workedetail, desFileDate) {\n    const {\n      layers\n    } = workedetail;\n    const {\n      layers: desLayers\n    } = desFileDate;\n    const thumbnail = {\n      path: desFileDate.workInfo.thumbnail,\n      canvas: this.combimeCanvas(100, 100, layers.map(({\n        canvas\n      }) => canvas))\n    };\n    const canvasFileList = [thumbnail];\n    layers.forEach(({\n      canvas\n    }, index) => {\n      canvasFileList.push({\n        canvas,\n        path: desLayers[index].canvas\n      });\n    });\n    return canvasFileList;\n  }\n\n  static combimeCanvas(width, height, canvasList) {\n    const canvas = Object(util_canvas[\"b\" /* createCanvas */])(width, height);\n    const ctx = canvas.getContext('2d');\n\n    if (ctx) {\n      for (let i = canvasList.length - 1; i > -1; i--) {\n        const canvas = canvasList[i];\n        ctx.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, width, height);\n      }\n    }\n\n    return canvas;\n  }\n  /**\n   * 删除作品.\n   * @param workId \n   */\n\n\n  static async saveLayerDetail(workId, layer, index) {\n    const {\n      canvas,\n      layerId,\n      ...rest\n    } = layer;\n    const img = await Object(util_canvas[\"e\" /* toBlob */])(canvas);\n    if (!img) return;\n    file_system[\"a\" /* FileApi */].save({\n      type: 'image/png',\n      path: getLayerPath(workId, layerId),\n      data: img\n    });\n    const [file] = await file_system[\"a\" /* FileApi */].get(`${workId}.json`, {\n      isDir: false\n    });\n    const workDetailDesFile = JSON.parse((await file.text()));\n    const layertDetail = workDetailDesFile.layers.find(({\n      layerId: id\n    }) => id === layerId);\n\n    if (!layertDetail && isNumber_default()(index)) {\n      workDetailDesFile.layers.splice(index, 0, {\n        canvas: getLayerPath(workId, layerId),\n        layerId,\n        ...rest\n      });\n      await this.saveWorkInfo(workDetailDesFile);\n    }\n\n    if (layertDetail && isNumber_default()(index)) {\n      throw 'add layer fail: ' + layerId;\n    } // TODO update workInfo\n\n  }\n\n  static async removeWork(layerDetail) {} //TODO  Implement.\n\n  /**\n   * 更新作品的内容, 此时会自动更新 WorkInfo 的 updateTime.\n   */\n\n\n  static async updateLayerDetail(workId, layerdetails) {} //TODO  Implement.\n\n  /**\n   * 根据作品id获取指定作品的所有信息.\n   * \n   * @param workId 作品ID.\n   */\n\n\n  static async getWorkDetail(workId) {\n    console.time('getWorkDetail');\n    const [file] = await file_system[\"a\" /* FileApi */].get(`${workId}.json`, {\n      isDir: false\n    });\n    const text = await file.text();\n    const {\n      workInfo,\n      layers\n    } = JSON.parse(text);\n    const workLayers = [];\n    const canvasFileMap = (await file_system[\"a\" /* FileApi */].get(getLayerPath(workId), {\n      isDir: true\n    })).reduce((map, file) => ({ ...map,\n      [file.name]: file\n    }), {});\n    const infoList = [];\n\n    for (let i = 0; i < layers.length; i++) {\n      const {\n        layerId,\n        visible,\n        name\n      } = layers[i];\n      const canvasFile = canvasFileMap[`${layerId}.png`];\n\n      if (canvasFile) {\n        try {\n          const img = await Object(util_canvas[\"c\" /* createImageByFile */])(canvasFile);\n          const canvas = Object(util_canvas[\"a\" /* copyCanvas */])(img);\n          infoList.push({\n            canvas,\n            name,\n            visible,\n            layerId\n          });\n        } catch (e) {\n          console.error(layerId, 'decode failed');\n        }\n      } else {\n        console.error('no match file' + layerId);\n      }\n    }\n\n    infoList.forEach(({\n      canvas,\n      name,\n      visible,\n      layerId\n    }, index) => {\n      const layerDetail = new work_data_LayerDetail(canvas, name, visible, layerId);\n      workLayers.push(layerDetail);\n    });\n    console.timeEnd('getWorkDetail');\n    return new work_data_WorkDetail(workInfo, workLayers);\n  }\n  /**\n   * 获取作品描述信息列表.\n   */\n\n\n  static async getWorkList() {\n    console.time('getWorkList');\n    let workInfoList;\n    const [textFileList, imgFileList] = await Promise.all([file_system[\"a\" /* FileApi */].get('', {\n      isDir: true\n    }), file_system[\"a\" /* FileApi */].get('thumbnail', {\n      isDir: true\n    })]);\n    const textList = await Promise.all(textFileList.map(textFile => textFile.text()));\n    workInfoList = textList.map(text => {\n      const {\n        workInfo: {\n          thumbnail,\n          workId,\n          ...rest\n        }\n      } = JSON.parse(text);\n      return { ...rest,\n        workId,\n        thumbnail: URL.createObjectURL(imgFileList.find(({\n          name\n        }) => name === `${workId}.png`))\n      };\n    });\n    console.timeEnd('getWorkList');\n    return workInfoList;\n  }\n\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvd29ya1N0b3JhZ2Uvd29yay1kYXRhLnRzP2VkMGQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dvcmtTdG9yYWdlL2luZGV4LnRzPzJjZGEiXSwibmFtZXMiOlsiV29ya0luZm8iLCJjb25zdHJ1Y3RvciIsIndpZHRoIiwiaGVpZ2h0IiwibmFtZSIsInRodW1ibmFpbCIsImNyZWF0ZVRpbWUiLCJEYXRlIiwibm93IiwidXBkYXRlVGltZSIsIndvcmtJZCIsIldvcmtEZXRhaWwiLCJ3b3JrSW5mbyIsImxheWVycyIsImNyZWF0ZUVtcHR5IiwiYmFja2dyb3VuZCIsImVtcHR5VXJsIiwicHVzaCIsIkxheWVyRGV0YWlsIiwiY3JlYXRlIiwiUkdCQSIsIldISVRFIiwiY2FudmFzIiwidmlzaWJsZSIsImxheWVySWQiLCJjb2xvciIsImNyZWF0ZUNhbnZhcyIsImxheWVyIiwic2V0QXR0cmlidXRlIiwiZ2V0TGF5ZXJQYXRoIiwiZ2V0VGh1bWJuYWlsUGF0aCIsIldvcmtEZXRhaWxEZXNGaWxlIiwid29ya0RldGFpbCIsInJlc3RXb3JrSW5mbyIsIm1hcCIsInJlc3QiLCJXb3JrU3RvcmFnZSIsInNhdmVXb3JrIiwid29ya2VkZXRhaWwiLCJjb25zb2xlIiwidGltZSIsImRlc0ZpbGVEYXRlIiwic2F2ZVdvcmtJbmZvIiwiY2FudmFzRmlsZUxpc3QiLCJnZXRDYW52YXNGaWxlTGlzdCIsImkiLCJsZW5ndGgiLCJwYXRoIiwiZGF0YSIsInRvQmxvYiIsIkZpbGVBcGkiLCJzYXZlIiwidHlwZSIsInRpbWVFbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVzTGF5ZXJzIiwiY29tYmltZUNhbnZhcyIsImZvckVhY2giLCJpbmRleCIsImNhbnZhc0xpc3QiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwic2F2ZUxheWVyRGV0YWlsIiwiaW1nIiwiZmlsZSIsImdldCIsImlzRGlyIiwid29ya0RldGFpbERlc0ZpbGUiLCJwYXJzZSIsInRleHQiLCJsYXllcnREZXRhaWwiLCJmaW5kIiwiaWQiLCJzcGxpY2UiLCJyZW1vdmVXb3JrIiwibGF5ZXJEZXRhaWwiLCJ1cGRhdGVMYXllckRldGFpbCIsImxheWVyZGV0YWlscyIsImdldFdvcmtEZXRhaWwiLCJ3b3JrTGF5ZXJzIiwiY2FudmFzRmlsZU1hcCIsInJlZHVjZSIsImluZm9MaXN0IiwiY2FudmFzRmlsZSIsImNyZWF0ZUltYWdlQnlGaWxlIiwiY29weUNhbnZhcyIsImUiLCJlcnJvciIsImdldFdvcmtMaXN0Iiwid29ya0luZm9MaXN0IiwidGV4dEZpbGVMaXN0IiwiaW1nRmlsZUxpc3QiLCJQcm9taXNlIiwiYWxsIiwidGV4dExpc3QiLCJ0ZXh0RmlsZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUdBOzs7O0FBR08sTUFBTUEsa0JBQU4sQ0FBeUI7QUFFNUJDLGFBQVcsQ0FDQUMsS0FEQSxFQUVBQyxNQUZBLEVBR0FDLElBQVksR0FBRyxFQUhmLEVBSUFDLFNBSkEsRUFLQUMsVUFBa0IsR0FBR0MsSUFBSSxDQUFDQyxHQUFMLEVBTHJCLEVBTUFDLFVBQWtCLEdBQUdGLElBQUksQ0FBQ0MsR0FBTCxFQU5yQixFQU9TRSxNQUFNLEdBQUcsbUJBQVUsUUFBT0gsSUFBSSxDQUFDQyxHQUFMLEVBQVcsR0FBNUIsQ0FQbEIsRUFRVjtBQUFBLFNBUFVOLEtBT1YsR0FQVUEsS0FPVjtBQUFBLFNBTlVDLE1BTVYsR0FOVUEsTUFNVjtBQUFBLFNBTFVDLElBS1YsR0FMVUEsSUFLVjtBQUFBLFNBSlVDLFNBSVYsR0FKVUEsU0FJVjtBQUFBLFNBSFVDLFVBR1YsR0FIVUEsVUFHVjtBQUFBLFNBRlVHLFVBRVYsR0FGVUEsVUFFVjtBQUFBLFNBRG1CQyxNQUNuQixHQURtQkEsTUFDbkI7QUFBRTs7QUFWeUI7QUFhaEM7Ozs7QUFHTyxNQUFNQyxvQkFBTixDQUFzQztBQUV6Q1YsYUFBVyxDQUNBVyxRQURBLEVBRUFD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QyxlQUFKLENBQW9CTixXQUFXLENBQUNwQixJQUFaLENBQWtCLENBQUM7QUFBQ3JFO0FBQUQsU0FBRCxLQUFZQSxJQUFJLEtBQU0sR0FBRU0sTUFBTyxNQUFqRCxDQUFwQjtBQUhULE9BQVA7QUFLRixLQVBlLENBQWhCO0FBUUE2QixXQUFPLENBQUNjLE9BQVIsQ0FBZ0IsYUFBaEI7QUFDQSxXQUFPc0MsWUFBUDtBQUNIOztBQWpLNEIiLCJmaWxlIjoiNTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1bmlxdWVJZCB9IGZyb20gJ2xvZGFzaCdcbmltcG9ydCB7IFJHQkEgfSBmcm9tICcuLi9wYWdlcy9wYWludC90b3AtdG9vbC1iYXIvdG9vbC1pdGVtL2NvbG9yLXNlbGVjdG9yL3JnYmEnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzLCBlbXB0eVVybCB9IGZyb20gJy4uL3V0aWwvY2FudmFzJztcblxuXG4vKipcbiAqIOS9nOWTgeeahOaPj+i/sOS/oeaBry5cbiAqL1xuZXhwb3J0IGNsYXNzIFdvcmtJbmZvPFQ9c3RyaW5nPiB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHdpZHRoOiBudW1iZXIsXG4gICAgICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgcHVibGljIG5hbWU6IHN0cmluZyA9ICcnLCBcbiAgICAgICAgcHVibGljIHRodW1ibmFpbDogVCxcbiAgICAgICAgcHVibGljIGNyZWF0ZVRpbWU6IG51bWJlciA9IERhdGUubm93KCksXG4gICAgICAgIHB1YmxpYyB1cGRhdGVUaW1lOiBudW1iZXIgPSBEYXRlLm5vdygpLFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgd29ya0lkID0gdW5pcXVlSWQoYHdvcmtfJHtEYXRlLm5vdygpfV9gKSxcbiAgICApe31cbn1cblxuLyoqXG4gKiDkvZzlk4HnmoTlhajpg6jkv6Hmga8uXG4gKi9cbmV4cG9ydCBjbGFzcyBXb3JrRGV0YWlsPFQ9SFRNTENhbnZhc0VsZW1lbnQ+IHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgd29ya0luZm86IFdvcmtJbmZvLFxuICAgICAgICBwdWJsaWMgbGF5ZXJzOiBMYXllckRldGFpbDxUPltdID0gW10sIFxuICAgICl7fVxuXG4gICAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gd2lkdGggXG4gICAgICogQHBhcmFtIGhlaWdodCBcbiAgICAgKiBAcGFyYW0gYmFja2dyb3VuZCBcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlRW1wdHkod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGJhY2tncm91bmQ6IFJHQkEpe1xuICAgICAgICBjb25zdCB3b3JrSW5mbyA9IG5ldyBXb3JrSW5mbyh3aWR0aCxoZWlnaHQsJ25ldyB3b3JrJywgZW1wdHlVcmwoKSApXG4gICAgICAgIGNvbnN0IGxheWVycyA9IFtdXG4gICAgICAgIGxheWVycy5wdXNoKExheWVyRGV0YWlsLmNyZWF0ZSh3b3JrSW5mbywgUkdCQS5XSElURSkpXG4gICAgICAgIHJldHVybiBuZXcgV29ya0RldGFpbCh3b3JrSW5mbyxsYXllcnMpXG4gICAgfVxufVxuXG4vLyBleHBvcnQgZW51bSAgTGF5ZXJEZXRhaWxUeXBle1xuXG4vLyAgICAgVEVNUF9DT1ZFUj0gMSxcbiAgICBcbi8vICAgICBOT1JNQUwgPSAyLFxuLy8gfVxuXG4vKipcbiAqIOS9nOWTgeeahOWbvuWxguS/oeaBry5cbiAqL1xuZXhwb3J0IGNsYXNzIExheWVyRGV0YWlsPFQ9SFRNTENhbnZhc0VsZW1lbnQ+IHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGNhbnZhczogVCxcblxuICAgICAgICBwdWJsaWMgbmFtZSA9ICduZXcgbGF5ZXInLFxuXG4gICAgICAgIHB1YmxpYyB2aXNpYmxlOiBib29sZWFuID0gdHJ1ZSxcblxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbGF5ZXJJZCA9IHVuaXF1ZUlkKGBsYXllci0ke0RhdGUubm93KCl9LWApXG5cbiAgICApe31cblxuICAgIHN0YXRpYyBjcmVhdGUoe3dpZHRoLCBoZWlnaHR9OiBQaWNrPFdvcmtJbmZvLCAnd2lkdGgnfCAnaGVpZ2h0Jz4sIGNvbG9yPzogUkdCQSl7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGNyZWF0ZUNhbnZhcyh3aWR0aCwgaGVpZ2h0LCBjb2xvcilcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXJEZXRhaWwoY2FudmFzKVxuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdsYXllcklkJywgbGF5ZXIubGF5ZXJJZClcbiAgICAgICAgcmV0dXJuIGxheWVyXG4gICAgfVxuXG59XG4iLCJpbXBvcnQgeyBXb3JrRGV0YWlsLCBXb3JrSW5mbywgTGF5ZXJEZXRhaWwgfSBmcm9tIFwiLi93b3JrLWRhdGFcIlxuaW1wb3J0IHsgRmlsZUFwaSB9IGZyb20gXCIuL2ZpbGUtc3lzdGVtXCJcbmltcG9ydCB7IGNyZWF0ZUNhbnZhcywgY3JlYXRlSW1hZ2VCeUZpbGUsIHRvQmxvYiwgY29weUNhbnZhcyB9IGZyb20gXCIuLi91dGlsL2NhbnZhc1wiXG5pbXBvcnQgeyBpc051bWJlciB9IGZyb20gXCJsb2Rhc2hcIlxuZXhwb3J0IHR5cGUgV29ya0RldGFpbEZpbGUgPSBPbWl0PExheWVyRGV0YWlsLCAnY2FudmFzJz4gJiB7IGZpbGVQYXRoOiBzdHJpbmcgfVxuXG5jb25zdCBnZXRMYXllclBhdGggPSAod29ya0lkOiBzdHJpbmcsIGxheWVySWQ/OnN0cmluZykgPT4gIGxheWVySWQ/IGBsYXllcnMvJHt3b3JrSWR9LyR7bGF5ZXJJZH0ucG5nYDogYGxheWVycy8ke3dvcmtJZH1gXG5cbmNvbnN0IGdldFRodW1ibmFpbFBhdGggPSAod29ya0lkOiBzdHJpbmcpID0+IGB0aHVtYm5haWwvJHt3b3JrSWR9LnBuZ2BcblxuLy8gZXhwb3J0IGNsYXNzIFdvcmtMYXllckZpbGUge1xuXG4vLyAgICAgcHVibGljIHdvcmtMYXllcnNJZDogc3RyaW5nXG5cbi8vICAgICBwdWJsaWMgd29ya0RldGFpbEZpbGVzOiBXb3JrRGV0YWlsRmlsZVtdID0gW11cblxuLy8gICAgIGNvbnN0cnVjdG9yKHsgd29ya0xheWVyc0lkLCBsYXllcnMgfTogV29ya0xheWVycykge1xuLy8gICAgICAgICB0aGlzLndvcmtMYXllcnNJZCA9IHdvcmtMYXllcnNJZFxuLy8gICAgICAgICBsYXllcnMuZm9yRWFjaCgoeyBjYW52YXMsIGxheWVySWQsIC4uLnJlc3QgfSkgPT4ge1xuLy8gICAgICAgICAgICAgdGhpcy53b3JrRGV0YWlsRmlsZXMucHVzaCh7IC4uLnJlc3QsIGxheWVySWQsIGZpbGVQYXRoOiAgZ2V0TGF5ZXJQYXRoKHdvcmtMYXllcnNJZCwgbGF5ZXJJZCl9KVxuLy8gICAgICAgICB9KVxuLy8gICAgIH1cbi8vIH1cblxuZXhwb3J0IGNsYXNzIFdvcmtEZXRhaWxEZXNGaWxlIHtcblxuICAgIHB1YmxpYyB3b3JrSW5mbzogV29ya0luZm9cblxuICAgIHB1YmxpYyBsYXllcnM6IExheWVyRGV0YWlsPHN0cmluZz5bXVxuXG4gICAgY29uc3RydWN0b3Iod29ya0RldGFpbDogV29ya0RldGFpbCkge1xuICAgICAgICBjb25zdCB7IHdvcmtJbmZvLCBsYXllcnMgfSA9IHdvcmtEZXRhaWxcbiAgICAgICAgY29uc3QgeyB0aHVtYm5haWwsIHdvcmtJZCwgLi4ucmVzdFdvcmtJbmZvIH0gPSB3b3JrSW5mb1xuICAgICAgICB0aGlzLndvcmtJbmZvID0geyB3b3JrSWQsIC4uLnJlc3RXb3JrSW5mbywgdGh1bWJuYWlsOiBnZXRUaHVtYm5haWxQYXRoKHdvcmtJZCkgfVxuICAgICAgICB0aGlzLmxheWVycyA9IGxheWVycy5tYXAoKHtjYW52YXMsIGxheWVySWQsIC4uLnJlc3QgfSk9Pih7IGxheWVySWQsIC4uLnJlc3QsIGNhbnZhczogZ2V0TGF5ZXJQYXRoKHdvcmtJZCwgbGF5ZXJJZCkgfSkgIClcbiAgICAgIH1cbn1cblxuXG4vKipcbiAqIOWvueS9nOWTgeeahOaMgeS5heWMluWtmOWCqOaTjeS9nOeahOS4remXtOaOpeWPoy5cbiAqIGRlczogd29ya2luZm86XG4gKiAgICAgIGNvbnRlbnQ6ICBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV29ya1N0b3JhZ2Uge1xuXG4gICAgLyoqXG4gICAgICog5re75Yqg5L2c5ZOBLlxuICAgICAqIEBwYXJhbSB3b3JrZWRldGFpbCBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgc2F2ZVdvcmsod29ya2VkZXRhaWw6IFdvcmtEZXRhaWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYoIXdvcmtlZGV0YWlsKSByZXR1cm5cbiAgICAgICAgY29uc29sZS50aW1lKCdzYXZlV29yaycpXG4gICAgICAgIGNvbnN0IGRlc0ZpbGVEYXRlID0gbmV3IFdvcmtEZXRhaWxEZXNGaWxlKHdvcmtlZGV0YWlsKVxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVXb3JrSW5mbyhkZXNGaWxlRGF0ZSlcbiAgICAgICAgY29uc3QgY2FudmFzRmlsZUxpc3QgPSB0aGlzLmdldENhbnZhc0ZpbGVMaXN0KHdvcmtlZGV0YWlsLCBkZXNGaWxlRGF0ZSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYW52YXNGaWxlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgeyBwYXRoLCBjYW52YXMgfSA9IGNhbnZhc0ZpbGVMaXN0W2ldXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdG9CbG9iKGNhbnZhcylcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgRmlsZUFwaS5zYXZlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ3NhdmVXb3JrJylcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgc2F2ZVdvcmtJbmZvKGRlc0ZpbGVEYXRlOiBXb3JrRGV0YWlsRGVzRmlsZSl7XG4gICAgICBhd2FpdCBGaWxlQXBpLnNhdmUoe1xuICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICBwYXRoOiBgJHtkZXNGaWxlRGF0ZS53b3JrSW5mby53b3JrSWR9Lmpzb25gLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRlc0ZpbGVEYXRlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldENhbnZhc0ZpbGVMaXN0KHdvcmtlZGV0YWlsOiBXb3JrRGV0YWlsLCBkZXNGaWxlRGF0ZTogV29ya0RldGFpbERlc0ZpbGUpIHtcbiAgICAgICAgY29uc3QgeyAgbGF5ZXJzICB9ID0gd29ya2VkZXRhaWxcbiAgICAgICAgY29uc3QgeyBsYXllcnM6IGRlc0xheWVycyB9ID0gZGVzRmlsZURhdGVcbiAgICAgICAgY29uc3QgdGh1bWJuYWlsID0ge1xuICAgICAgICAgICAgcGF0aDogZGVzRmlsZURhdGUud29ya0luZm8udGh1bWJuYWlsLFxuICAgICAgICAgICAgY2FudmFzOiB0aGlzLmNvbWJpbWVDYW52YXMoMTAwLCAxMDAsIGxheWVycy5tYXAoKHsgY2FudmFzIH0pID0+IGNhbnZhcykpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FudmFzRmlsZUxpc3Q6IHsgcGF0aDogc3RyaW5nLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IH1bXSA9IFt0aHVtYm5haWxdXG4gICAgICAgIGxheWVycy5mb3JFYWNoKCh7IGNhbnZhcyB9LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY2FudmFzRmlsZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgY2FudmFzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGRlc0xheWVyc1tpbmRleF0uY2FudmFzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gY2FudmFzRmlsZUxpc3RcbiAgICB9XG5cbiAgXG5cbiAgICBwcm90ZWN0ZWQgc3RhdGljIGNvbWJpbWVDYW52YXMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGNhbnZhc0xpc3Q6IEhUTUxDYW52YXNFbGVtZW50W10pIHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gY3JlYXRlQ2FudmFzKHdpZHRoLCBoZWlnaHQpXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIGlmIChjdHgpIHtcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IGNhbnZhc0xpc3QubGVuZ3RoLTE7IGk+IC0xOyBpLS0pe1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc0xpc3RbaV1cbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGNhbnZhcywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYW52YXNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliKDpmaTkvZzlk4EuXG4gICAgICogQHBhcmFtIHdvcmtJZCBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgc2F2ZUxheWVyRGV0YWlsKHdvcmtJZDogc3RyaW5nLCBsYXllcjogTGF5ZXJEZXRhaWwsIGluZGV4PzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICBjb25zdCB7Y2FudmFzLCBsYXllcklkLCAuLi5yZXN0fSA9IGxheWVyXG4gICAgICBjb25zdCBpbWcgPSBhd2FpdCB0b0Jsb2IoY2FudmFzKVxuICAgICAgICBpZighaW1nKSByZXR1cm5cbiAgICAgICAgRmlsZUFwaS5zYXZlKHsgXG4gICAgICAgICAgdHlwZTonaW1hZ2UvcG5nJyxcbiAgICAgICAgICBwYXRoOiBnZXRMYXllclBhdGgod29ya0lkLCBsYXllcklkKSxcbiAgICAgICAgICBkYXRhOiBpbWcsXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IFtmaWxlXSA9IGF3YWl0IEZpbGVBcGkuZ2V0KGAke3dvcmtJZH0uanNvbmAsIHtpc0RpcjogZmFsc2V9KVxuICAgICAgICBjb25zdCB3b3JrRGV0YWlsRGVzRmlsZTogV29ya0RldGFpbERlc0ZpbGUgPSBKU09OLnBhcnNlKCBhd2FpdCBmaWxlLnRleHQoKSApXG4gICAgICAgIGNvbnN0IGxheWVydERldGFpbCA9IHdvcmtEZXRhaWxEZXNGaWxlLmxheWVycy5maW5kKCh7bGF5ZXJJZDogaWR9KSA9PiBpZCA9PT0gbGF5ZXJJZClcbiAgICAgICAgaWYoIWxheWVydERldGFpbCYmIGlzTnVtYmVyKGluZGV4KSl7XG4gICAgICAgICAgd29ya0RldGFpbERlc0ZpbGUubGF5ZXJzLnNwbGljZShpbmRleCwgMCwgeyBjYW52YXM6IGdldExheWVyUGF0aCh3b3JrSWQsIGxheWVySWQpLCBsYXllcklkLCAuLi5yZXN0IH0gKVxuICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVdvcmtJbmZvKHdvcmtEZXRhaWxEZXNGaWxlKVxuICAgICAgICB9XG4gICAgICAgIGlmKGxheWVydERldGFpbCYmaXNOdW1iZXIoaW5kZXgpKXtcbiAgICAgICAgICB0aHJvdyAnYWRkIGxheWVyIGZhaWw6ICcgKyBsYXllcklkXG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPIHVwZGF0ZSB3b3JrSW5mb1xuICAgIH1cblxuICBcbiAgICBzdGF0aWMgYXN5bmMgcmVtb3ZlV29yayhsYXllckRldGFpbDogTGF5ZXJEZXRhaWwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy9UT0RPICBJbXBsZW1lbnQuXG4gICAgICBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmm7TmlrDkvZzlk4HnmoTlhoXlrrksIOatpOaXtuS8muiHquWKqOabtOaWsCBXb3JrSW5mbyDnmoQgdXBkYXRlVGltZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgdXBkYXRlTGF5ZXJEZXRhaWwod29ya0lkOiBzdHJpbmcsIGxheWVyZGV0YWlsczogTGF5ZXJEZXRhaWxbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvL1RPRE8gIEltcGxlbWVudC5cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOagueaNruS9nOWTgWlk6I635Y+W5oyH5a6a5L2c5ZOB55qE5omA5pyJ5L+h5oGvLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB3b3JrSWQg5L2c5ZOBSUQuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGdldFdvcmtEZXRhaWwod29ya0lkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtEZXRhaWw+IHtcbiAgICAgICAgY29uc29sZS50aW1lKCdnZXRXb3JrRGV0YWlsJylcbiAgICAgICAgY29uc3QgW2ZpbGVdID0gYXdhaXQgRmlsZUFwaS5nZXQoYCR7d29ya0lkfS5qc29uYCx7aXNEaXI6IGZhbHNlfSlcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpXG4gICAgICAgIGNvbnN0IHsgd29ya0luZm8sIGxheWVycyB9OiBXb3JrRGV0YWlsRGVzRmlsZSA9IEpTT04ucGFyc2UodGV4dClcbiAgICAgICAgY29uc3Qgd29ya0xheWVyczogTGF5ZXJEZXRhaWxbXSA9IFtdXG4gICAgICAgIGNvbnN0IGNhbnZhc0ZpbGVNYXA6IHtbaW5kZXg6IHN0cmluZ106IEZpbGV9ID0gKGF3YWl0IEZpbGVBcGkuZ2V0KGdldExheWVyUGF0aCh3b3JrSWQpLCB7IGlzRGlyOiB0cnVlfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgobWFwLCBmaWxlKSA9PiAoey4uLm1hcCwgW2ZpbGUubmFtZV06ZmlsZX0pLCB7fSlcbiAgICAgICAgY29uc3QgaW5mb0xpc3QgPSBbXVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgeyBsYXllcklkLCB2aXNpYmxlLCBuYW1lIH0gPSBsYXllcnNbaV1cbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc0ZpbGUgPSBjYW52YXNGaWxlTWFwW2Ake2xheWVySWR9LnBuZ2BdXG4gICAgICAgICAgICBpZihjYW52YXNGaWxlKXtcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBhd2FpdCBjcmVhdGVJbWFnZUJ5RmlsZShjYW52YXNGaWxlKVxuICAgICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gY29weUNhbnZhcyhpbWcpXG4gICAgICAgICAgICAgICAgICBpbmZvTGlzdC5wdXNoKHtjYW52YXMsIG5hbWUsIHZpc2libGUsIGxheWVySWR9KVxuICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobGF5ZXJJZCwgJ2RlY29kZSBmYWlsZWQnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ25vIG1hdGNoIGZpbGUnICsgbGF5ZXJJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpbmZvTGlzdC5mb3JFYWNoKCAoe2NhbnZhcywgbmFtZSwgdmlzaWJsZSwgbGF5ZXJJZCB9LCBpbmRleCkgPT4ge1xuICAgICAgICAgICBjb25zdCBsYXllckRldGFpbCA9IG5ldyBMYXllckRldGFpbCggY2FudmFzICwgbmFtZSwgdmlzaWJsZSwgbGF5ZXJJZClcbiAgICAgICAgICAgd29ya0xheWVycy5wdXNoKGxheWVyRGV0YWlsKVxuICAgICAgICB9KVxuICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ2dldFdvcmtEZXRhaWwnKVxuICAgICAgICByZXR1cm4gbmV3IFdvcmtEZXRhaWwod29ya0luZm8sIHdvcmtMYXllcnMpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5L2c5ZOB5o+P6L+w5L+h5oGv5YiX6KGoLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBnZXRXb3JrTGlzdCgpOiBQcm9taXNlPFdvcmtJbmZvW10+IHtcbiAgICAgICAgY29uc29sZS50aW1lKCdnZXRXb3JrTGlzdCcpXG4gICAgICAgIGxldCB3b3JrSW5mb0xpc3Q6IFdvcmtJbmZvW107XG4gICAgICAgIGNvbnN0IFt0ZXh0RmlsZUxpc3QsIGltZ0ZpbGVMaXN0XSA9YXdhaXQgUHJvbWlzZS5hbGwoW0ZpbGVBcGkuZ2V0KCcnLCB7aXNEaXI6IHRydWV9KSwgRmlsZUFwaS5nZXQoJ3RodW1ibmFpbCcsIHtpc0Rpcjp0cnVlfSldKVxuICAgICAgICBjb25zdCB0ZXh0TGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKCB0ZXh0RmlsZUxpc3QubWFwKCB0ZXh0RmlsZSA9PnRleHRGaWxlLnRleHQoKSApIClcbiAgICAgICAgd29ya0luZm9MaXN0ID0gIHRleHRMaXN0Lm1hcCggdGV4dCA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHdvcmtJbmZvOiB7IHRodW1ibmFpbCwgd29ya0lkLC4uLnJlc3QgfSB9OiBXb3JrRGV0YWlsRGVzRmlsZSA9IEpTT04ucGFyc2UodGV4dClcbiAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgICAgIHdvcmtJZCxcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1nRmlsZUxpc3QuZmluZCggKHtuYW1lfSkgPT4gbmFtZSA9PT0gYCR7d29ya0lkfS5wbmdgICkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKVxuICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ2dldFdvcmtMaXN0JylcbiAgICAgICAgcmV0dXJuIHdvcmtJbmZvTGlzdFxuICAgIH1cblxufVxuXG5leHBvcnQge1xuICAgIFdvcmtJbmZvLFxuICAgIFdvcmtEZXRhaWwsXG4gICAgTGF5ZXJEZXRhaWxcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///59\n")},80:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Vector2; });\n/**\n * The result of Math.atan2 is range from -Math.PI to Math.PI, \n * the function is used to transform the result to range from 0 to 2*Math*PI.\n * \n * @param atan2 The result of Math.atan2.\n * \n * @returns degree range from 0 to 2*Math*PI. \n */\nconst normalizeAtant2 = atan2 => atan2 < 0 ? Math.PI * 2 + atan2 : atan2;\n\nclass Vector2 {\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static normalize(v) {\n    const scale = 1 / Vector2.magnitude(v);\n    return new Vector2(v.x * scale, v.y * scale);\n  }\n  /**\n   * get normalized vertical vector2.\n   * @param v \n   */\n\n\n  static vertical({\n    x,\n    y\n  }) {\n    return new Vector2(y, -x);\n  }\n\n  static dist(v1, v2) {\n    return Math.sqrt((v1.x - v2.x) ** 2 + (v1.y - v2.y) ** 2);\n  }\n\n  static magnitude(v) {\n    return Math.sqrt(v.x ** 2 + v.y ** 2);\n  }\n\n  static degree(center, v1, v2) {\n    const deg1 = normalizeAtant2(Math.atan2(v1.y - center.y, v1.x - center.x));\n    const deg2 = normalizeAtant2(Math.atan2(v2.y - center.y, v2.x - center.x));\n    return Math.abs(deg2 - deg1);\n  }\n\n  static add(v1, v2) {\n    return new Vector2(v1.x + v2.x, v1.y + v2.y);\n  }\n  /**\n   * rotate as clockwise.\n   * @param v \n   * @param degree \n   */\n\n\n  static rotate(v, degree) {\n    const magnitude = Vector2.magnitude(v);\n    const deg = normalizeAtant2(Math.atan2(v.y, v.x)) - degree % 360 / 180 * Math.PI;\n    return new Vector2(Math.cos(deg) * magnitude, Math.sin(deg) * magnitude);\n  }\n\n  static multipy({\n    x,\n    y\n  }, scale) {\n    return new Vector2(x * scale, y * scale);\n  }\n\n  static subtract(v1, v2) {\n    return new Vector2(v1.x - v2.x, v1.y - v2.y);\n  }\n\n  static move(v, from, to) {\n    const dx = to.x - from.x;\n    const dy = to.y - from.y;\n    return new Vector2(v.x + dx, v.y + dy);\n  }\n\n  static floor({\n    x,\n    y\n  }) {\n    return new Vector2(Math.floor(x), Math.floor(y));\n  }\n\n}\nVector2.ZERO = new Vector2();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9kYXRhL1ZlY3RvcjIudHM/ZGIwMyJdLCJuYW1lcyI6WyJub3JtYWxpemVBdGFudDIiLCJhdGFuMiIsIk1hdGgiLCJQSSIsIlZlY3RvcjIiLCJjb25zdHJ1Y3RvciIsIngiLCJ5Iiwibm9ybWFsaXplIiwidiIsInNjYWxlIiwibWFnbml0dWRlIiwidmVydGljYWwiLCJkaXN0IiwidjEiLCJ2MiIsInNxcnQiLCJkZWdyZWUiLCJjZW50ZXIiLCJkZWcxIiwiZGVnMiIsImFicyIsImFkZCIsInJvdGF0ZSIsImRlZyIsImNvcyIsInNpbiIsIm11bHRpcHkiLCJzdWJ0cmFjdCIsIm1vdmUiLCJmcm9tIiwidG8iLCJkeCIsImR5IiwiZmxvb3IiLCJaRVJPIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBOzs7Ozs7OztBQVFBLE1BQU1BLGVBQWUsR0FBSUMsS0FBRCxJQUFtQkEsS0FBSyxHQUFDLENBQU4sR0FBU0MsSUFBSSxDQUFDQyxFQUFMLEdBQVMsQ0FBVCxHQUFhRixLQUF0QixHQUE4QkEsS0FBekU7O0FBRU8sTUFBTUcsT0FBTixDQUFjO0FBRWpCQyxhQUFXLENBQ1NDLENBQUMsR0FBRyxDQURiLEVBR1NDLENBQUMsR0FBRyxDQUhiLEVBSVY7QUFBQSxTQUhtQkQsQ0FHbkIsR0FIbUJBLENBR25CO0FBQUEsU0FEbUJDLENBQ25CLEdBRG1CQSxDQUNuQjtBQUFFOztBQUlILFNBQU9DLFNBQVAsQ0FBaUJDLENBQWpCLEVBQTJCO0FBQ3ZCLFVBQU1DLEtBQUssR0FBRyxJQUFJTixPQUFPLENBQUNPLFNBQVIsQ0FBa0JGLENBQWxCLENBQWxCO0FBQ0EsV0FBTyxJQUFJTCxPQUFKLENBQVlLLENBQUMsQ0FBQ0gsQ0FBRixHQUFNSSxLQUFsQixFQUF5QkQsQ0FBQyxDQUFDRixDQUFGLEdBQU1HLEtBQS9CLENBQVA7QUFDSDtBQUVEOzs7Ozs7QUFJQSxTQUFPRSxRQUFQLENBQWdCO0FBQUVOLEtBQUY7QUFBS0M7QUFBTCxHQUFoQixFQUFnQztBQUM1QixXQUFPLElBQUlILE9BQUosQ0FBWUcsQ0FBWixFQUFlLENBQUNELENBQWhCLENBQVA7QUFDSDs7QUFFRCxTQUFPTyxJQUFQLENBQVlDLEVBQVosRUFBeUJDLEVBQXpCLEVBQXFDO0FBQ2pDLFdBQU9iLElBQUksQ0FBQ2MsSUFBTCxDQUFVLENBQUNGLEVBQUUsQ0FBQ1IsQ0FBSCxHQUFPUyxFQUFFLENBQUNULENBQVgsS0FBZSxDQUFmLEdBQW1CLENBQUNRLEVBQUUsQ0FBQ1AsQ0FBSCxHQUFPUSxFQUFFLENBQUNSLENBQVgsS0FBZSxDQUE1QyxDQUFQO0FBQ0g7O0FBRUQsU0FBT0ksU0FBUCxDQUFpQkYsQ0FBakIsRUFBNEI7QUFDeEIsV0FBT1AsSUFBSSxDQUFDYyxJQUFMLENBQVVQLENBQUMsQ0FBQ0gsQ0FBRixJQUFLLENBQUwsR0FBU0csQ0FBQyxDQUFDRixDQUFGLElBQUssQ0FBeEIsQ0FBUDtBQUNIOztBQUVELFNBQU9VLE1BQVAsQ0FBY0MsTUFBZCxFQUErQkosRUFBL0IsRUFBMkNDLEVBQTNDLEVBQXVEO0FBQ25ELFVBQU1JLElBQUksR0FBR25CLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDRCxLQUFMLENBQVdhLEVBQUUsQ0FBQ1AsQ0FBSCxHQUFLVyxNQUFNLENBQUNYLENBQXZCLEVBQTBCTyxFQUFFLENBQUNSLENBQUgsR0FBT1ksTUFBTSxDQUFDWixDQUF4QyxDQUFELENBQTVCO0FBQ0EsVUFBTWMsSUFBSSxHQUFHcEIsZUFBZSxDQUFDRSxJQUFJLENBQUNELEtBQUwsQ0FBV2MsRUFBRSxDQUFDUixDQUFILEdBQU9XLE1BQU0sQ0FBQ1gsQ0FBekIsRUFBNEJRLEVBQUUsQ0FBQ1QsQ0FBSCxHQUFPWSxNQUFNLENBQUNaLENBQTFDLENBQUQsQ0FBNUI7QUFDQSxXQUFPSixJQUFJLENBQUNtQixHQUFMLENBQVNELElBQUksR0FBR0QsSUFBaEIsQ0FBUDtBQUNIOztBQUVELFNBQU9HLEdBQVAsQ0FBV1IsRUFBWCxFQUF3QkMsRUFBeEIsRUFBb0M7QUFDaEMsV0FBTyxJQUFJWCxPQUFKLENBQVlVLEVBQUUsQ0FBQ1IsQ0FBSCxHQUFPUyxFQUFFLENBQUNULENBQXRCLEVBQXlCUSxFQUFFLENBQUNQLENBQUgsR0FBT1EsRUFBRSxDQUFDUixDQUFuQyxDQUFQO0FBQ0g7QUFFRDs7Ozs7OztBQUtBLFNBQU9nQixNQUFQLENBQWNkLENBQWQsRUFBeUJRLE1BQXpCLEVBQXdDO0FBQ3BDLFVBQU1OLFNBQVMsR0FBR1AsT0FBTyxDQUFDTyxTQUFSLENBQWtCRixDQUFsQixDQUFsQjtBQUNBLFVBQU1lLEdBQUcsR0FBSXhCLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDRCxLQUFMLENBQVdRLENBQUMsQ0FBQ0YsQ0FBYixFQUFnQkUsQ0FBQyxDQUFDSCxDQUFsQixDQUFELENBQWYsR0FBMENXLE1BQU0sR0FBQyxHQUFSLEdBQWEsR0FBYixHQUFrQmYsSUFBSSxDQUFDQyxFQUE3RTtBQUNBLFdBQU8sSUFBSUMsT0FBSixDQUFZRixJQUFJLENBQUN1QixHQUFMLENBQVNELEdBQVQsSUFBZ0JiLFNBQTVCLEVBQXVDVCxJQUFJLENBQUN3QixHQUFMLENBQVNGLEdBQVQsSUFBZ0JiLFNBQXZELENBQVA7QUFDSDs7QUFFRCxTQUFPZ0IsT0FBUCxDQUFlO0FBQUNyQixLQUFEO0FBQUlDO0FBQUosR0FBZixFQUFnQ0csS0FBaEMsRUFBOEM7QUFDMUMsV0FBTyxJQUFJTixPQUFKLENBQVlFLENBQUMsR0FBQ0ksS0FBZCxFQUFxQkgsQ0FBQyxHQUFDRyxLQUF2QixDQUFQO0FBQ0g7O0FBRUQsU0FBT2tCLFFBQVAsQ0FBZ0JkLEVBQWhCLEVBQTZCQyxFQUE3QixFQUF5QztBQUNyQyxXQUFPLElBQUlYLE9BQUosQ0FBWVUsRUFBRSxDQUFDUixDQUFILEdBQU9TLEVBQUUsQ0FBQ1QsQ0FBdEIsRUFBeUJRLEVBQUUsQ0FBQ1AsQ0FBSCxHQUFPUSxFQUFFLENBQUNSLENBQW5DLENBQVA7QUFDSDs7QUFDRCxTQUFPc0IsSUFBUCxDQUFZcEIsQ0FBWixFQUF3QnFCLElBQXhCLEVBQXVDQyxFQUF2QyxFQUFtRDtBQUMvQyxVQUFNQyxFQUFFLEdBQUdELEVBQUUsQ0FBQ3pCLENBQUgsR0FBT3dCLElBQUksQ0FBQ3hCLENBQXZCO0FBQ0EsVUFBTTJCLEVBQUUsR0FBR0YsRUFBRSxDQUFDeEIsQ0FBSCxHQUFPdUIsSUFBSSxDQUFDdkIsQ0FBdkI7QUFDQSxXQUFPLElBQUlILE9BQUosQ0FBYUssQ0FBQyxDQUFDSCxDQUFGLEdBQU0wQixFQUFuQixFQUF1QnZCLENBQUMsQ0FBQ0YsQ0FBRixHQUFNMEIsRUFBN0IsQ0FBUDtBQUNIOztBQUVELFNBQU9DLEtBQVAsQ0FBYTtBQUFDNUIsS0FBRDtBQUFJQztBQUFKLEdBQWIsRUFBNkI7QUFDekIsV0FBTyxJQUFJSCxPQUFKLENBQVlGLElBQUksQ0FBQ2dDLEtBQUwsQ0FBVzVCLENBQVgsQ0FBWixFQUEyQkosSUFBSSxDQUFDZ0MsS0FBTCxDQUFXM0IsQ0FBWCxDQUEzQixDQUFQO0FBQ0g7O0FBbkVnQjtBQUFSSCxPLENBUUYrQixJLEdBQU8sSUFBSS9CLE9BQUosRSIsImZpbGUiOiI4MC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIE1hdGguYXRhbjIgaXMgcmFuZ2UgZnJvbSAtTWF0aC5QSSB0byBNYXRoLlBJLCBcbiAqIHRoZSBmdW5jdGlvbiBpcyB1c2VkIHRvIHRyYW5zZm9ybSB0aGUgcmVzdWx0IHRvIHJhbmdlIGZyb20gMCB0byAyKk1hdGgqUEkuXG4gKiBcbiAqIEBwYXJhbSBhdGFuMiBUaGUgcmVzdWx0IG9mIE1hdGguYXRhbjIuXG4gKiBcbiAqIEByZXR1cm5zIGRlZ3JlZSByYW5nZSBmcm9tIDAgdG8gMipNYXRoKlBJLiBcbiAqL1xuY29uc3Qgbm9ybWFsaXplQXRhbnQyID0gKGF0YW4yOiBudW1iZXIpID0+IGF0YW4yPDA/IE1hdGguUEkgKjIgKyBhdGFuMiA6IGF0YW4yXG5cbmV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgeCA9IDAsXG5cbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHkgPSAwLFxuICAgICl7fVxuXG4gICAgc3RhdGljIFpFUk8gPSBuZXcgVmVjdG9yMigpXG5cbiAgICBzdGF0aWMgbm9ybWFsaXplKHY6VmVjdG9yMil7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gMSAvIFZlY3RvcjIubWFnbml0dWRlKHYpXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih2LnggKiBzY2FsZSwgdi55ICogc2NhbGUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IG5vcm1hbGl6ZWQgdmVydGljYWwgdmVjdG9yMi5cbiAgICAgKiBAcGFyYW0gdiBcbiAgICAgKi9cbiAgICBzdGF0aWMgdmVydGljYWwoeyB4LCB5fTpWZWN0b3IyKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHksIC14KVxuICAgIH1cblxuICAgIHN0YXRpYyBkaXN0KHYxOiBWZWN0b3IyLCB2MjogVmVjdG9yMil7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoKHYxLnggLSB2Mi54KSoqMiArICh2MS55IC0gdjIueSkqKjIgKVxuICAgIH1cblxuICAgIHN0YXRpYyBtYWduaXR1ZGUodjogVmVjdG9yMil7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodi54KioyICsgdi55KioyIClcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVncmVlKGNlbnRlcjogVmVjdG9yMiwgdjE6VmVjdG9yMiwgdjI6IFZlY3RvcjIpe1xuICAgICAgICBjb25zdCBkZWcxID0gbm9ybWFsaXplQXRhbnQyKE1hdGguYXRhbjIodjEueS1jZW50ZXIueSwgdjEueCAtIGNlbnRlci54KSlcbiAgICAgICAgY29uc3QgZGVnMiA9IG5vcm1hbGl6ZUF0YW50MihNYXRoLmF0YW4yKHYyLnkgLSBjZW50ZXIueSwgdjIueCAtIGNlbnRlci54KSlcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKGRlZzIgLSBkZWcxKVxuICAgIH1cblxuICAgIHN0YXRpYyBhZGQodjE6IFZlY3RvcjIsIHYyOiBWZWN0b3IyKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHYxLnggKyB2Mi54LCB2MS55ICsgdjIueSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByb3RhdGUgYXMgY2xvY2t3aXNlLlxuICAgICAqIEBwYXJhbSB2IFxuICAgICAqIEBwYXJhbSBkZWdyZWUgXG4gICAgICovXG4gICAgc3RhdGljIHJvdGF0ZSh2OlZlY3RvcjIsIGRlZ3JlZTogbnVtYmVyKXtcbiAgICAgICAgY29uc3QgbWFnbml0dWRlID0gVmVjdG9yMi5tYWduaXR1ZGUodilcbiAgICAgICAgY29uc3QgZGVnICA9IG5vcm1hbGl6ZUF0YW50MihNYXRoLmF0YW4yKHYueSwgdi54KSkgLSAoKGRlZ3JlZSUzNjApLzE4MCAqTWF0aC5QSSlcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKE1hdGguY29zKGRlZykgKiBtYWduaXR1ZGUsIE1hdGguc2luKGRlZykgKiBtYWduaXR1ZGUpXG4gICAgfVxuXG4gICAgc3RhdGljIG11bHRpcHkoe3gsIHl9OiBWZWN0b3IyLCBzY2FsZTogbnVtYmVyKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgqc2NhbGUsIHkqc2NhbGUpXG4gICAgfVxuXG4gICAgc3RhdGljIHN1YnRyYWN0KHYxOiBWZWN0b3IyLCB2MjogVmVjdG9yMil7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih2MS54IC0gdjIueCwgdjEueSAtIHYyLnkpXG4gICAgfVxuICAgIHN0YXRpYyBtb3ZlKHY6IFZlY3RvcjIsIGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyKXtcbiAgICAgICAgY29uc3QgZHggPSB0by54IC0gZnJvbS54XG4gICAgICAgIGNvbnN0IGR5ID0gdG8ueSAtIGZyb20ueVxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHYueCArIGR4LCB2LnkgKyBkeSlcbiAgICB9XG5cbiAgICBzdGF0aWMgZmxvb3Ioe3gsIHl9OiBWZWN0b3IyKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKE1hdGguZmxvb3IoeCksIE1hdGguZmxvb3IoeSkpXG4gICAgfVxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///80\n')}}]);