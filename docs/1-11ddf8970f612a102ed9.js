(window.webpackJsonp=window.webpackJsonp||[]).push([[1,14,23],{102:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PEventEmiter; });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n\nvar PEventEmiter = /*#__PURE__*/function () {\n  function PEventEmiter() {\n    _classCallCheck(this, PEventEmiter);\n\n    this.eventEmitter = new events__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();\n  }\n\n  _createClass(PEventEmiter, [{\n    key: "on",\n    value: function on(event, listener) {\n      var fun = listener;\n      this.eventEmitter.addListener(event, fun);\n    }\n  }, {\n    key: "off",\n    value: function off(event, listener) {\n      var fun = listener;\n      this.eventEmitter.removeListener(event, fun);\n    }\n  }, {\n    key: "emit",\n    value: function emit(event, params) {\n      var _this = this;\n\n      setTimeout(function () {\n        _this.eventEmitter.emit(event, params);\n      }, 1);\n    }\n  }, {\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return PEventEmiter;\n}();\n\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(PEventEmiter, "PEventEmiter", "/Users/muyin/Documents/code/WebPencil/src/util/event.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9ldmVudC50cz9jOTA2Il0sIm5hbWVzIjpbIlBFdmVudEVtaXRlciIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsImV2ZW50IiwibGlzdGVuZXIiLCJmdW4iLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwicGFyYW1zIiwic2V0VGltZW91dCIsImVtaXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztJQUdxQkEsWTs7OztTQUVQQyxZLEdBQWUsSUFBSUMsbURBQUosRTs7Ozs7dUJBRUtDLEssRUFBVUMsUSxFQUF3QztBQUMvRSxVQUFNQyxHQUEwQixHQUFHRCxRQUFuQztBQUNBLFdBQUtILFlBQUwsQ0FBa0JLLFdBQWxCLENBQThCSCxLQUE5QixFQUErQ0UsR0FBL0M7QUFDQTs7O3dCQUU4QkYsSyxFQUFVQyxRLEVBQXdDO0FBQ2hGLFVBQU1DLEdBQTBCLEdBQUdELFFBQW5DO0FBQ0EsV0FBS0gsWUFBTCxDQUFrQk0sY0FBbEIsQ0FBaUNKLEtBQWpDLEVBQWtERSxHQUFsRDtBQUNBOzs7eUJBRStCRixLLEVBQVVLLE0sRUFBcUI7QUFBQTs7QUFDM0RDLGdCQUFVLENBQUMsWUFBTTtBQUNiLGFBQUksQ0FBQ1IsWUFBTCxDQUFrQlMsSUFBbEIsQ0FBdUJQLEtBQXZCLEVBQXdDSyxNQUF4QztBQUNILE9BRlMsRUFFUixDQUZRLENBQVY7QUFHSDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBbEJnQlIsWSIsImZpbGUiOiIxMDIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUEV2ZW50RW1pdGVyIDxFdmVudERhdGE+IHtcbiAgXG4gICAgcHJvdGVjdGVkIGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKVxuXG4gICAgb248VCBleHRlbmRzIGtleW9mIEV2ZW50RGF0YT4oZXZlbnQ6IFQsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50RGF0YVtUXSkgPT4gdm9pZCl7XG4gICAgXHRjb25zdCBmdW46ICguLi5wOiBhbnlbXSkgPT4gdm9pZCA9IGxpc3RlbmVyIGFzIGFueSBcbiAgICBcdHRoaXMuZXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKGV2ZW50IGFzIHN0cmluZywgZnVuIClcbiAgICB9XG5cbiAgICBvZmY8VCBleHRlbmRzIGtleW9mIEV2ZW50RGF0YT4oZXZlbnQ6IFQsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50RGF0YVtUXSkgPT4gdm9pZCl7XG4gICAgXHRjb25zdCBmdW46ICguLi5wOiBhbnlbXSkgPT4gdm9pZCA9IGxpc3RlbmVyIGFzIGFueSBcbiAgICBcdHRoaXMuZXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKGV2ZW50IGFzIHN0cmluZywgZnVuIClcbiAgICB9XG5cbiAgICBlbWl0PFQgZXh0ZW5kcyBrZXlvZiBFdmVudERhdGE+KGV2ZW50OiBULCBwYXJhbXM6IEV2ZW50RGF0YVtUXSl7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdChldmVudCBhcyBzdHJpbmcsIHBhcmFtcylcbiAgICAgICAgfSwxKVxuICAgIH1cblxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///102\n')},28:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrushStatus", function() { return BrushStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrushType", function() { return BrushType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbstractBrush", function() { return AbstractBrush; });\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar BrushStatus = /*#__PURE__*/function () {\n  function BrushStatus(x, y, pressure, tiltX, tiltY) {\n    _classCallCheck(this, BrushStatus);\n\n    this.x = x;\n    this.y = y;\n    this.pressure = pressure;\n    this.tiltX = tiltX;\n    this.tiltY = tiltY;\n  }\n\n  _createClass(BrushStatus, [{\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return BrushStatus;\n}();\nvar BrushType;\n\n(function (BrushType) {\n  BrushType[BrushType["pen"] = 1] = "pen";\n  BrushType[BrushType["selector"] = 2] = "selector";\n})(BrushType || (BrushType = {}));\n\nvar AbstractBrush = /*#__PURE__*/function () {\n  function AbstractBrush(type, name) {\n    _classCallCheck(this, AbstractBrush);\n\n    this.type = type;\n    this.name = name;\n  }\n\n  _createClass(AbstractBrush, [{\n    key: "init",\n    value: function init() {}\n  }, {\n    key: "destory",\n    value: function destory() {}\n  }, {\n    key: "onStart",\n    value: function onStart(status, context) {}\n  }, {\n    key: "onDraw",\n    value: function onDraw(brushStatus, contx) {}\n  }, {\n    key: "onEnd",\n    value: function onEnd(brushStatus, contx) {}\n  }, {\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return AbstractBrush;\n}();\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(BrushStatus, "BrushStatus", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/top-tool-bar/tool-item/brush/types.ts");\n  reactHotLoader.register(AbstractBrush, "AbstractBrush", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/top-tool-bar/tool-item/brush/types.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaC90eXBlcy50cz9lMTdhIl0sIm5hbWVzIjpbIkJydXNoU3RhdHVzIiwieCIsInkiLCJwcmVzc3VyZSIsInRpbHRYIiwidGlsdFkiLCJCcnVzaFR5cGUiLCJBYnN0cmFjdEJydXNoIiwidHlwZSIsIm5hbWUiLCJzdGF0dXMiLCJjb250ZXh0IiwiYnJ1c2hTdGF0dXMiLCJjb250eCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVPLElBQU1BLFdBQWI7QUFDRSx1QkFFb0JDLENBRnBCLEVBSW9CQyxDQUpwQixFQU1vQkMsUUFOcEIsRUFRb0JDLEtBUnBCLEVBVW9CQyxLQVZwQixFQVdFO0FBQUE7O0FBQUEsU0FUa0JKLENBU2xCLEdBVGtCQSxDQVNsQjtBQUFBLFNBUGtCQyxDQU9sQixHQVBrQkEsQ0FPbEI7QUFBQSxTQUxrQkMsUUFLbEIsR0FMa0JBLFFBS2xCO0FBQUEsU0FIa0JDLEtBR2xCLEdBSGtCQSxLQUdsQjtBQUFBLFNBRGtCQyxLQUNsQixHQURrQkEsS0FDbEI7QUFBRzs7QUFaUDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFnQk8sSUFBS0MsU0FBWjs7V0FBWUEsUztBQUFBQSxXLENBQUFBLFM7QUFBQUEsVyxDQUFBQSxTO0dBQUFBLFMsS0FBQUEsUzs7QUFPTCxJQUFlQyxhQUF0QjtBQUNFLHlCQUNrQkMsSUFEbEIsRUFFa0JDLElBRmxCLEVBR0U7QUFBQTs7QUFBQSxTQUZnQkQsSUFFaEIsR0FGZ0JBLElBRWhCO0FBQUEsU0FEZ0JDLElBQ2hCLEdBRGdCQSxJQUNoQjtBQUFFOztBQUpOO0FBQUE7QUFBQSwyQkFNZSxDQUFFO0FBTmpCO0FBQUE7QUFBQSw4QkFRa0IsQ0FBRTtBQVJwQjtBQUFBO0FBQUEsNEJBVVVDLE1BVlYsRUFVK0JDLE9BVi9CLEVBVThELENBQUU7QUFWaEU7QUFBQTtBQUFBLDJCQVlTQyxXQVpULEVBWXFDQyxLQVpyQyxFQVlpRSxDQUFFO0FBWm5FO0FBQUE7QUFBQSwwQkFjUUQsV0FkUixFQWNrQ0MsS0FkbEMsRUFjK0QsQ0FBRTtBQWRqRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7Ozs7Ozs7Ozs7MEJBdkJhYixXOzBCQXVCU08sYSIsImZpbGUiOiIyOC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBDYW52YXNDb250ZXh0IH0gZnJvbSBcIkAvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY2FudmFzLmNvbnRleHRcIlxuXG5leHBvcnQgY2xhc3MgQnJ1c2hTdGF0dXMge1xuICBjb25zdHJ1Y3RvcihcblxuICAgICAgcHVibGljIHJlYWRvbmx5IHg6IG51bWJlcixcblxuICAgICAgcHVibGljIHJlYWRvbmx5IHk6IG51bWJlcixcblxuICAgICAgcHVibGljIHJlYWRvbmx5IHByZXNzdXJlOiBudW1iZXIsXG5cbiAgICAgIHB1YmxpYyByZWFkb25seSB0aWx0WDogbnVtYmVyLFxuXG4gICAgICBwdWJsaWMgcmVhZG9ubHkgdGlsdFk6IG51bWJlcixcbiAgKSB7IH1cblxufVxuXG5leHBvcnQgZW51bSBCcnVzaFR5cGUge1xuXG4gIHBlbiA9IDEsXG5cbiAgc2VsZWN0b3IgPSAyLFxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RCcnVzaCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSB0eXBlOiBCcnVzaFR5cGUsIFxuICAgIHB1YmxpYyByZWFkb25seSBuYW1lOiBzdHJpbmdcbiAgKSB7fVxuXG4gIGluaXQoKTogdm9pZCB7fVxuXG4gIGRlc3RvcnkoKTogdm9pZCB7fVxuXG4gIG9uU3RhcnQoc3RhdHVzOiBCcnVzaFN0YXR1cywgY29udGV4dDogUENhbnZhc0NvbnRleHQpOiB2b2lkIHt9XG5cbiAgb25EcmF3KGJydXNoU3RhdHVzOiBCcnVzaFN0YXR1c1tdLCBjb250eDogUENhbnZhc0NvbnRleHQpOiB2b2lke31cblxuICBvbkVuZChicnVzaFN0YXR1czogQnJ1c2hTdGF0dXMsIGNvbnR4OiBQQ2FudmFzQ29udGV4dCk6IHZvaWQge31cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///28\n')},29:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasEvent", function() { return CanvasEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCanvasController", function() { return PCanvasController; });\n/* harmony import */ var _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27);\n/* harmony import */ var _pcanvas_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(33);\n/* harmony import */ var _workStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70);\n/* harmony import */ var _pcanvas_layer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(34);\n/* harmony import */ var _util_event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(102);\n/* harmony import */ var _util_canvas__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(64);\n/* harmony import */ var _top_tool_bar_tool_item_brush_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n\n\n\n\n\n\nvar CanvasEvent = /*#__PURE__*/function () {\n  function CanvasEvent(data) {\n    var tag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \'user\';\n\n    _classCallCheck(this, CanvasEvent);\n\n    this.data = data;\n    this.tag = tag;\n  }\n\n  _createClass(CanvasEvent, [{\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return CanvasEvent;\n}();\n\nvar pointEvent2BrunshStatus = function pointEvent2BrunshStatus(_ref) {\n  var x = _ref.offsetX,\n      y = _ref.offsetY,\n      tiltX = _ref.tiltX,\n      tiltY = _ref.tiltY,\n      pressure = _ref.pressure;\n  // console.log(\'pressure...\', pressure)\n  pressure = pressure > 1 ? pressure * 0.01 : pressure === 0 ? 1 : pressure;\n  return new _top_tool_bar_tool_item_brush_types__WEBPACK_IMPORTED_MODULE_6__["BrushStatus"](x, y, pressure, tiltX, tiltY);\n};\n\n/**\n * 用于控制PCanvascontroller component 的对象.\n * \n * // TODO\n * 对的操作放入组件中.\n */\nvar PCanvasController = /*#__PURE__*/function (_PEventEmiter) {\n  _inherits(PCanvasController, _PEventEmiter);\n\n  function PCanvasController() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PCanvasController);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PCanvasController)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.context = void 0;\n    _this.layerManager = void 0;\n    _this.color = _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__["RGBA"].BLACK;\n    _this.pointerIds = {};\n    _this.workId = void 0;\n    return _this;\n  }\n\n  _createClass(PCanvasController, [{\n    key: "init",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2, workDetail) {\n        var wrap, cover, _workDetail$workInfo, width, height, workId;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                wrap = _ref2.wrap, cover = _ref2.cover;\n                _workDetail$workInfo = workDetail.workInfo, width = _workDetail$workInfo.width, height = _workDetail$workInfo.height, workId = _workDetail$workInfo.workId;\n                wrap.style.width = "".concat(width, "px");\n                wrap.style.height = "".concat(height, "px");\n                this.workId = workId;\n                this.layerManager = new _pcanvas_layer__WEBPACK_IMPORTED_MODULE_3__["PcanvasLayers"]({\n                  cover: cover,\n                  wrap: wrap,\n                  width: width,\n                  height: height\n                });\n                this.layerManager.init(workDetail.layers);\n                this.context = new _pcanvas_context__WEBPACK_IMPORTED_MODULE_1__["PCanvasContext"](this.layerManager.getCanvas(), this.layerManager.getContext(), width, height);\n                this.emit(\'init\', new CanvasEvent(null));\n                this.emit(\'focusLayer\', new CanvasEvent({\n                  layerDetail: this.layerManager.getFocusDetail()\n                })); // logCanvasData(\'init: \', this.layerManager.layers[0].canvas)\n\n              case 10:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init(_x, _x2) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: "setColor",\n    value: function setColor(_ref3) {\n      var r = _ref3.r,\n          g = _ref3.g,\n          b = _ref3.b;\n      var color = new _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__["RGBA"](r, g, b, this.color.a);\n      this.setRGBA(color);\n    }\n  }, {\n    key: "setRGBA",\n    value: function setRGBA(color) {\n      this.context.color = color.toRGBAString();\n      this.color = color;\n      this.emit(\'colorchange\', new CanvasEvent({\n        color: color\n      }));\n    }\n  }, {\n    key: "setOpacity",\n    value: function setOpacity(opacity) {\n      var _this$color = this.color,\n          r = _this$color.r,\n          g = _this$color.g,\n          b = _this$color.b;\n      var color = new _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__["RGBA"](r, g, b, opacity);\n      this.setRGBA(color);\n    }\n  }, {\n    key: "getLayers",\n    value: function getLayers() {\n      return _toConsumableArray(this.layerManager.layers);\n    }\n  }, {\n    key: "addLayer",\n    value: function addLayer() {\n      var layerDetail = this.layerManager.addLayer(_workStorage__WEBPACK_IMPORTED_MODULE_2__[/* LayerDetail */ "a"].create(this.layerManager.wrapInfo));\n      this.layerManager.focusLayer(layerDetail);\n      var index = this.layerManager.layers.indexOf(layerDetail);\n      this.emit(\'addLayer\', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: layerDetail,\n        index: index\n      }));\n      this.emit(\'focusLayer\', new CanvasEvent({\n        layerDetail: layerDetail\n      }));\n    }\n  }, {\n    key: "addLayerContent",\n    value: function addLayerContent(index, canvas) {\n      var creator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \'user\';\n      var width = canvas.width,\n          height = canvas.height;\n      var layerDetail = _workStorage__WEBPACK_IMPORTED_MODULE_2__[/* LayerDetail */ "a"].create({\n        width: width,\n        height: height\n      });\n      var ctx = layerDetail.canvas.getContext(\'2d\');\n      ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(canvas, 0, 0, width, height);\n      this.layerManager.addLayer(layerDetail, index);\n      this.emit(\'addLayer\', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: layerDetail,\n        index: index\n      }, creator));\n      return layerDetail;\n    }\n  }, {\n    key: "setLayerContent",\n    value: function setLayerContent(index, canvas) {\n      var creator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \'user\';\n      var layerDetail = this.layerManager.layers[index];\n      var oldCanvas = layerDetail.canvas;\n      var width = oldCanvas.width,\n          height = oldCanvas.height;\n      var preContent = Object(_util_canvas__WEBPACK_IMPORTED_MODULE_5__[/* copyCanvas */ "a"])(layerDetail.canvas);\n      var ctx = layerDetail.canvas.getContext(\'2d\');\n      ctx === null || ctx === void 0 ? void 0 : ctx.clearRect(0, 0, width, height);\n      ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(canvas, 0, 0, width, height);\n      this.emit(\'contentChange\', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: layerDetail,\n        index: index,\n        preContent: preContent\n      }, creator));\n      return layerDetail;\n    }\n  }, {\n    key: "focusLayer",\n    value: function focusLayer(layerDetail) {\n      this.layerManager.focusLayer(layerDetail);\n      this.emit(\'focusLayer\', new CanvasEvent({\n        layerDetail: layerDetail\n      }));\n    }\n  }, {\n    key: "removeLayer",\n    value: function removeLayer(layerDetail) {\n      var creator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \'user\';\n\n      var _this$layerManager$re = this.layerManager.removeLayer(layerDetail),\n          index = _this$layerManager$re.index,\n          isFocus = _this$layerManager$re.isFocus;\n\n      this.emit(\'removeLayer\', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: layerDetail,\n        index: index\n      }, creator));\n\n      if (isFocus) {\n        var _layerDetail = this.layerManager.layers[0];\n        this.focusLayer(_layerDetail);\n        this.emit(\'focusLayer\', new CanvasEvent({\n          layerDetail: _layerDetail\n        }, creator));\n      }\n    }\n  }, {\n    key: "removeLayerByIndex",\n    value: function removeLayerByIndex(index) {\n      var creator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \'user\';\n      var layerDetail = this.layerManager.layers[index];\n      this.removeLayer(layerDetail, creator);\n    }\n  }, {\n    key: "setBrushWidth",\n    value: function setBrushWidth(width) {\n      this.context.brushWidth = width;\n    }\n  }, {\n    key: "setBrush",\n    value: function setBrush(brush) {\n      if (this.context.brush) {\n        this.context.brush.destory();\n      }\n\n      brush.init();\n      this.context.brush = brush;\n    }\n  }, {\n    key: "onPointerDown",\n    value: function onPointerDown(p) {\n      this.pointerIds[p.pointerId] = true;\n      this.context.brush.onStart(pointEvent2BrunshStatus(p), this.context);\n    }\n  }, {\n    key: "onPointerMove",\n    value: function onPointerMove(pointerEvent) {\n      if (Object.keys(this.pointerIds).length > 1) return;\n      var ponterEvents;\n\n      if (pointerEvent.getCoalescedEvents) {\n        ponterEvents = pointerEvent.getCoalescedEvents();\n      } else {\n        ponterEvents = [pointerEvent];\n      }\n\n      this.context.brush.onDraw(ponterEvents.map(function (p) {\n        return pointEvent2BrunshStatus(p);\n      }), this.context);\n    }\n  }, {\n    key: "onPointerUp",\n    value: function onPointerUp(p) {\n      delete this.pointerIds[p.pointerId];\n      this.context.brush.onEnd(pointEvent2BrunshStatus(p), this.context);\n      var curLayerDetail = this.layerManager.getFocusDetail();\n      var preContent = Object(_util_canvas__WEBPACK_IMPORTED_MODULE_5__[/* copyCanvas */ "a"])(curLayerDetail.canvas);\n      this.layerManager.applyTempCanvas();\n      var index = this.layerManager.layers.indexOf(curLayerDetail);\n      this.emit(\'contentChange\', new CanvasEvent({\n        workId: this.workId,\n        layerDetail: curLayerDetail,\n        preContent: preContent,\n        index: index\n      }));\n    }\n  }, {\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return PCanvasController;\n}(_util_event__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"]);\n\nfunction logCanvasData() {\n  var rep = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'\';\n  var canvas = arguments.length > 1 ? arguments[1] : undefined;\n  var ctx = canvas.getContext(\'2d\');\n  console.log(rep, ctx === null || ctx === void 0 ? void 0 : ctx.getImageData(0, 0, 1, 1).data);\n}\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(CanvasEvent, "CanvasEvent", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcnvas.controller.ts");\n  reactHotLoader.register(pointEvent2BrunshStatus, "pointEvent2BrunshStatus", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcnvas.controller.ts");\n  reactHotLoader.register(PCanvasController, "PCanvasController", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcnvas.controller.ts");\n  reactHotLoader.register(logCanvasData, "logCanvasData", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcnvas.controller.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY252YXMuY29udHJvbGxlci50cz85ZmNmIl0sIm5hbWVzIjpbIkNhbnZhc0V2ZW50IiwiZGF0YSIsInRhZyIsInBvaW50RXZlbnQyQnJ1bnNoU3RhdHVzIiwieCIsIm9mZnNldFgiLCJ5Iiwib2Zmc2V0WSIsInRpbHRYIiwidGlsdFkiLCJwcmVzc3VyZSIsIkJydXNoU3RhdHVzIiwiUENhbnZhc0NvbnRyb2xsZXIiLCJjb250ZXh0IiwibGF5ZXJNYW5hZ2VyIiwiY29sb3IiLCJSR0JBIiwiQkxBQ0siLCJwb2ludGVySWRzIiwid29ya0lkIiwid29ya0RldGFpbCIsIndyYXAiLCJjb3ZlciIsIndvcmtJbmZvIiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsIlBjYW52YXNMYXllcnMiLCJpbml0IiwibGF5ZXJzIiwiUENhbnZhc0NvbnRleHQiLCJnZXRDYW52YXMiLCJnZXRDb250ZXh0IiwiZW1pdCIsImxheWVyRGV0YWlsIiwiZ2V0Rm9jdXNEZXRhaWwiLCJyIiwiZyIsImIiLCJhIiwic2V0UkdCQSIsInRvUkdCQVN0cmluZyIsIm9wYWNpdHkiLCJhZGRMYXllciIsIkxheWVyRGV0YWlsIiwiY3JlYXRlIiwid3JhcEluZm8iLCJmb2N1c0xheWVyIiwiaW5kZXgiLCJpbmRleE9mIiwiY2FudmFzIiwiY3JlYXRvciIsImN0eCIsImRyYXdJbWFnZSIsIm9sZENhbnZhcyIsInByZUNvbnRlbnQiLCJjb3B5Q2FudmFzIiwiY2xlYXJSZWN0IiwicmVtb3ZlTGF5ZXIiLCJpc0ZvY3VzIiwiYnJ1c2hXaWR0aCIsImJydXNoIiwiZGVzdG9yeSIsInAiLCJwb2ludGVySWQiLCJvblN0YXJ0IiwicG9pbnRlckV2ZW50IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInBvbnRlckV2ZW50cyIsImdldENvYWxlc2NlZEV2ZW50cyIsIm9uRHJhdyIsIm1hcCIsIm9uRW5kIiwiY3VyTGF5ZXJEZXRhaWwiLCJhcHBseVRlbXBDYW52YXMiLCJQRXZlbnRFbWl0ZXIiLCJsb2dDYW52YXNEYXRhIiwicmVwIiwiY29uc29sZSIsImxvZyIsImdldEltYWdlRGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSU8sSUFBTUEsV0FBYjtBQUVJLHVCQUNVQyxJQURWLEVBR0M7QUFBQSxRQURTQyxHQUNULHVFQUQwQixNQUMxQjs7QUFBQTs7QUFBQSxTQUZTRCxJQUVULEdBRlNBLElBRVQ7QUFBQSxTQURTQyxHQUNULEdBRFNBLEdBQ1Q7QUFBRTs7QUFMUDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBeUJBLElBQU1DLHVCQUF1QixHQUFHLFNBQTFCQSx1QkFBMEIsT0FBa0U7QUFBQSxNQUF2REMsQ0FBdUQsUUFBaEVDLE9BQWdFO0FBQUEsTUFBM0NDLENBQTJDLFFBQXBEQyxPQUFvRDtBQUFBLE1BQXpDQyxLQUF5QyxRQUF6Q0EsS0FBeUM7QUFBQSxNQUFuQ0MsS0FBbUMsUUFBbkNBLEtBQW1DO0FBQUEsTUFBNUJDLFFBQTRCLFFBQTVCQSxRQUE0QjtBQUM5RjtBQUNBQSxVQUFRLEdBQUdBLFFBQVEsR0FBQyxDQUFULEdBQVlBLFFBQVEsR0FBRyxJQUF2QixHQUNDQSxRQUFRLEtBQUssQ0FBYixHQUFnQixDQUFoQixHQUFtQkEsUUFEL0I7QUFFQSxTQUFPLElBQUlDLCtFQUFKLENBQWdCUCxDQUFoQixFQUFtQkUsQ0FBbkIsRUFBdUJJLFFBQXZCLEVBQWlDRixLQUFqQyxFQUF3Q0MsS0FBeEMsQ0FBUDtBQUNILENBTEQ7O0FBT0E7Ozs7OztBQU1PLElBQU1HLGlCQUFiO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQSxVQUVjQyxPQUZkO0FBQUEsVUFJY0MsWUFKZDtBQUFBLFVBTWNDLEtBTmQs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LEVBQXVDNkIsMkRBQXZDOztBQXNKQSxTQUFTQyxhQUFULEdBQTBEO0FBQUEsTUFBbkNDLEdBQW1DLHVFQUEvQixFQUErQjtBQUFBLE1BQTNCN0IsTUFBMkI7QUFDdEQsTUFBTUUsR0FBRyxHQUFHRixNQUFNLENBQUNsQixVQUFQLENBQWtCLElBQWxCLENBQVo7QUFDRGdELFNBQU8sQ0FBQ0MsR0FBUixDQUFZRixHQUFaLEVBQWlCM0IsR0FBakIsYUFBaUJBLEdBQWpCLHVCQUFpQkEsR0FBRyxDQUFFOEIsWUFBTCxDQUFrQixDQUFsQixFQUFvQixDQUFwQixFQUFzQixDQUF0QixFQUF3QixDQUF4QixFQUEyQmpGLElBQTVDO0FBQ0Q7Ozs7Ozs7Ozs7OzBCQS9MV0QsVzswQkF5QlBHLHVCOzBCQWFPUyxpQjswQkFzSkprRSxhIiwiZmlsZSI6IjI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUkdCQSB9IGZyb20gXCIuLi90b3AtdG9vbC1iYXIvdG9vbC1pdGVtL2NvbG9yLXNlbGVjdG9yL3JnYmFcIlxuaW1wb3J0IHsgUENhbnZhc0NvbnRleHQgfSBmcm9tIFwiLi9wY2FudmFzLmNvbnRleHRcIlxuaW1wb3J0IHsgQnJ1c2ggfSBmcm9tIFwiLi4vdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaFwiXG5pbXBvcnQgeyBXb3JrRGV0YWlsLCBMYXllckRldGFpbCB9IGZyb20gXCIuLi8uLi8uLi93b3JrU3RvcmFnZVwiXG5pbXBvcnQgeyBQY2FudmFzTGF5ZXJzIH0gZnJvbSBcIi4vcGNhbnZhcy5sYXllclwiXG5pbXBvcnQgUEV2ZW50RW1pdGVyIGZyb20gXCIuLi8uLi8uLi91dGlsL2V2ZW50XCJcbmltcG9ydCB7IGNvcHlDYW52YXMgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jYW52YXNcIlxuaW1wb3J0IHsgQnJ1c2hTdGF0dXMgfSBmcm9tIFwiLi4vdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaC90eXBlc1wiXG5cbmV4cG9ydCB0eXBlIEV2bmV0Q3JlYXRvciA9ICd1c2VyJ3wnaGlzdG9yeSdcblxuZXhwb3J0IGNsYXNzIENhbnZhc0V2ZW50PFQ9bnVsbD4ge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgIHB1YmxpYyBkYXRhOiBULFxuICAgICAgIHB1YmxpYyB0YWc6RXZuZXRDcmVhdG9yPSd1c2VyJyxcbiAgICApe31cblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbnZhc0V2ZW50RGF0YSB7XG5cbiAgICBpbml0OiBDYW52YXNFdmVudFxuXG4gICAgY29sb3JjaGFuZ2U6IENhbnZhc0V2ZW50PHtjb2xvcjogUkdCQX0+XG5cbiAgICBhZGRMYXllcjogQ2FudmFzRXZlbnQ8e3dvcmtJZDpzdHJpbmcsIGxheWVyRGV0YWlsOiBMYXllckRldGFpbCwgaW5kZXg6IG51bWJlcn0+XG5cbiAgICBjb250ZW50Q2hhbmdlOiBDYW52YXNFdmVudDx7IHdvcmtJZDpzdHJpbmcgLCBsYXllckRldGFpbDogTGF5ZXJEZXRhaWwsIHByZUNvbnRlbnQ6IEhUTUxDYW52YXNFbGVtZW50LCBpbmRleDogbnVtYmVyIH0+XG5cbiAgICBmb2N1c0xheWVyOiBDYW52YXNFdmVudDx7IGxheWVyRGV0YWlsOiBMYXllckRldGFpbCB9PlxuXG4gICAgcmVtb3ZlTGF5ZXI6IENhbnZhc0V2ZW50PHsgd29ya0lkOnN0cmluZywgbGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsLCBpbmRleDogbnVtYmVyfT5cbn1cblxuXG5jb25zdCBwb2ludEV2ZW50MkJydW5zaFN0YXR1cyA9ICh7b2Zmc2V0WDogeCwgb2Zmc2V0WTogeSx0aWx0WCx0aWx0WSwgcHJlc3N1cmV9OiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZygncHJlc3N1cmUuLi4nLCBwcmVzc3VyZSlcbiAgICBwcmVzc3VyZSA9IHByZXNzdXJlPjE/IHByZXNzdXJlICogMC4wMSA6IFxuICAgICAgICAgICAgICAgIHByZXNzdXJlID09PSAwPyAxOiBwcmVzc3VyZTtcbiAgICByZXR1cm4gbmV3IEJydXNoU3RhdHVzKHgsIHksICBwcmVzc3VyZSwgdGlsdFgsIHRpbHRZKVxufVxuZXhwb3J0IHR5cGUgV3JhcEluZm8gPSB7IHdyYXA6IEhUTUxFbGVtZW50LCBjb3ZlcjogSFRNTEVsZW1lbnQgfVxuLyoqXG4gKiDnlKjkuo7mjqfliLZQQ2FudmFzY29udHJvbGxlciBjb21wb25lbnQg55qE5a+56LGhLlxuICogXG4gKiAvLyBUT0RPXG4gKiDlr7nnmoTmk43kvZzmlL7lhaXnu4Tku7bkuK0uXG4gKi9cbmV4cG9ydCBjbGFzcyBQQ2FudmFzQ29udHJvbGxlciBleHRlbmRzIFBFdmVudEVtaXRlcjxDYW52YXNFdmVudERhdGE+IHtcblxuICAgIHByb3RlY3RlZCBjb250ZXh0OiBQQ2FudmFzQ29udGV4dDtcblxuICAgIHByb3RlY3RlZCBsYXllck1hbmFnZXI6UGNhbnZhc0xheWVycztcblxuICAgIHByb3RlY3RlZCBjb2xvciA9IFJHQkEuQkxBQ0s7XG5cbiAgICBwcm90ZWN0ZWQgcG9pbnRlcklkczoge1tpZDpzdHJpbmddOiBib29sZWFufSA9IHt9XG5cbiAgICBwcm90ZWN0ZWQgd29ya0lkOiBzdHJpbmdcblxuICAgIGFzeW5jIGluaXQoIHt3cmFwLCBjb3Zlcn06ICBXcmFwSW5mbywgd29ya0RldGFpbDogV29ya0RldGFpbCApe1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIHdvcmtJZCB9ID0gd29ya0RldGFpbC53b3JrSW5mb1xuICAgICAgICB3cmFwLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgXG4gICAgICAgIHdyYXAuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YFxuICAgICAgICB0aGlzLndvcmtJZCA9IHdvcmtJZFxuICAgICAgICB0aGlzLmxheWVyTWFuYWdlciA9IG5ldyBQY2FudmFzTGF5ZXJzKHtjb3Zlciwgd3JhcCwgd2lkdGgsIGhlaWdodH0pXG4gICAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmluaXQod29ya0RldGFpbC5sYXllcnMpXG4gICAgICAgIHRoaXMuY29udGV4dCA9IG5ldyBQQ2FudmFzQ29udGV4dChcbiAgICAgICAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmdldENhbnZhcygpLFxuICAgICAgICAgICAgdGhpcy5sYXllck1hbmFnZXIuZ2V0Q29udGV4dCgpLFxuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5lbWl0KCdpbml0JywgbmV3IENhbnZhc0V2ZW50KG51bGwpIClcbiAgICAgICAgdGhpcy5lbWl0KCdmb2N1c0xheWVyJywgbmV3IENhbnZhc0V2ZW50KHsgbGF5ZXJEZXRhaWw6IHRoaXMubGF5ZXJNYW5hZ2VyLmdldEZvY3VzRGV0YWlsKCkgfSkpXG4gICAgICAgIC8vIGxvZ0NhbnZhc0RhdGEoJ2luaXQ6ICcsIHRoaXMubGF5ZXJNYW5hZ2VyLmxheWVyc1swXS5jYW52YXMpXG4gICAgfVxuXG4gICAgc2V0Q29sb3Ioe3IsZyxifTogUkdCQSkge1xuICAgICAgICBjb25zdCBjb2xvciA9IG5ldyBSR0JBKHIsZyxiLCB0aGlzLmNvbG9yLmEpXG4gICAgICAgIHRoaXMuc2V0UkdCQShjb2xvcilcbiAgICB9XG5cbiAgICBzZXRSR0JBKGNvbG9yOiBSR0JBKTp2b2lke1xuICAgICAgICB0aGlzLmNvbnRleHQuY29sb3IgPSBjb2xvci50b1JHQkFTdHJpbmcoKVxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3JcbiAgICAgICAgdGhpcy5lbWl0KCdjb2xvcmNoYW5nZScsIG5ldyBDYW52YXNFdmVudCh7Y29sb3IgfSkpXG4gICAgfVxuXG4gICAgc2V0T3BhY2l0eShvcGFjaXR5OiBudW1iZXIpe1xuICAgICAgICBjb25zdCB7cixnLGJ9ID0gdGhpcy5jb2xvclxuICAgICAgICBjb25zdCBjb2xvciA9IG5ldyBSR0JBKHIsIGcsIGIsIG9wYWNpdHkpXG4gICAgICAgIHRoaXMuc2V0UkdCQShjb2xvcilcbiAgICB9XG5cblxuICAgIGdldExheWVycygpe1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMubGF5ZXJNYW5hZ2VyLmxheWVyc11cbiAgICB9XG5cbiAgICBhZGRMYXllcigpe1xuICAgICAgICBjb25zdCBsYXllckRldGFpbCA9ICB0aGlzLmxheWVyTWFuYWdlci5hZGRMYXllcihMYXllckRldGFpbC5jcmVhdGUodGhpcy5sYXllck1hbmFnZXIud3JhcEluZm8pKVxuICAgICAgICB0aGlzLmxheWVyTWFuYWdlci5mb2N1c0xheWVyKGxheWVyRGV0YWlsKVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubGF5ZXJNYW5hZ2VyLmxheWVycy5pbmRleE9mKGxheWVyRGV0YWlsKVxuICAgICAgICB0aGlzLmVtaXQoJ2FkZExheWVyJywgIG5ldyBDYW52YXNFdmVudCh7d29ya0lkOiB0aGlzLndvcmtJZCwgbGF5ZXJEZXRhaWwsIGluZGV4IH0pKVxuICAgICAgICB0aGlzLmVtaXQoJ2ZvY3VzTGF5ZXInLCBuZXcgQ2FudmFzRXZlbnQoe2xheWVyRGV0YWlsfSkpXG5cbiAgICB9XG5cbiAgICBhZGRMYXllckNvbnRlbnQoaW5kZXg6IG51bWJlciwgY2FudmFzOkhUTUxDYW52YXNFbGVtZW50fCBIVE1MSW1hZ2VFbGVtZW50LCBjcmVhdG9yOiBFdm5ldENyZWF0b3I9J3VzZXInKTogTGF5ZXJEZXRhaWwge1xuICAgICAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBjYW52YXNcbiAgICAgICAgY29uc3QgbGF5ZXJEZXRhaWwgPSBMYXllckRldGFpbC5jcmVhdGUoe3dpZHRoLCBoZWlnaHR9KVxuICAgICAgICBjb25zdCBjdHggPSBsYXllckRldGFpbC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICBjdHg/LmRyYXdJbWFnZShjYW52YXMsIDAsMCwgd2lkdGgsIGhlaWdodClcbiAgICAgICAgdGhpcy5sYXllck1hbmFnZXIuYWRkTGF5ZXIobGF5ZXJEZXRhaWwsIGluZGV4KVxuICAgICAgICB0aGlzLmVtaXQoJ2FkZExheWVyJywgbmV3IENhbnZhc0V2ZW50KHsgd29ya0lkOiB0aGlzLndvcmtJZCAsIGxheWVyRGV0YWlsLCBpbmRleH0sIGNyZWF0b3IpKVxuICAgICAgICByZXR1cm4gbGF5ZXJEZXRhaWxcblxuICAgIH1cblxuICAgIHNldExheWVyQ29udGVudChpbmRleDogbnVtYmVyLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50fCBIVE1MSW1hZ2VFbGVtZW50LCBjcmVhdG9yOiBFdm5ldENyZWF0b3IgPSAndXNlcicpIHtcbiAgICAgICAgY29uc3QgbGF5ZXJEZXRhaWwgPSB0aGlzLmxheWVyTWFuYWdlci5sYXllcnNbaW5kZXhdXG4gICAgICAgIGNvbnN0IG9sZENhbnZhcyA9IGxheWVyRGV0YWlsLmNhbnZhc1xuICAgICAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBvbGRDYW52YXNcbiAgICAgICAgY29uc3QgcHJlQ29udGVudCA9IGNvcHlDYW52YXMobGF5ZXJEZXRhaWwuY2FudmFzKVxuICAgICAgICBjb25zdCBjdHggPSBsYXllckRldGFpbC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICBjdHg/LmNsZWFyUmVjdCgwLDAsIHdpZHRoLCBoZWlnaHQpXG4gICAgICAgIGN0eD8uZHJhd0ltYWdlKGNhbnZhcywgMCwwLHdpZHRoLCBoZWlnaHQpXG4gICAgICAgIHRoaXMuZW1pdCgnY29udGVudENoYW5nZScsIG5ldyBDYW52YXNFdmVudCh7IHdvcmtJZDogdGhpcy53b3JrSWQgLCBsYXllckRldGFpbCwgaW5kZXgsIHByZUNvbnRlbnQsICB9LCBjcmVhdG9yKSlcbiAgICAgICAgcmV0dXJuIGxheWVyRGV0YWlsXG4gICAgfVxuXG5cblxuICAgIGZvY3VzTGF5ZXIobGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsKTp2b2lkIHtcbiAgICAgICAgdGhpcy5sYXllck1hbmFnZXIuZm9jdXNMYXllcihsYXllckRldGFpbClcbiAgICAgICAgdGhpcy5lbWl0KCdmb2N1c0xheWVyJywgbmV3IENhbnZhc0V2ZW50KHsgbGF5ZXJEZXRhaWwgfSkpXG4gICAgfVxuXG4gICAgcmVtb3ZlTGF5ZXIobGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsLCBjcmVhdG9yOiBFdm5ldENyZWF0b3I9J3VzZXInKTogdm9pZHtcbiAgICAgICAgY29uc3QgeyBpbmRleCwgaXNGb2N1cyB9ID0gIHRoaXMubGF5ZXJNYW5hZ2VyLnJlbW92ZUxheWVyKGxheWVyRGV0YWlsKVxuICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxheWVyJywgbmV3IENhbnZhc0V2ZW50KHt3b3JrSWQ6IHRoaXMud29ya0lkLCBsYXllckRldGFpbCwgaW5kZXh9LCBjcmVhdG9yKSlcbiAgICAgICAgaWYoaXNGb2N1cyl7XG4gICAgICAgICAgICBjb25zdCBsYXllckRldGFpbCA9IHRoaXMubGF5ZXJNYW5hZ2VyLmxheWVyc1swXVxuICAgICAgICAgICAgdGhpcy5mb2N1c0xheWVyKGxheWVyRGV0YWlsKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdmb2N1c0xheWVyJywgbmV3IENhbnZhc0V2ZW50KHtsYXllckRldGFpbH0sIGNyZWF0b3IpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUxheWVyQnlJbmRleChpbmRleDogbnVtYmVyLCBjcmVhdG9yOiBFdm5ldENyZWF0b3I9J3VzZXInKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxheWVyRGV0YWlsID0gdGhpcy5sYXllck1hbmFnZXIubGF5ZXJzW2luZGV4XVxuICAgICAgICB0aGlzLnJlbW92ZUxheWVyKGxheWVyRGV0YWlsLCBjcmVhdG9yKVxuICAgIH1cblxuICAgIHNldEJydXNoV2lkdGgod2lkdGg6IG51bWJlcil7XG4gICAgICAgIHRoaXMuY29udGV4dC5icnVzaFdpZHRoID0gd2lkdGhcbiAgICB9XG4gIFxuXG4gICAgc2V0QnJ1c2goYnJ1c2g6IEJydXNoKXtcbiAgICAgICAgaWYodGhpcy5jb250ZXh0LmJydXNoKXtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5icnVzaC5kZXN0b3J5KClcbiAgICAgICAgfVxuICAgICAgICBicnVzaC5pbml0KClcbiAgICAgICAgdGhpcy5jb250ZXh0LmJydXNoID0gYnJ1c2hcbiAgICB9XG5cbiAgICBvblBvaW50ZXJEb3duKHA6IFBvaW50ZXJFdmVudCl7XG4gICAgICAgIHRoaXMucG9pbnRlcklkc1twLnBvaW50ZXJJZF0gPSB0cnVlXG4gICAgICAgIHRoaXMuY29udGV4dC5icnVzaC5vblN0YXJ0KHBvaW50RXZlbnQyQnJ1bnNoU3RhdHVzKHApLHRoaXMuY29udGV4dClcbiAgICB9XG5cbiAgICBvblBvaW50ZXJNb3ZlKHBvaW50ZXJFdmVudDogUG9pbnRlckV2ZW50KTp2b2lke1xuICAgICAgaWYoT2JqZWN0LmtleXModGhpcy5wb2ludGVySWRzKS5sZW5ndGg+MSkgcmV0dXJuXG4gICAgICAgIGxldCBwb250ZXJFdmVudHM6IFBvaW50ZXJFdmVudFtdO1xuICAgICAgICBpZigocG9pbnRlckV2ZW50IGFzIGFueSkuZ2V0Q29hbGVzY2VkRXZlbnRzKXtcbiAgICAgICAgICAgIHBvbnRlckV2ZW50cyA9IChwb2ludGVyRXZlbnQgYXMgYW55ICkuZ2V0Q29hbGVzY2VkRXZlbnRzKClcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBwb250ZXJFdmVudHMgPSAgW3BvaW50ZXJFdmVudF1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRleHQuYnJ1c2gub25EcmF3KFxuICAgICAgICAgICAgcG9udGVyRXZlbnRzLm1hcCggcCA9PiBwb2ludEV2ZW50MkJydW5zaFN0YXR1cyhwKSApLFxuICAgICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICB9XG5cbiAgICBvblBvaW50ZXJVcChwOiBQb2ludGVyRXZlbnQpOiB2b2lke1xuICAgICAgICBkZWxldGUgdGhpcy5wb2ludGVySWRzW3AucG9pbnRlcklkXVxuICAgICAgICB0aGlzLmNvbnRleHQuYnJ1c2gub25FbmQocG9pbnRFdmVudDJCcnVuc2hTdGF0dXMocCksdGhpcy5jb250ZXh0KVxuICAgICAgICBjb25zdCBjdXJMYXllckRldGFpbCA9IHRoaXMubGF5ZXJNYW5hZ2VyLmdldEZvY3VzRGV0YWlsKClcbiAgICAgICAgY29uc3QgcHJlQ29udGVudCA9IGNvcHlDYW52YXMoY3VyTGF5ZXJEZXRhaWwuY2FudmFzKVxuICAgICAgICB0aGlzLmxheWVyTWFuYWdlci5hcHBseVRlbXBDYW52YXMoKVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubGF5ZXJNYW5hZ2VyLmxheWVycy5pbmRleE9mKGN1ckxheWVyRGV0YWlsKVxuICAgICAgICB0aGlzLmVtaXQoJ2NvbnRlbnRDaGFuZ2UnLCBuZXcgQ2FudmFzRXZlbnQoeyB3b3JrSWQ6IHRoaXMud29ya0lkICwgbGF5ZXJEZXRhaWw6IGN1ckxheWVyRGV0YWlsLCBwcmVDb250ZW50LCBpbmRleH0pKSBcbiAgICB9XG5cblxuIH1cbmZ1bmN0aW9uIGxvZ0NhbnZhc0RhdGEocmVwPScnLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgIGNvbnNvbGUubG9nKHJlcCwgY3R4Py5nZXRJbWFnZURhdGEoMCwwLDEsMSkuZGF0YSkgXG4gfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29\n')},33:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PCanvasContext", function() { return PCanvasContext; });\n/* harmony import */ var _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27);\n/* harmony import */ var _top_tool_bar_tool_item_brush__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n\nvar PCanvasContext = /*#__PURE__*/function () {\n  function PCanvasContext(curCanvas, curCanvasContext2D, width, height) {\n    var brush = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new _top_tool_bar_tool_item_brush__WEBPACK_IMPORTED_MODULE_1__["Brush"]();\n    var color = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _top_tool_bar_tool_item_color_selector_rgba__WEBPACK_IMPORTED_MODULE_0__["RGBA"].BLACK.toRGBAString();\n    var brushWidth = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 100;\n\n    _classCallCheck(this, PCanvasContext);\n\n    this.curCanvas = curCanvas;\n    this.curCanvasContext2D = curCanvasContext2D;\n    this.width = width;\n    this.height = height;\n    this.brush = brush;\n    this.color = color;\n    this.brushWidth = brushWidth;\n  }\n\n  _createClass(PCanvasContext, [{\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return PCanvasContext;\n}();\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(PCanvasContext, "PCanvasContext", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcanvas.context.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY2FudmFzLmNvbnRleHQudHM/ZGE5OSJdLCJuYW1lcyI6WyJQQ2FudmFzQ29udGV4dCIsImN1ckNhbnZhcyIsImN1ckNhbnZhc0NvbnRleHQyRCIsIndpZHRoIiwiaGVpZ2h0IiwiYnJ1c2giLCJCcnVzaCIsImNvbG9yIiwiUkdCQSIsIkJMQUNLIiwidG9SR0JBU3RyaW5nIiwiYnJ1c2hXaWR0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFTyxJQUFNQSxjQUFiO0FBRUksMEJBRVdDLFNBRlgsRUFPV0Msa0JBUFgsRUFTV0MsS0FUWCxFQVdXQyxNQVhYLEVBb0JDO0FBQUEsUUFQVUMsS0FPVix1RUFQeUIsSUFBSUMsbUVBQUosRUFPekI7QUFBQSxRQUxVQyxLQUtWLHVFQUwwQkMsZ0ZBQUksQ0FBQ0MsS0FBTCxDQUFXQyxZQUFYLEVBSzFCO0FBQUEsUUFIVUMsVUFHVix1RUFIK0IsR0FHL0I7O0FBQUE7O0FBQUEsU0FsQlVWLFNBa0JWLEdBbEJVQSxTQWtCVjtBQUFBLFNBYlVDLGtCQWFWLEdBYlVBLGtCQWFWO0FBQUEsU0FYVUMsS0FXVixHQVhVQSxLQVdWO0FBQUEsU0FUVUMsTUFTVixHQVRVQSxNQVNWO0FBQUEsU0FQVUMsS0FPVixHQVBVQSxLQU9WO0FBQUEsU0FMVUUsS0FLVixHQUxVQSxLQUtWO0FBQUEsU0FIVUksVUFHVixHQUhVQSxVQUdWO0FBQUU7O0FBdEJQO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7Ozs7Ozs7OzswQkFBYVgsYyIsImZpbGUiOiIzMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJHQkEgfSBmcm9tIFwiLi4vdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9jb2xvci1zZWxlY3Rvci9yZ2JhXCI7XG5pbXBvcnQgeyBCcnVzaCB9IGZyb20gXCIuLi90b3AtdG9vbC1iYXIvdG9vbC1pdGVtL2JydXNoXCI7XG5cbmV4cG9ydCBjbGFzcyBQQ2FudmFzQ29udGV4dCB7XG5cbiAgICBjb25zdHJ1Y3RvcihcblxuICAgICAgICBwdWJsaWMgY3VyQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcblxuICAgICAgICAvKipcbiAgICAgICAgICog5b2T5YmN6YCJ5Lit5Zu+5bGC55qEY29udGV4dC5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBjdXJDYW52YXNDb250ZXh0MkQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyB3aWR0aDogbnVtYmVyLFxuXG4gICAgICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlcixcblxuICAgICAgICBwdWJsaWMgYnJ1c2g6IEJydXNoID0gbmV3IEJydXNoKCksXG5cbiAgICAgICAgcHVibGljIGNvbG9yOiBzdHJpbmcgPSBSR0JBLkJMQUNLLnRvUkdCQVN0cmluZygpLFxuXG4gICAgICAgIHB1YmxpYyBicnVzaFdpZHRoOiBudW1iZXIgPSAxMDAsXG5cblxuICAgICl7fVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///33\n')},34:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PcanvasLayers", function() { return PcanvasLayers; });\n/* harmony import */ var _workStorage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\nvar PcanvasLayers = /*#__PURE__*/function () {\n  /**\n   * 临时图层,始终位于当前绘制图层的上方.\n   */\n\n  /**\n   * 当前绘制的图层.\n   */\n  function PcanvasLayers(wrapInfo) {\n    _classCallCheck(this, PcanvasLayers);\n\n    this.wrapInfo = wrapInfo;\n    this.tempLayer = void 0;\n    this.layers = void 0;\n    this.focusedLayerDetail = void 0;\n  }\n\n  _createClass(PcanvasLayers, [{\n    key: "init",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(layers) {\n        var wrapInfo, wrap, cover, lastElement;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                wrapInfo = this.wrapInfo;\n                wrap = wrapInfo.wrap, cover = wrapInfo.cover;\n                lastElement = cover;\n                this.layers = layers;\n                layers.forEach(function (layer, index) {\n                  var canvas = layer.canvas,\n                      layerId = layer.layerId,\n                      visible = layer.visible;\n                  wrap.insertBefore(canvas, lastElement);\n                  lastElement = canvas;\n\n                  if (!visible) {\n                    canvas.className = \'unvisible\';\n                  }\n                });\n                this.tempLayer = _workStorage__WEBPACK_IMPORTED_MODULE_0__[/* LayerDetail */ "a"].create(wrapInfo);\n                wrap.insertBefore(this.tempLayer.canvas, cover); // console.log(\'this.tempLayer: \', this.tempLayer.layerId)\n\n                this.focusedLayerDetail = layers[0];\n\n              case 8:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: "getCanvas",\n    value: function getCanvas() {\n      return this.tempLayer.canvas;\n    }\n  }, {\n    key: "applyTempCanvas",\n    value: function applyTempCanvas() {\n      var ctx = this.focusedLayerDetail.canvas.getContext(\'2d\');\n      var tempCtx = this.tempLayer.canvas.getContext(\'2d\');\n\n      if (ctx && tempCtx) {\n        var _this$tempLayer$canva = this.tempLayer.canvas,\n            width = _this$tempLayer$canva.width,\n            height = _this$tempLayer$canva.height;\n        ctx.drawImage(this.tempLayer.canvas, 0, 0, width, height);\n        tempCtx.clearRect(0, 0, width, height);\n      }\n    }\n  }, {\n    key: "getFocusDetail",\n    value: function getFocusDetail() {\n      return this.focusedLayerDetail;\n    }\n  }, {\n    key: "focusLayer",\n    value: function focusLayer(layerDetail) {\n      var nextLayer = this.layers[this.layers.indexOf(layerDetail) - 1];\n      var nextCanvas = nextLayer && nextLayer.canvas && nextLayer !== this.tempLayer ? nextLayer.canvas : this.wrapInfo.cover;\n      this.wrapInfo.wrap.insertBefore(this.tempLayer.canvas, nextCanvas);\n      this.focusedLayerDetail = layerDetail; // TOFIX: update templyer in layers.\n    }\n  }, {\n    key: "addLayer",\n    value: function addLayer(newLayer) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var wrap = this.wrapInfo.wrap;\n      var oldLayerDetail = this.layers[index - 1];\n      var ele = oldLayerDetail && oldLayerDetail.canvas || this.wrapInfo.cover;\n      wrap.insertBefore(newLayer.canvas, ele);\n      this.layers.splice(index, 0, newLayer);\n      return newLayer;\n    }\n  }, {\n    key: "removeLayer",\n    value: function removeLayer(layerDetail) {\n      var index = this.layers.indexOf(layerDetail);\n\n      if (index > -1) {\n        this.wrapInfo.wrap.removeChild(layerDetail.canvas);\n        this.layers.splice(index, 1);\n      } else {\n        console.warn(\'layerDetail has been removed\');\n      }\n\n      return {\n        index: index,\n        isFocus: this.focusedLayerDetail === layerDetail\n      };\n    }\n  }, {\n    key: "getContext",\n    value: function getContext() {\n      var ctx = this.tempLayer.canvas.getContext(\'2d\');\n\n      if (ctx === null) {\n        throw \'get context faliled.\';\n      }\n\n      ctx.imageSmoothingEnabled = false;\n      return ctx;\n    }\n  }, {\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return PcanvasLayers;\n}();\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(PcanvasLayers, "PcanvasLayers", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/pcanvas/pcanvas.layer.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvcGNhbnZhcy9wY2FudmFzLmxheWVyLnRzPzY0OWMiXSwibmFtZXMiOlsiUGNhbnZhc0xheWVycyIsIndyYXBJbmZvIiwidGVtcExheWVyIiwibGF5ZXJzIiwiZm9jdXNlZExheWVyRGV0YWlsIiwid3JhcCIsImNvdmVyIiwibGFzdEVsZW1lbnQiLCJmb3JFYWNoIiwibGF5ZXIiLCJpbmRleCIsImNhbnZhcyIsImxheWVySWQiLCJ2aXNpYmxlIiwiaW5zZXJ0QmVmb3JlIiwiY2xhc3NOYW1lIiwiTGF5ZXJEZXRhaWwiLCJjcmVhdGUiLCJjdHgiLCJnZXRDb250ZXh0IiwidGVtcEN0eCIsIndpZHRoIiwiaGVpZ2h0IiwiZHJhd0ltYWdlIiwiY2xlYXJSZWN0IiwibGF5ZXJEZXRhaWwiLCJuZXh0TGF5ZXIiLCJpbmRleE9mIiwibmV4dENhbnZhcyIsIm5ld0xheWVyIiwib2xkTGF5ZXJEZXRhaWwiLCJlbGUiLCJzcGxpY2UiLCJyZW1vdmVDaGlsZCIsImNvbnNvbGUiLCJ3YXJuIiwiaXNGb2N1cyIsImltYWdlU21vb3RoaW5nRW5hYmxlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBVU8sSUFBTUEsYUFBYjtBQUVJOzs7O0FBTUE7OztBQUtBLHlCQUE0QkMsUUFBNUIsRUFBK0M7QUFBQTs7QUFBQSxTQUFuQkEsUUFBbUIsR0FBbkJBLFFBQW1CO0FBQUEsU0FSckNDLFNBUXFDO0FBQUEsU0FOeENDLE1BTXdDO0FBQUEsU0FGckNDLGtCQUVxQztBQUFFOztBQWJyRDtBQUFBO0FBQUE7QUFBQSwyRkFnQmdCRCxNQWhCaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUJZRix3QkFqQlosR0FpQnVCLEtBQUtBLFFBakI1QjtBQWtCY0ksb0JBbEJkLEdBa0I4QkosUUFsQjlCLENBa0JjSSxJQWxCZCxFQWtCb0JDLEtBbEJwQixHQWtCOEJMLFFBbEI5QixDQWtCb0JLLEtBbEJw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O0FBQUE7QUFBQTs7Ozs7Ozs7OzswQkFBYWxCLGEiLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMYXllckRldGFpbCB9IGZyb20gXCIuLi8uLi8uLi93b3JrU3RvcmFnZVwiO1xuaW1wb3J0IHsgY29weUNhbnZhcyB9IGZyb20gJ0AvdXRpbC9jYW52YXMnXG5cbmV4cG9ydCB0eXBlIFdyYXBJbmZvID0geyBcbiAgcmVhZG9ubHkgIHdyYXA6IEhUTUxFbGVtZW50LFxuICByZWFkb25seSAgY292ZXI6IEhUTUxFbGVtZW50LFxuICByZWFkb25seSAgd2lkdGg6IG51bWJlcixcbiAgcmVhZG9ubHkgIGhlaWdodDogbnVtYmVyLFxuIH1cblxuZXhwb3J0IGNsYXNzIFBjYW52YXNMYXllcnN7XG5cbiAgICAvKipcbiAgICAgKiDkuLTml7blm77lsYIs5aeL57uI5L2N5LqO5b2T5YmN57uY5Yi25Zu+5bGC55qE5LiK5pa5LlxuICAgICAqL1xuICAgIHByb3RlY3RlZCB0ZW1wTGF5ZXI6TGF5ZXJEZXRhaWw7XG5cbiAgICBwdWJsaWMgbGF5ZXJzOiAgTGF5ZXJEZXRhaWw8SFRNTENhbnZhc0VsZW1lbnQ+W10gXG4gICAgLyoqXG4gICAgICog5b2T5YmN57uY5Yi255qE5Zu+5bGCLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBmb2N1c2VkTGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHdyYXBJbmZvOiBXcmFwSW5mbyl7fVxuXG5cbiAgICBhc3luYyBpbml0KCBsYXllcnM6IExheWVyRGV0YWlsW10pOiBQcm9taXNlPHZvaWQ+e1xuICAgICAgY29uc3Qgd3JhcEluZm8gPSB0aGlzLndyYXBJbmZvXG4gICAgICBjb25zdCB7IHdyYXAsIGNvdmVyIH0gPSB3cmFwSW5mb1xuICAgICAgbGV0IGxhc3RFbGVtZW50OiBIVE1MRWxlbWVudD0gY292ZXJcbiAgICAgIHRoaXMubGF5ZXJzID0gbGF5ZXJzXG4gICAgICBsYXllcnMuZm9yRWFjaCggKGxheWVyLGluZGV4KSA9PiB7XG4gICAgICBjb25zdCB7IGNhbnZhcywgbGF5ZXJJZCwgdmlzaWJsZSB9ID0gbGF5ZXJcbiAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKCBjYW52YXMsIGxhc3RFbGVtZW50KTtcbiAgICAgICAgbGFzdEVsZW1lbnQgPSBjYW52YXNcbiAgICAgICAgaWYoIXZpc2libGUpe1xuICAgICAgICAgICAgY2FudmFzLmNsYXNzTmFtZSA9ICd1bnZpc2libGUnXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHRoaXMudGVtcExheWVyID0gTGF5ZXJEZXRhaWwuY3JlYXRlKHdyYXBJbmZvKVxuICAgICAgd3JhcC5pbnNlcnRCZWZvcmUoIHRoaXMudGVtcExheWVyLmNhbnZhcywgY292ZXIpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMudGVtcExheWVyOiAnLCB0aGlzLnRlbXBMYXllci5sYXllcklkKVxuICAgICAgdGhpcy5mb2N1c2VkTGF5ZXJEZXRhaWwgPSBsYXllcnNbMF1cbiAgICB9XG5cbiAgICBnZXRDYW52YXMoKTpIVE1MQ2FudmFzRWxlbWVudHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcExheWVyLmNhbnZhc1xuICAgIH1cblxuICAgIGFwcGx5VGVtcENhbnZhcygpOiB2b2lke1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmZvY3VzZWRMYXllckRldGFpbC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgICAgICBjb25zdCB0ZW1wQ3R4ID0gdGhpcy50ZW1wTGF5ZXIuY2FudmFzLmdldENvbnRleHQoJzJkJylcbiAgICAgICAgaWYoY3R4ICYmIHRlbXBDdHgpe1xuICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0ICB9ID0gdGhpcy50ZW1wTGF5ZXIuY2FudmFzXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMudGVtcExheWVyLmNhbnZhcywgMCwgMCwgd2lkdGgsIGhlaWdodClcbiAgICAgICAgICAgIHRlbXBDdHguY2xlYXJSZWN0KDAsIDAgLHdpZHRoLCBoZWlnaHQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRGb2N1c0RldGFpbCgpOiBMYXllckRldGFpbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvY3VzZWRMYXllckRldGFpbFxuICAgIH1cblxuICAgIGZvY3VzTGF5ZXIobGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsKXtcbiAgICAgICAgY29uc3QgbmV4dExheWVyID0gdGhpcy5sYXllcnNbdGhpcy5sYXllcnMuaW5kZXhPZihsYXllckRldGFpbCkgLSAxXVxuICAgICAgICBjb25zdCBuZXh0Q2FudmFzID0gbmV4dExheWVyJiZuZXh0TGF5ZXIuY2FudmFzICYmIG5leHRMYXllciAhPT0gdGhpcy50ZW1wTGF5ZXIgPyBuZXh0TGF5ZXIuY2FudmFzIDogIHRoaXMud3JhcEluZm8uY292ZXJcbiAgICAgICAgdGhpcy53cmFwSW5mby53cmFwLmluc2VydEJlZm9yZSh0aGlzLnRlbXBMYXllci5jYW52YXMsIG5leHRDYW52YXMpXG4gICAgICAgIHRoaXMuZm9jdXNlZExheWVyRGV0YWlsID0gbGF5ZXJEZXRhaWxcbiAgICAgICAgLy8gVE9GSVg6IHVwZGF0ZSB0ZW1wbHllciBpbiBsYXllcnMuXG4gICAgfVxuXG4gICAgYWRkTGF5ZXIobmV3TGF5ZXI6IExheWVyRGV0YWlsLCBpbmRleCA9IDApe1xuICAgICAgICBjb25zdCB7IHdyYXAgfSA9IHRoaXMud3JhcEluZm9cbiAgICAgICAgY29uc3Qgb2xkTGF5ZXJEZXRhaWwgPSB0aGlzLmxheWVyc1tpbmRleC0xXVxuICAgICAgICBjb25zdCBlbGUgPSBvbGRMYXllckRldGFpbCYmb2xkTGF5ZXJEZXRhaWwuY2FudmFzIHx8IHRoaXMud3JhcEluZm8uY292ZXJcbiAgICAgICAgd3JhcC5pbnNlcnRCZWZvcmUobmV3TGF5ZXIuY2FudmFzLCBlbGUpXG4gICAgICAgIHRoaXMubGF5ZXJzLnNwbGljZShpbmRleCwgMCwgbmV3TGF5ZXIpXG4gICAgICAgIHJldHVybiBuZXdMYXllclxuICAgIH1cblxuXG4gICAgcmVtb3ZlTGF5ZXIobGF5ZXJEZXRhaWw6IExheWVyRGV0YWlsKXtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxheWVycy5pbmRleE9mKGxheWVyRGV0YWlsKVxuICAgICAgICBpZihpbmRleCA+IC0xKXtcbiAgICAgICAgICAgIHRoaXMud3JhcEluZm8ud3JhcC5yZW1vdmVDaGlsZChsYXllckRldGFpbC5jYW52YXMpXG4gICAgICAgICAgICB0aGlzLmxheWVycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdsYXllckRldGFpbCBoYXMgYmVlbiByZW1vdmVkJylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpbmRleCwgaXNGb2N1czogIHRoaXMuZm9jdXNlZExheWVyRGV0YWlsID09PSBsYXllckRldGFpbH1cbiAgICB9XG5cbiAgICBnZXRDb250ZXh0KCl7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMudGVtcExheWVyLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgICAgIGlmKGN0eCA9PT0gbnVsbCl7XG4gICAgICAgICAgICB0aHJvdyAnZ2V0IGNvbnRleHQgZmFsaWxlZC4nXG4gICAgICAgIH1cbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlXG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuXG5cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///34\n')},5:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Brush", function() { return Brush; });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(28);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\n\n/**\n * 带压感的brush，bug待修复.\n * 根据移动，与context, 控制画出的形状并填充.\n */\n\nvar Brush = /*#__PURE__*/function () {\n  function Brush() {\n    _classCallCheck(this, Brush);\n\n    this.type = _types__WEBPACK_IMPORTED_MODULE_0__["BrushType"].pen;\n    this.name = \'default\';\n    this.isPainting = false;\n    this.pathList = [];\n  }\n\n  _createClass(Brush, [{\n    key: "init",\n    value: function init() {}\n  }, {\n    key: "destory",\n    value: function destory() {}\n  }, {\n    key: "onStart",\n    value: function onStart(status, context) {\n      var ctx = context.curCanvasContext2D,\n          color = context.color,\n          brushWidth = context.brushWidth;\n      this.isPainting = true;\n      this.pathList.push(status);\n      ctx.strokeStyle = color;\n      ctx.lineWidth = brushWidth;\n      ctx.lineCap = \'round\';\n    }\n  }, {\n    key: "onDraw",\n    value: function onDraw(brushStatus, contx) {\n      if (this.isPainting) {\n        var ctx = contx.curCanvasContext2D;\n\n        for (var i = 0; i < brushStatus.length; i++) {\n          this.pathList.push(brushStatus[i]);\n        }\n\n        this.paintPath(ctx);\n      }\n    }\n  }, {\n    key: "paintPath",\n    value: function paintPath(ctx) {\n      var _this = this;\n\n      requestAnimationFrame(function () {\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.beginPath();\n        var f = _this.pathList[0];\n        ctx.moveTo(f.x, f.y);\n\n        for (var i = 1; i < _this.pathList.length; i++) {\n          var _this$pathList$i = _this.pathList[i],\n              x = _this$pathList$i.x,\n              y = _this$pathList$i.y;\n          ctx.lineTo(x, y);\n        } // ctx.closePath()\n\n\n        ctx.stroke();\n      });\n    }\n  }, {\n    key: "onEnd",\n    value: function onEnd(brushStatus, contx) {\n      this.isPainting = false;\n      this.pathList = [];\n    }\n  }, {\n    key: "__reactstandin__regenerateByEval",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Brush;\n}();\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Brush, "Brush", "/Users/muyin/Documents/code/WebPencil/src/pages/paint/top-tool-bar/tool-item/brush/index.ts");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFpbnQvdG9wLXRvb2wtYmFyL3Rvb2wtaXRlbS9icnVzaC9pbmRleC50cz8yMjY2Il0sIm5hbWVzIjpbIkJydXNoIiwidHlwZSIsIkJydXNoVHlwZSIsInBlbiIsIm5hbWUiLCJpc1BhaW50aW5nIiwicGF0aExpc3QiLCJzdGF0dXMiLCJjb250ZXh0IiwiY3R4IiwiY3VyQ2FudmFzQ29udGV4dDJEIiwiY29sb3IiLCJicnVzaFdpZHRoIiwicHVzaCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwibGluZUNhcCIsImJydXNoU3RhdHVzIiwiY29udHgiLCJpIiwibGVuZ3RoIiwicGFpbnRQYXRoIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2xlYXJSZWN0IiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJmIiwibW92ZVRvIiwieCIsInkiLCJsaW5lVG8iLCJzdHJva2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBRUE7Ozs7O0FBSU8sSUFBTUEsS0FBYjtBQUFBO0FBQUE7O0FBQUEsU0FHYUMsSUFIYixHQUcrQkMsZ0RBQVMsQ0FBQ0MsR0FIekM7QUFBQSxTQUthQyxJQUxiLEdBS29CLFNBTHBCO0FBQUEsU0FPY0MsVUFQZCxHQU8yQixLQVAzQjtBQUFBLFNBU2NDLFFBVGQsR0FTb0MsRUFUcEM7QUFBQTs7QUFBQTtBQUFBO0FBQUEsMkJBV1UsQ0FBRTtBQVhaO0FBQUE7QUFBQSw4QkFhYSxDQUFFO0FBYmY7QUFBQTtBQUFBLDRCQWVZQyxNQWZaLEVBZWlDQyxPQWZqQyxFQWUwRDtBQUFBLFVBQ3ZCQyxHQUR1QixHQUNHRCxPQURILENBQzNDRSxrQkFEMkM7QUFBQSxVQUNsQkMsS0FEa0IsR0FDR0gsT0FESCxDQUNsQkcsS0FEa0I7QUFBQSxVQUNYQyxVQURXLEdBQ0dKLE9BREgsQ0FDWEksVUFEVztBQUVsRCxXQUFLUCxVQUFMLEdBQWtCLElBQWxCO0FBQ0EsV0FBS0MsUUFBTCxDQUFjTyxJQUFkLENBQW1CTixNQUFuQjtBQUNBRSxTQUFHLENBQUNLLFdBQUosR0FBa0JILEtBQWxCO0FBQ0FGLFNBQUcsQ0FBQ00sU0FBSixHQUFnQkgsVUFBaEI7QUFDQUgsU0FBRyxDQUFDTyxPQUFKLEdBQWEsT0FBYjtBQUVIO0FBdkJMO0FBQUE7QUFBQSwyQkEyQldDLFdBM0JYLEVBMkJ1Q0MsS0EzQnZDLEVBMkJvRTtBQUM1RCxVQUFHLEtBQUtiLFVBQVIsRUFBbUI7QUFBQSxZQUNjSSxHQURkLEdBQ3NCUyxLQUR0QixDQUNOUixrQkFETTs7QUFFZixhQUFLLElBQUlTLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUVGLFdBQVcsQ0FBQ0csTUFBL0IsRUFBdUNELENBQUMsRUFBeEMsRUFBMkM7QUFDekMsZUFBS2IsUUFBTCxDQUFjTyxJQUFkLENBQW9CSSxXQUFXLENBQUNFLENBQUQsQ0FBL0I7QUFDRDs7QUFDRCxhQUFLRSxTQUFMLENBQWVaLEdBQWY7QUFDSDtBQUNKO0FBbkNMO0FBQUE7QUFBQSw4QkFxQ3dCQSxHQXJDeEIsRUFxQ3NEO0FBQUE7O0FBQ2hEYSwyQkFBcUIsQ0FBQyxZQUFNO0FBQzFCYixXQUFHLENBQUNjLFNBQUosQ0FBYyxDQUFkLEVBQWdCLENBQWhCLEVBQW1CZCxHQUFHLENBQUNlLE1BQUosQ0FBV0MsS0FBOUIsRUFBcUNoQixHQUFHLENBQUNlLE1BQUosQ0FBV0UsTUFBaEQ7QUFDQWpCLFdBQUcsQ0FBQ2tCLFNBQUo7QUFDQSxZQUFNQyxDQUFDLEdBQUcsS0FBSSxDQUFDdEIsUUFBTCxDQUFjLENBQWQsQ0FBVjtBQUNBRyxXQUFHLENBQUNvQixNQUFKLENBQVdELENBQUMsQ0FBQ0UsQ0FBYixFQUFnQkYsQ0FBQyxDQUFDRyxDQUFsQjs7QUFDQSxhQUFLLElBQUlaLENBQUMsR0FBRSxDQUFaLEVBQWVBLENBQUMsR0FBRSxLQUFJLENBQUNiLFFBQUwsQ0FBY2MsTUFBaEMsRUFBd0NELENBQUMsRUFBekMsRUFBNkM7QUFBQSxpQ0FDNUIsS0FBSSxDQUFDYixRQUFMLENBQWNhLENBQWQsQ0FENEI7QUFBQSxjQUNwQ1csQ0FEb0Msb0JBQ3BDQSxDQURvQztBQUFBLGNBQ2pDQyxDQURpQyxvQkFDakNBLENBRGlDO0FBRTNDdEIsYUFBRyxDQUFDdUIsTUFBSixDQUFXRixDQUFYLEVBQWFDLENBQWI7QUFDRCxTQVJ5QixDQVMxQjs7O0FBQ0F0QixXQUFHLENBQUN3QixNQUFKO0FBQ0QsT0FYb0IsQ0FBckI7QUFZRDtBQWxETDtBQUFBO0FBQUEsMEJBb0RVaEIsV0FwRFYsRUFvRG9DQyxLQXBEcEMsRUFvRDJEO0FBQ25ELFdBQUtiLFVBQUwsR0FBa0IsS0FBbEI7QUFDQSxXQUFLQyxRQUFMLEdBQWdCLEVBQWhCO0FBQ0g7QUF2REw7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOzs7Ozs7Ozs7OzBCQUFhTixLIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQQ2FudmFzQ29udGV4dCB9IGZyb20gXCIuLi8uLi8uLi9wY2FudmFzL3BjYW52YXMuY29udGV4dFwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsL2RhdGEvVmVjdG9yMlwiO1xuaW1wb3J0IHsgQnJ1c2hUeXBlLCBCcnVzaFN0YXR1cywgQWJzdHJhY3RCcnVzaCB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbi8qKlxuICog5bim5Y6L5oSf55qEYnJ1c2jvvIxidWflvoXkv67lpI0uXG4gKiDmoLnmja7np7vliqjvvIzkuI5jb250ZXh0LCDmjqfliLbnlLvlh7rnmoTlvaLnirblubbloavlhYUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCcnVzaCAgaW1wbGVtZW50cyBBYnN0cmFjdEJydXNoIHtcblxuXG4gICAgcmVhZG9ubHkgdHlwZTogQnJ1c2hUeXBlID0gQnJ1c2hUeXBlLnBlblxuXG4gICAgcmVhZG9ubHkgbmFtZSA9ICdkZWZhdWx0J1xuXG4gICAgcHJvdGVjdGVkIGlzUGFpbnRpbmcgPSBmYWxzZVxuXG4gICAgcHJvdGVjdGVkIHBhdGhMaXN0OiBWZWN0b3IyW10gPSBbXVxuXG4gICAgaW5pdCgpe31cblxuICAgIGRlc3RvcnkoKXt9XG5cbiAgICBvblN0YXJ0KHN0YXR1czogQnJ1c2hTdGF0dXMsIGNvbnRleHQ6IFBDYW52YXNDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHtjdXJDYW52YXNDb250ZXh0MkQ6IGN0eCwgY29sb3IsIGJydXNoV2lkdGh9ID0gY29udGV4dFxuICAgICAgICB0aGlzLmlzUGFpbnRpbmcgPSB0cnVlXG4gICAgICAgIHRoaXMucGF0aExpc3QucHVzaChzdGF0dXMpXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBicnVzaFdpZHRoXG4gICAgICAgIGN0eC5saW5lQ2FwID0ncm91bmQnXG4gICAgICAgXG4gICAgfVxuXG4gIFxuXG4gICAgb25EcmF3KGJydXNoU3RhdHVzOiBCcnVzaFN0YXR1c1tdLCBjb250eDogUENhbnZhc0NvbnRleHQpOiB2b2lkIHtcbiAgICAgICAgaWYodGhpcy5pc1BhaW50aW5nKXtcbiAgICAgICAgICAgIGNvbnN0ICB7IGN1ckNhbnZhc0NvbnRleHQyRDogY3R4IH0gPSBjb250eFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGk8IGJydXNoU3RhdHVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgdGhpcy5wYXRoTGlzdC5wdXNoKCBicnVzaFN0YXR1c1tpXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFpbnRQYXRoKGN0eCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcGFpbnRQYXRoKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodClcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGNvbnN0IGYgPSB0aGlzLnBhdGhMaXN0WzBdXG4gICAgICAgIGN0eC5tb3ZlVG8oZi54LCBmLnkgKVxuICAgICAgICBmb3IoIGxldCBpID0xOyBpPCB0aGlzLnBhdGhMaXN0Lmxlbmd0aDsgaSsrICl7XG4gICAgICAgICAgY29uc3Qge3gsIHl9ID0gdGhpcy5wYXRoTGlzdFtpXVxuICAgICAgICAgIGN0eC5saW5lVG8oeCx5KVxuICAgICAgICB9XG4gICAgICAgIC8vIGN0eC5jbG9zZVBhdGgoKVxuICAgICAgICBjdHguc3Ryb2tlKClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgb25FbmQoYnJ1c2hTdGF0dXM6IEJydXNoU3RhdHVzLCBjb250eDogUENhbnZhc0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5pc1BhaW50aW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5wYXRoTGlzdCA9IFtdXG4gICAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n')}}]);