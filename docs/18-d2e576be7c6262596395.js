(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{24:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,a){return r&&_defineProperties(e.prototype,r),a&&_defineProperties(e,a),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,r){_classCallCheck(this,RecordInfo),this.type=e,this.data=r}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var r=e.type,a=e.data;if("add"===r){var o=a,t=o.index,n=o.canvas;return new RecordInfo("remove",{index:t,canvas:n})}if("modify"===r){var d=a,c=d.index,i=d.from,s=d.to;return new RecordInfo("modify",{index:c,from:s,to:i})}var l=a,u=l.index,_=l.canvas;return new RecordInfo("add",{index:u,canvas:_})},handleOperate=function(e,r){var a=e.type,o=e.data;if(console.log("handleOperate: ",a),"add"!==a)if("modify"!==a)if("remove"!==a);else{var t=o.index;r.removeLayerByIndex(t,"history")}else{var n=o,d=n.index,c=(n.from,n.to),i=r.setLayerContent(d,c,"history");r.focusLayer(i)}else{var s=o,l=s.index,u=s.canvas,_=r.addLayerContent(l,u,"history");r.focusLayer(_)}},recordListReducer=function(e,r){var a=e.cursor,o=e.recorderList,t=r.type,n=r.payload,d=r.pCanvasController;switch(t){case"add":a<o.length-1&&o.splice(Math.max(a,0)),a++,n&&o.push(n);break;case"redo":if(++a<=o.length-1){var c=o[a];d&&handleOperate(c,d)}break;case"undo":if(a>-1){var i=o[a];d&&handleOperate(getRevertRecor(i),d)}a--}return{cursor:Math.max(Math.min(a,o.length-1),-1),recorderList:o}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))}}]);