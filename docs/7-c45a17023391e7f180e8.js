(window.webpackJsonp=window.webpackJsonp||[]).push([[7,15,24],{35:function(e,t,r){e.exports={recordBtnActive:"recordBtnActive_a74d3"}},44:function(e,t,r){var a=r(45),n="object"==typeof self&&self&&self.Object===Object&&self,o=a||n||Function("return this")();e.exports=o},45:function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(46))},46:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},47:function(e,t){var r=Array.isArray;e.exports=r},48:function(e,t,r){var a=r(49),n=0;e.exports=function(e){var t=++n;return a(e)+t}},49:function(e,t,r){var a=r(50);e.exports=function(e){return null==e?"":a(e)}},5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),antd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),antd__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__),_index_less__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(35),_index_less__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_2__),_workStorage_canvas_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54),enterModule;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var _,c=e[Symbol.iterator]();!(a=(_=c.next()).done)&&(r.push(_.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,t){_classCallCheck(this,RecordInfo),this.type=e,this.data=t}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var t=e.type,r=e.data;if("add"===t){var a=r,n=a.index,o=a.canvas;return new RecordInfo("remove",{index:n,canvas:o})}if("modify"===t){var _=r,c=_.index,i=_.from,d=_.to;return new RecordInfo("modify",{index:c,from:d,to:i})}var l=r,u=l.index,s=l.canvas;return new RecordInfo("add",{index:u,canvas:s})},handleOperate=function(e,t){var r=e.type,a=e.data;if("add"!==r)if("modify"!==r);else{var n=a,o=n.index,_=(n.from,n.to),c=t.setLayerContent(o,_);t.focusLayer(c)}else{var i=a,d=i.index,l=i.canvas,u=t.addLayerContent(d,l);t.focusLayer(u)}},_default=function(e){var t=e.pCanvasController,r=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1),2),a=r[0],n=r[1],o=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),_=a>=0,c=a<o.current.length-1;console.log(a,o.current.length);var i=function(){n((function(e){return o.current.length-1>e&&o.current.splice(Math.min(e,0)),e+1}))};Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var e=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.index;"history"!==e.creator&&(i(),o.current.push(new RecordInfo("add",{index:a,canvas:Object(_workStorage_canvas_util__WEBPACK_IMPORTED_MODULE_3__.a)(r)})))},r=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.preContent,n=t.index;"history"!==e.creator&&(i(),o.current.push(new RecordInfo("modify",{index:n,from:a,to:Object(_workStorage_canvas_util__WEBPACK_IMPORTED_MODULE_3__.a)(r)})))},a=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.index;"history"!==e.creator&&(i(),o.current.push(new RecordInfo("remove",{index:a,canvas:Object(_workStorage_canvas_util__WEBPACK_IMPORTED_MODULE_3__.a)(r)})))};return t.on("addLayer",e),t.on("contentChange",r),t.on("removeLayer",a),function(){t.off("addLayer",e),t.off("contentChange",r),t.off("removeLayer",a)}}),[]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:c&&_index_less__WEBPACK_IMPORTED_MODULE_2___default.a.recordBtnActive||"",onClick:function(){n((function(e){var t=Math.min(++e,o.current.length-1);o.current[t];return t}))}},"redo"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__.Divider,null),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:_&&_index_less__WEBPACK_IMPORTED_MODULE_2___default.a.recordBtnActive||"",onClick:function(){n((function(e){var t=Math.max(--e,-1);o.current[t];return t}))}},"undo"))},reactHotLoader,leaveModule;__signature__(_default,"useState{[ recorderCursor, setRecorderCursor ](-1)}\nuseRef{recorderRef}\nuseEffect{}"),__webpack_exports__.default=_default,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),reactHotLoader.register(RecordInfo,"RecordInfo","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),reactHotLoader.register(getRevertRecor,"getRevertRecor","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),reactHotLoader.register(handleOperate,"handleOperate","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),reactHotLoader.register(_default,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},50:function(e,t,r){var a=r(51),n=r(52),o=r(47),_=r(53),c=a?a.prototype:void 0,i=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return n(t,e)+"";if(_(t))return i?i.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},51:function(e,t,r){var a=r(44).Symbol;e.exports=a},52:function(e,t){e.exports=function(e,t){for(var r=-1,a=null==e?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}},53:function(e,t){e.exports=function(){return!1}},54:function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return d}));var a,n=r(48),o=r.n(n);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var _,c,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=document.createElement("canvas");a.width=e,a.height=t,a.setAttribute("uuid",o()("canvasId-"));var n=a.getContext("2d");return n&&r&&(n.fillStyle=r.toRGBAString(),n.fillRect(0,0,e,t)),a},d=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return null==r||r.drawImage(e,0,0,e.width,e.height),t};(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(_.register(i,"createCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts"),_.register(d,"copyCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(3)(e))}}]);