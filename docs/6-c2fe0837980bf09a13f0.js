(window.webpackJsonp=window.webpackJsonp||[]).push([[6,15,18,24],{24:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,r){_classCallCheck(this,RecordInfo),this.type=e,this.data=r}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var r=e.type,t=e.data;if("add"===r){var o=t,a=o.index,n=o.canvas;return new RecordInfo("remove",{index:a,canvas:n})}if("modify"===r){var c=t,d=c.index,i=c.from,l=c.to;return new RecordInfo("modify",{index:d,from:l,to:i})}var u=t,s=u.index,f=u.canvas;return new RecordInfo("add",{index:s,canvas:f})},handleOperate=function(e,r){var t=e.type,o=e.data;if(console.log("handleOperate: ",t),"add"!==t)if("modify"!==t)if("remove"!==t);else{var a=o.index;r.removeLayerByIndex(a,"history")}else{var n=o,c=n.index,d=(n.from,n.to),i=r.setLayerContent(c,d,"history");r.focusLayer(i)}else{var l=o,u=l.index,s=l.canvas,f=r.addLayerContent(u,s,"history");r.focusLayer(f)}},MAX_ROCORD_NUMBER=100,recordListReducer=function(e,r){var t=e.cursor,o=e.recorderList,a=r.type,n=r.payload,c=r.pCanvasController;switch(a){case"add":t<o.length-1&&o.splice(Math.max(t,0)),MAX_ROCORD_NUMBER<=o.length&&o.splice(0,o.length-MAX_ROCORD_NUMBER+1),t++,n&&o.push(n),console.log("recorlength: ",o.length);break;case"redo":if(++t<=o.length-1){var d=o[t];c&&handleOperate(d,c)}break;case"undo":if(t>-1){var i=o[t];c&&handleOperate(getRevertRecor(i),c)}t--}return{cursor:Math.max(Math.min(t,o.length-1),-1),recorderList:o}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(MAX_ROCORD_NUMBER,"MAX_ROCORD_NUMBER","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},35:function(e,r,t){e.exports={recordBtnActive:"recordBtnActive_a74d3"}},44:function(e,r,t){var o=t(45),a="object"==typeof self&&self&&self.Object===Object&&self,n=o||a||Function("return this")();e.exports=n},45:function(e,r,t){(function(r){var t="object"==typeof r&&r&&r.Object===Object&&r;e.exports=t}).call(this,t(46))},46:function(e,r){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},47:function(e,r){var t=Array.isArray;e.exports=t},48:function(e,r,t){var o=t(49),a=0;e.exports=function(e){var r=++a;return o(e)+r}},49:function(e,r,t){var o=t(50);e.exports=function(e){return null==e?"":o(e)}},5:function(e,r,t){"use strict";t.r(r),function(e){var o,a=t(0),n=t.n(a),c=t(1),d=t(35),i=t.n(d),l=t(54),u=t(24);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var t=[],o=!0,a=!1,n=void 0;try{for(var c,d=e[Symbol.iterator]();!(o=(c=d.next()).done)&&(t.push(c.value),!r||t.length!==r);o=!0);}catch(e){a=!0,n=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw n}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var f,v,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},_=function(e){var r=e.pCanvasController,t=s(Object(a.useReducer)(u.recordListReducer,{cursor:-1,recorderList:[]}),2),o=t[0],d=o.cursor,f=o.recorderList,v=t[1],p=d>=0,_=d<f.length-1;Object(a.useEffect)((function(){var e=function(e){var r=e.data,t=r.layerDetail.canvas,o=r.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("add",{index:o,canvas:Object(l.a)(t)})})},t=function(e){var r=e.data,t=r.layerDetail.canvas,o=r.preContent,a=r.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("modify",{index:a,from:o,to:Object(l.a)(t)})})},o=function(e){var r=e.data,t=r.layerDetail.canvas,o=r.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("remove",{index:o,canvas:Object(l.a)(t)})})};return r.on("addLayer",e),r.on("contentChange",t),r.on("removeLayer",o),function(){r.off("addLayer",e),r.off("contentChange",t),r.off("removeLayer",o)}}),[]);return n.a.createElement(a.Fragment,null,n.a.createElement("span",{className:_&&i.a.recordBtnActive||"",onPointerUp:_&&function(){v({type:"redo",pCanvasController:r})}||void 0},"redo"),n.a.createElement(c.Divider,null),n.a.createElement("span",{className:p&&i.a.recordBtnActive||"",onPointerUp:p&&function(){v({type:"undo",pCanvasController:r})}||void 0},"undo"))};p(_,"useReducer{[ {cursor, recorderList}, dispatchRecord ]({ cursor: -1, recorderList: []})}\nuseEffect{}"),r.default=_,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(_,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}.call(this,t(3)(e))},50:function(e,r,t){var o=t(51),a=t(52),n=t(47),c=t(53),d=o?o.prototype:void 0,i=d?d.toString:void 0;e.exports=function e(r){if("string"==typeof r)return r;if(n(r))return a(r,e)+"";if(c(r))return i?i.call(r):"";var t=r+"";return"0"==t&&1/r==-1/0?"-0":t}},51:function(e,r,t){var o=t(44).Symbol;e.exports=o},52:function(e,r){e.exports=function(e,r){for(var t=-1,o=null==e?0:e.length,a=Array(o);++t<o;)a[t]=r(e[t],t,e);return a}},53:function(e,r){e.exports=function(){return!1}},54:function(e,r,t){"use strict";(function(e){t.d(r,"b",(function(){return i})),t.d(r,"a",(function(){return l}));var o,a=t(48),n=t.n(a);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,d,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0,o=document.createElement("canvas");o.width=e,o.height=r,o.setAttribute("uuid",n()("canvasId-"));var a=o.getContext("2d");return a&&t&&(a.fillStyle=t.toRGBAString(),a.fillRect(0,0,e,r)),o},l=function(e){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var t=r.getContext("2d");return null==t||t.clearRect(0,0,r.width,r.height),null==t||t.drawImage(e,0,0,e.width,e.height),r};(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(i,"createCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts"),c.register(l,"copyCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,t(3)(e))}}]);