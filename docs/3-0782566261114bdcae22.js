(window.webpackJsonp=window.webpackJsonp||[]).push([[3,6,15,18,23,24],[,,,,,function(e,t,r){"use strict";r.r(t),function(e){var a,o=r(0),n=r.n(o),c=r(1),d=r(35),i=r.n(d),l=r(54),u=r(24);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],a=!0,o=!1,n=void 0;try{for(var c,d=e[Symbol.iterator]();!(a=(c=d.next()).done)&&(r.push(c.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==d.return||d.return()}finally{if(o)throw n}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var f,v,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=function(e){var t=e.pCanvasController,r=s(Object(o.useReducer)(u.recordListReducer,{cursor:-1,recorderList:[]}),2),a=r[0],d=a.cursor,f=a.recorderList,v=r[1],p=d>=0,b=d<f.length-1;Object(o.useEffect)((function(){var e=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("add",{index:a,canvas:Object(l.a)(r)})})},r=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.preContent,o=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("modify",{index:o,from:a,to:Object(l.a)(r)})})},a=function(e){var t=e.data,r=t.layerDetail.canvas,a=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("remove",{index:a,canvas:Object(l.a)(r)})})};return t.on("addLayer",e),t.on("contentChange",r),t.on("removeLayer",a),function(){t.off("addLayer",e),t.off("contentChange",r),t.off("removeLayer",a)}}),[]);return n.a.createElement(o.Fragment,null,n.a.createElement("span",{className:b&&i.a.recordBtnActive||"",onPointerUp:b&&function(){v({type:"redo",pCanvasController:t})}||void 0},"redo"),n.a.createElement(c.Divider,null),n.a.createElement("span",{className:p&&i.a.recordBtnActive||"",onPointerUp:p&&function(){v({type:"undo",pCanvasController:t})}||void 0},"undo"))};p(b,"useReducer{[ {cursor, recorderList}, dispatchRecord ]({ cursor: -1, recorderList: []})}\nuseEffect{}"),t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(b,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}.call(this,r(3)(e))},,function(e,t,r){"use strict";r.r(t),function(e){var a,o=r(0),n=r.n(o),c=r(1),d=r(37),i=r.n(d),l=r(5);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var u,s,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=function(e){var t=e.pCanvasController;Object(o.useEffect)((function(){if(t){var e=function(){t.setBrushWidth(1),t.setOpacity(1)};return t.on("init",e),function(){return t.off("init",e)}}}),[]);return n.a.createElement("div",{className:i.a.asideTool},n.a.createElement(c.Divider,null),n.a.createElement(c.Slider,{defaultValue:1,vertical:!0,min:1,max:200,step:2,onChange:function(e){t&&t.setBrushWidth(e)}}),n.a.createElement(c.Divider,null),n.a.createElement(c.Slider,{vertical:!0,defaultValue:1,min:0,max:1,step:.01,onChange:function(e){t&&t.setOpacity(e)}}),n.a.createElement(c.Divider,null),n.a.createElement(l.default,{pCanvasController:t}),n.a.createElement(c.Divider,null))};f(v,"useEffect{}"),t.default=v,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(1,"defaultWidth","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx"),u.register(1,"defaultOpacity","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx"),u.register(v,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}.call(this,r(3)(e))},,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,t){_classCallCheck(this,RecordInfo),this.type=e,this.data=t}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var t=e.type,r=e.data;if("add"===t){var a=r,o=a.index,n=a.canvas;return new RecordInfo("remove",{index:o,canvas:n})}if("modify"===t){var c=r,d=c.index,i=c.from,l=c.to;return new RecordInfo("modify",{index:d,from:l,to:i})}var u=r,s=u.index,f=u.canvas;return new RecordInfo("add",{index:s,canvas:f})},handleOperate=function(e,t){var r=e.type,a=e.data;if(console.log("handleOperate: ",r),"add"!==r)if("modify"!==r)if("remove"!==r);else{var o=a.index;t.removeLayerByIndex(o,"history")}else{var n=a,c=n.index,d=(n.from,n.to),i=t.setLayerContent(c,d,"history");t.focusLayer(i)}else{var l=a,u=l.index,s=l.canvas,f=t.addLayerContent(u,s,"history");t.focusLayer(f)}},MAX_ROCORD_NUMBER=200,recordListReducer=function(e,t){var r=e.cursor,a=e.recorderList,o=t.type,n=t.payload,c=t.pCanvasController;switch(o){case"add":r<a.length-1&&a.splice(Math.max(r,0)),MAX_ROCORD_NUMBER<=a.length&&a.splice(0,a.length-MAX_ROCORD_NUMBER+1),r++,n&&a.push(n);break;case"redo":if(++r<=a.length-1){var d=a[r];c&&handleOperate(d,c)}break;case"undo":if(r>-1){var i=a[r];c&&handleOperate(getRevertRecor(i),c)}r--}return{cursor:Math.max(Math.min(r,a.length-1),-1),recorderList:a}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(MAX_ROCORD_NUMBER,"MAX_ROCORD_NUMBER","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},,,,,,,,,,,function(e,t,r){e.exports={recordBtnActive:"recordBtnActive_a74d3"}},,function(e,t,r){e.exports={asideTool:"asideTool_faaa6"}},,,,,,,function(e,t,r){var a=r(45),o="object"==typeof self&&self&&self.Object===Object&&self,n=a||o||Function("return this")();e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(46))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var a=r(49),o=0;e.exports=function(e){var t=++o;return a(e)+t}},function(e,t,r){var a=r(50);e.exports=function(e){return null==e?"":a(e)}},function(e,t,r){var a=r(51),o=r(52),n=r(47),c=r(53),d=a?a.prototype:void 0,i=d?d.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(n(t))return o(t,e)+"";if(c(t))return i?i.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t,r){var a=r(44).Symbol;e.exports=a},function(e,t){e.exports=function(e,t){for(var r=-1,a=null==e?0:e.length,o=Array(a);++r<a;)o[r]=t(e[r],r,e);return o}},function(e,t){e.exports=function(){return!1}},function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return l}));var a,o=r(48),n=r.n(o);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,d,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=document.createElement("canvas");a.width=e,a.height=t,a.setAttribute("uuid",n()("canvasId-"));var o=a.getContext("2d");return o&&r&&(o.fillStyle=r.toRGBAString(),o.fillRect(0,0,e,t)),a},l=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return null==r||r.clearRect(0,0,t.width,t.height),null==r||r.drawImage(e,0,0,e.width,e.height),t};(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(i,"createCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts"),c.register(l,"copyCanvas","D:\\code\\WebPencil\\src\\workStorage\\canvas.util.ts")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(3)(e))}]]);