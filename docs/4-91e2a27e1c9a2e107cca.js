(window.webpackJsonp=window.webpackJsonp||[]).push([[4,29],{10:function(e,t,n){"use strict";n.r(t),function(e){var r,a=n(0),o=n.n(a),c=n(1),i=n(39),u=n.n(i),l=n(65);function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var d,v,y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p=function(e){var t=e.pCanvasController,n=s(Object(a.useState)([]),2),r=n[0],i=n[1],d=Object(a.useRef)({}),v=Object(a.useRef)([]),y=Object(l.a)(r,v,d).copyCanvas,p=s(Object(a.useState)(""),2),b=p[0],h=p[1],g=s(Object(a.useState)(!1),2),m=g[0],L=g[1],w=function(){L((function(e){return e||setTimeout(y),!e}))};Object(a.useEffect)((function(){var e=function(){for(var e=t.getLayers(),n=[],r=e.length-1;r>=0;r--){var a=e[r];n.push(a),v.current.push(a)}i((function(e){return[].concat(f(e),n)}))};return t.on("init",e),function(){return t.off("init",e)}}),[]),Object(a.useEffect)((function(){var e=function(e){var t=e.data.layerDetail;console.log("onFocusLayer..."),h(t.layerId)},n=function(e){var t=e.data.layerDetail;console.log("onAddLayer"),v.current.push(t),i((function(e){return[t].concat(f(e))}))},r=function(e){var t=e.data.layerDetail;i((function(e){var n=e.indexOf(t);return n>-1&&e.splice(n,1),f(e)}))},a=function(e){var t=e.data.layerDetail;t&&v.current.push(t)};return t.on("addLayer",n),t.on("contentChange",a),t.on("focusLayer",e),t.on("removeLayer",r),function(){t.off("contentChange",a),t.off("addLayer",n),t.off("focusLayer",e),t.off("removeLayer",r)}}),[]);return o.a.createElement("div",null,o.a.createElement(c.Tag,{onClick:w},"111"),o.a.createElement(c.Drawer,{title:null,width:200,visible:m,onClose:w},o.a.createElement(c.List,{header:o.a.createElement("span",{onClick:function(){t.addLayer()}},"+"),className:u.a.pannelWrap,itemLayout:"horizontal",dataSource:r,rowKey:"layerId",renderItem:function(e,n){var a=e.visible,i=e.layerId;e.name;return o.a.createElement(c.List.Item,{className:i===b?u.a.active:""},o.a.createElement(c.List.Item.Meta,{avatar:o.a.createElement("canvas",{onClick:function(){return n=e,void t.focusLayer(n);var n},key:i,id:i,ref:function(e){d.current[i]=e},className:u.a.canvases,width:"45",height:"45"}),title:o.a.createElement("span",null,"layer ".concat(r.length-n)),description:o.a.createElement("div",null,o.a.createElement("span",null,a?"visible":"unvisible"),o.a.createElement("span",{onClick:function(){return n=e,void t.removeLayer(n);var n}},"remove"))}))}})))};y(p,"useState{[layers, setLayers]([])}\nuseRef{canvasesRef}\nuseRef{needUpdateRef}\nuseCopyLayer{{ copyCanvas }}\nuseState{[ activeLayerId, setActiveLayerId ]('')}\nuseState{[ showLayerDraw, setShowLayerDraw ](false)}\nuseEffect{}\nuseEffect{}",(function(){return[l.a]})),t.default=p,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&d.register(p,"default","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\layer-pannel\\index.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}.call(this,n(3)(e))},39:function(e,t,n){e.exports={layerPannel:"layerPannel_e799a",pannelWrap:"pannelWrap_b4fbf",canvases:"canvases_b0d45",active:"active_1674e"}},47:function(e,t){var n=Array.isArray;e.exports=n},61:function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},65:function(e,t,n){"use strict";(function(e){var r,a=n(66),o=n.n(a),c=n(0);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var u,l,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},s=function(e,t){var n=t.getContext("2d");n&&(n.clearRect(0,0,t.width,t.height),n.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height))},d=function(e,t){var n=o()(e.current,(function(e){return e.layerId})),r=t.current;i(n).forEach((function(t){var n=r[t.layerId];if(n){console.log("map..",t.layerId),s(t.canvas,n);var a=e.current.findIndex((function(e){return e.layerId===t.layerId}));e.current.splice(a,1)}}))},v=function(e,t,n){var r=function(){return d(t,n)};return Object(c.useEffect)(r,[e]),{copyCanvas:r}};f(v,"useEffect{}"),t.a=v,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(s,"mapCanvas","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts"),u.register(d,"copCanvas","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts"),u.register(v,"default","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,n(3)(e))},66:function(e,t,n){var r=n(67),a=n(68);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},67:function(e,t){e.exports=function(e){return e}},68:function(e,t,n){var r=n(69),a=n(70),o=n(71),c=n(72),i=n(73),u=n(74);e.exports=function(e,t,n){var l=-1,f=a,s=e.length,d=!0,v=[],y=v;if(n)d=!1,f=o;else if(s>=200){var p=t?null:i(e);if(p)return u(p);d=!1,f=c,y=new r}else y=t?[]:v;e:for(;++l<s;){var b=e[l],h=t?t(b):b;if(b=n||0!==b?b:0,d&&h==h){for(var g=y.length;g--;)if(y[g]===h)continue e;t&&y.push(h),v.push(b)}else f(y,h,n)||(y!==v&&y.push(h),v.push(b))}return v}},69:function(e,t,n){var r=n(47);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return r(e)?e:[e]}},70:function(e,t,n){var r=n(61);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},71:function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},72:function(e,t,n){var r=n(61);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},73:function(e,t){e.exports=function(){}},74:function(e,t){e.exports=function(){return[]}}}]);