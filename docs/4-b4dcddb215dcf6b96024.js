(window.webpackJsonp=window.webpackJsonp||[]).push([[4,12,17,23,24,25,26,27,28,29],[,,,,,function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),o=r.n(a),c=r(1),i=r(35),l=r.n(i),u=r(48),s=r(24);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=function(e){var t=e.pCanvasController,r=d(Object(a.useReducer)(s.recordListReducer,{cursor:-1,recorderList:[]}),2),n=r[0],i=n.cursor,f=n.recorderList,p=r[1],v=i>=0,b=i<f.length-1;Object(a.useEffect)((function(){var e=function(e){var t=e.data,r=t.layerDetail.canvas,n=t.index;"history"!==e.creator&&p({type:"add",payload:new s.RecordInfo("add",{index:n,canvas:Object(u.a)(r)})})},r=function(e){var t=e.data,r=t.layerDetail.canvas,n=t.preContent,a=t.index;"history"!==e.creator&&p({type:"add",payload:new s.RecordInfo("modify",{index:a,from:n,to:Object(u.a)(r)})})},n=function(e){var t=e.data,r=t.layerDetail.canvas,n=t.index;"history"!==e.creator&&p({type:"add",payload:new s.RecordInfo("remove",{index:n,canvas:Object(u.a)(r)})})};return t.on("addLayer",e),t.on("contentChange",r),t.on("removeLayer",n),function(){t.off("addLayer",e),t.off("contentChange",r),t.off("removeLayer",n)}}),[]);return o.a.createElement(a.Fragment,null,o.a.createElement("span",{className:b&&l.a.recordBtnActive||"",onPointerUp:b&&function(){p({type:"redo",pCanvasController:t})}||void 0},"redo"),o.a.createElement(c.Divider,null),o.a.createElement("span",{className:v&&l.a.recordBtnActive||"",onPointerUp:v&&function(){p({type:"undo",pCanvasController:t})}||void 0},"undo"))};v(b,"useReducer{[ {cursor, recorderList}, dispatchRecord ]({ cursor: -1, recorderList: []})}\nuseEffect{}"),t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(b,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\index.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}.call(this,r(3)(e))},function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),o=r.n(a),c=r(34),i=r.n(c),l=r(1),u=r(25),s=r(22);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=function(e){var t=e.value,r=e.onChange,n=e.defaultValue,c=d(Object(a.useState)(!1),2),f=c[0],p=c[1],v=d(Object(a.useState)(n||s.RGBA.BLACK),2),b=v[0],y=v[1];Object(a.useEffect)((function(){t&&y(t)}),[t]);var h=function(){p((function(e){return!e}))};return o.a.createElement(a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:b.toRGBAString()},className:i.a.colorBar,onPointerUp:h}),o.a.createElement(l.Drawer,{title:"colors",visible:f,onClose:h,mask:!1},o.a.createElement(u.default,{value:b,onChange:function(e){y(e),r&&r(e)}})))};v(b,"useState{[showColorPanel, setShowColorPannel](false)}\nuseState{[rgba, setRGBA](defaultValue|| RGBA.BLACK)}\nuseEffect{}"),t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(b,"default","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\index.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}.call(this,r(3)(e))},function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),o=r.n(a),c=r(1),i=r(36),l=r.n(i),u=r(62);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},b=function(e){var t=e.pCanvasController,r=d(Object(a.useState)([]),2),n=r[0],i=r[1],f=Object(a.useRef)({}),p=Object(a.useRef)([]),v=Object(u.a)(n,p,f).copyCanvas,b=d(Object(a.useState)(""),2),y=b[0],h=b[1],m=d(Object(a.useState)(!1),2),g=m[0],x=m[1],L=function(){x((function(e){return e||setTimeout(v),!e}))};Object(a.useEffect)((function(){var e=function(){for(var e=t.getLayers(),r=[],n=e.length-1;n>=0;n--){var a=e[n];r.push(a),p.current.push(a)}i((function(e){return[].concat(s(e),r)}))};return t.on("init",e),function(){return t.off("init",e)}}),[]),Object(a.useEffect)((function(){var e=function(e){var t=e.data.layerDetail;console.log("onFocusLayer..."),h(t.layerId)},r=function(e){var t=e.data.layerDetail;console.log("onAddLayer"),p.current.push(t),i((function(e){return[t].concat(s(e))}))},n=function(e){var t=e.data.layerDetail;i((function(e){var r=e.indexOf(t);return r>-1&&e.splice(r,1),s(e)}))},a=function(e){var t=e.data.layerDetail,r=e.creator;t&&(p.current.push(t),setTimeout(v),"user"===r&&x(!1))};return t.on("addLayer",r),t.on("contentChange",a),t.on("focusLayer",e),t.on("removeLayer",n),function(){t.off("contentChange",a),t.off("addLayer",r),t.off("focusLayer",e),t.off("removeLayer",n)}}),[]);return o.a.createElement("div",null,o.a.createElement(c.Tag,{onPointerUp:L},"111"),o.a.createElement(c.Drawer,{title:null,width:200,visible:g,onClose:L,mask:!1},o.a.createElement(c.List,{header:o.a.createElement("span",{onPointerUp:function(){t.addLayer()}},"addlayer +"),className:l.a.pannelWrap,itemLayout:"horizontal",dataSource:n,rowKey:"layerId",renderItem:function(e,r){var a=e.visible,i=e.layerId;e.name;return o.a.createElement(c.List.Item,{className:i===y?l.a.active:""},o.a.createElement(c.List.Item.Meta,{avatar:o.a.createElement("canvas",{onPointerUp:function(){return r=e,void t.focusLayer(r);var r},key:i,id:i,ref:function(e){f.current[i]=e},className:l.a.canvases,width:"45",height:"45"}),title:o.a.createElement("span",null,"layer ".concat(n.length-r)),description:o.a.createElement("div",null,o.a.createElement("span",null,a?"visible":"unvisible"),o.a.createElement("span",{onPointerUp:function(){return r=e,void t.removeLayer(r);var r}},"remove"))}))}})))};v(b,"useState{[layers, setLayers]([])}\nuseRef{canvasesRef}\nuseRef{needUpdateRef}\nuseCopyLayer{{ copyCanvas }}\nuseState{[ activeLayerId, setActiveLayerId ]('')}\nuseState{[ showLayerDraw, setShowLayerDraw ](false)}\nuseEffect{}\nuseEffect{}",(function(){return[u.a]})),t.default=b,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(b,"default","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\layer-pannel\\index.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}.call(this,r(3)(e))},,function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),o=r.n(a),c=r(1),i=r(38),l=r.n(i),u=r(5);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var s,d,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p=function(e){var t=e.pCanvasController;Object(a.useEffect)((function(){if(t){var e=function(){t.setBrushWidth(1),t.setOpacity(1)};return t.on("init",e),function(){return t.off("init",e)}}}),[]);return o.a.createElement("div",{className:l.a.asideTool},o.a.createElement(c.Divider,null),o.a.createElement(c.Slider,{defaultValue:1,vertical:!0,min:1,max:200,step:2,onChange:function(e){t&&t.setBrushWidth(e)}}),o.a.createElement(c.Divider,null),o.a.createElement(c.Slider,{vertical:!0,defaultValue:1,min:0,max:1,step:.01,onChange:function(e){t&&t.setOpacity(e)}}),o.a.createElement(c.Divider,null),o.a.createElement(u.default,{pCanvasController:t}),o.a.createElement(c.Divider,null))};f(p,"useEffect{}"),t.default=p,(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(1,"defaultWidth","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx"),s.register(1,"defaultOpacity","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx"),s.register(p,"default","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\index.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}.call(this,r(3)(e))},function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"PCanvas",(function(){return p})),r.d(t,"usePCanvas",(function(){return s}));var n,a=r(0),o=r.n(a),c=r(39),i=r.n(c),l=r(23);r.d(t,"PCanvasController",(function(){return l.PCanvasController})),r.d(t,"CanvasEventData",(function(){return l.CanvasEventData})),r.d(t,"CanvasEvent",(function(){return l.CanvasEvent})),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},s=function(){return{pCanvas:Object(a.useRef)(new l.PCanvasController).current}};u(s,"useRef{{current: pCanvas}}");var d,f,p=function(e){var t=e.initValue,r=e.pCanvasController,n=Object(a.useRef)(null),c=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(r&&c.current&&n.current){var e={wrap:c.current,cover:n.current};r.init(e,t)}}),[]),Object(a.useEffect)((function(){var e=n.current;if(e){var t=function(e){r&&r.onPointerDown(e)},a=function(e){r&&r.onPointerMove(e)},o=function(e){r&&r.onPointerUp(e)};return e.addEventListener("pointerdown",t,{passive:!1}),e.addEventListener("pointermove",a,{passive:!1}),e.addEventListener("pointerup",o,{passive:!1}),console.log("add...."),function(){e.removeEventListener("pointerdown",t),e.removeEventListener("pointermove",a),e.removeEventListener("pointerup",o)}}}),[n.current]),o.a.createElement("main",{className:i.a.pCanvas},o.a.createElement("section",{ref:c,className:i.a.canvasWrap},o.a.createElement("div",{ref:n,className:i.a.cover})))};u(p,"useRef{coverRef}\nuseRef{wrapRef}\nuseEffect{}\nuseEffect{}"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(s,"usePCanvas","D:\\code\\WebPencil\\src\\pages\\paint\\pcanvas\\index.tsx"),d.register(p,"PCanvas","D:\\code\\WebPencil\\src\\pages\\paint\\pcanvas\\index.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}.call(this,r(3)(e))},function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(0),o=r.n(a),c=r(6),i=r(22),l=r(40),u=r.n(l),s=r(7);(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var d,f,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=i.RGBA.BLACK,b=function(e){var t=e.pCanvasController,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;t.setColor(e)};return Object(a.useEffect)((function(){if(t)return t.on("init",(function(){return r()})),t.off("init",(function(){return r()}))}),[]),o.a.createElement("div",{className:u.a.topToolBar},o.a.createElement(s.default,{pCanvasController:t}),o.a.createElement(c.default,{defaultValue:v,onChange:r}))};p(b,"useEffect{}"),t.default=b,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(v,"DEFAULT_COLOR","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\index.tsx"),d.register(b,"default","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\index.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}.call(this,r(3)(e))},,function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return x}));var n,a,o,c=r(0),i=r.n(c),l=r(73),u=r(42),s=r.n(u),d=r(10),f=r(14),p=r(77),v=r.n(p),b=r(55),y=r(11),h=r(9);function m(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(){var e=g(Object(c.useState)(),2),t=e[0],r=e[1],n=Object(d.usePCanvas)().pCanvas;return Object(c.useEffect)((function(){var e;(e=regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.a.parse(f.b.location.search.substr(1)),n=t.workId,e.next=3,b.c.getWorkDetail(n);case 3:a=e.sent,r(a);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){m(o,n,a,c,i,"next",e)}function i(e){m(o,n,a,c,i,"throw",e)}c(void 0)}))})()}),[]),Object(c.useEffect)((function(){return function(){t&&b.c.saveWork(t)}}),[t]),i.a.createElement(l.a,{contentClassName:s.a.layout,headNode:i.a.createElement(y.default,{pCanvasController:n}),asideNode:i.a.createElement(h.default,{pCanvasController:n})},t&&i.a.createElement(d.PCanvas,{pCanvasController:n,initValue:t}))}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(x,"useState{workStateHandle}\nusePCanvas{{pCanvas}}\nuseEffect{}\nuseEffect{}",(function(){return[d.usePCanvas]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(x,"Paint","D:\\code\\WebPencil\\src\\pages\\paint\\index.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)}.call(this,r(3)(e))},,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,t){_classCallCheck(this,RecordInfo),this.type=e,this.data=t}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var t=e.type,r=e.data;if("add"===t){var n=r,a=n.index,o=n.canvas;return new RecordInfo("remove",{index:a,canvas:o})}if("modify"===t){var c=r,i=c.index,l=c.from,u=c.to;return new RecordInfo("modify",{index:i,from:u,to:l})}var s=r,d=s.index,f=s.canvas;return new RecordInfo("add",{index:d,canvas:f})},handleOperate=function(e,t){var r=e.type,n=e.data;if(console.log("handleOperate: ",r),"add"!==r)if("modify"!==r)if("remove"!==r);else{var a=n.index;t.removeLayerByIndex(a,"history")}else{var o=n,c=o.index,i=(o.from,o.to),l=t.setLayerContent(c,i,"history");t.focusLayer(l)}else{var u=n,s=u.index,d=u.canvas,f=t.addLayerContent(s,d,"history");t.focusLayer(f)}},MAX_ROCORD_NUMBER=100,recordListReducer=function(e,t){var r=e.cursor,n=e.recorderList,a=t.type,o=t.payload,c=t.pCanvasController;switch(a){case"add":r<n.length-1&&n.splice(Math.max(r,0)),MAX_ROCORD_NUMBER<=n.length&&n.splice(0,n.length-MAX_ROCORD_NUMBER+1),r++,o&&n.push(o);break;case"redo":if(++r<=n.length-1){var i=n[r];c&&handleOperate(i,c)}break;case"undo":if(r>-1){var l=n[r];c&&handleOperate(getRevertRecor(l),c)}r--}return{cursor:Math.max(Math.min(r,n.length-1),-1),recorderList:n}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(MAX_ROCORD_NUMBER,"MAX_ROCORD_NUMBER","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","D:\\code\\WebPencil\\src\\pages\\paint\\aside-tool-bar\\record\\reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},function(e,t,r){"use strict";r.r(t),function(e){var n,a=r(50),o=r.n(a),c=r(0),i=r.n(c),l=r(34),u=r.n(l),s=r(22);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],n=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var b,y,h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},m=function(e,t,r){var n=t.pixX,a=t.pixY,o=t.pixR,c=t.pixWidth,i=t.start,l=t.end,u=o-c,s={x:n+Math.cos(i)*u,y:a+Math.sin(i)*u},d={x:n+Math.cos(i)*o,y:a+Math.sin(i)*o},f={x:n+Math.cos(l)*u,y:a+Math.sin(l)*u},p=r.toRGBAString();e.beginPath(),e.fillStyle=p,e.strokeStyle=p,e.moveTo(s.x,s.y),e.lineTo(d.x,d.y),e.arc(n,a,o,i,l),e.lineTo(f.x,f.y),e.arc(n,a,u,l,i,!0),e.closePath(),e.fill(),e.stroke()},g=function(e,t){for(var r=[new s.RGBA(255,0,0),new s.RGBA(255,255,0),new s.RGBA(0,255,0),new s.RGBA(0,255,255),new s.RGBA(0,0,255),new s.RGBA(255,0,255),new s.RGBA(255,0,0)],n=2*Math.PI/6,a=0;a<r.length-1;a++)for(var o=s.RGBA.Lerp(r[a],r[a+1],255),c=a*n,i=((a+1)*n-c)/o.length,l=0;l<o.length-1;l++)m(e,p({},t,{start:c+i*l,end:c+i*(l+1)}),o[l])},x=function(e,t,r){var n=t.pixX,a=t.pixY,o=t.pixR,c=t.pixWidth,i=Math.sin(.25*Math.PI)*(o-c),l=2*i;e.clearRect(n-i,a-i,l,l);var u=e.createLinearGradient(n-i,a+i,n-i,a-i);u.addColorStop(0,r),u.addColorStop(1,"white"),e.fillStyle=u,e.fillRect(n-i,a-i,l,l);var s=e.createLinearGradient(n-i,a-i,n+i,a-i);s.addColorStop(0,"black"),s.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=s,e.fillRect(n-i,a-i,l,l)},L=function(e,t){var r=t.x,n=t.y,a=t.width,o=t.r,c=Math.sin(.25*Math.PI)*(o-a),i=r-c,l=r+c,u=n-c,s=n+c;return e.x>i&&e.x<l&&e.y>u&&e.y<s},w=function(e,t){var r=t.x,n=t.y,a=t.width,o=t.r,c=Math.pow(e.x-r,2)+Math.pow(e.y-n,2),i=Math.pow(o,2);return c>Math.pow(o-a,2)&&c<i?"circle":L(e,t)?"round":null},C=function(e,t){var r=t.x,n=t.y,a=t.width,o=t.r-.5*a,c=e.x-r,i=e.y-n,l=Math.sqrt(Math.pow(c,2)+Math.pow(i,2));return{x:r+c*o/l,y:n+i*o/l}},G=function(e,t){var r=t.x,n=t.y,a=t.width,o=t.r,c=(Math.sin(.25*Math.PI),e.x-r),i=e.y-n;Math.sqrt(Math.pow(c,2)+Math.pow(i,2));if(L(e,t))return e},R=function(e,t){for(var r=t.x,n=t.y,a=e.x-r,o=n-e.y,c=Math.atan2(o,a),i=1-(c>=0?c:c+2*Math.PI)/(2*Math.PI),l=[new s.RGBA(255,0,0),new s.RGBA(255,255,0),new s.RGBA(0,255,0),new s.RGBA(0,255,255),new s.RGBA(0,0,255),new s.RGBA(255,0,255),new s.RGBA(255,0,0)],u=0;u<6;u++){var d=u*(1/6),f=(u+1)*(1/6);if(i>d&&i<f)return s.RGBA.getLerpColor(l[u],l[u+1],1-(f-i)/(1/6));if(i===d)return l[u];if(i===f)return l[u+1]}return s.RGBA.BLACK},_=function(e,t,r,n,a){var o=r-a,c=n-a,i=2*a,l=1-Math.max(Math.min((e.y-c)/i,1),0),u=Math.max(Math.min((e.x-o)/i,1),0);return s.RGBA.mix(s.RGBA.mix(t,s.RGBA.WHITE,l),s.RGBA.BLACK,1-u)},E=o()((function(e,t,r,n){var a=R(t,{x:n.x,y:n.y}),o=Math.cos(.25*Math.PI)*n.r-n.width;e&&e(_(r,a,n.x,n.y,o))}),200),P=function(e){var t=e.value,r=e.onChange,n=d(Object(c.useState)({x:0,y:0}),2),a=n[0],o=n[1],l=d(Object(c.useState)({x:0,y:0}),2),s=l[0],f=l[1],p=d(Object(c.useState)(null),2),v=p[0],b=p[1],y=d(Object(c.useState)(),2),h=y[0],m=y[1],L=d(Object(c.useState)(),2),_=L[0],P=L[1],H=Object(c.useRef)({isSelecting:!1}),O=Object(c.useRef)(null);Object(c.useEffect)((function(){console.log(t)}),[t]),Object(c.useEffect)((function(){if(O.current){var e=O.current.getContext("2d"),t=O.current.clientWidth*devicePixelRatio;if(O.current.width=t,O.current.height=t,e){P(e);var r=.5*O.current.clientWidth,n=.5*O.current.width,a={x:r,y:r,r:r-10,width:30,pixX:n,pixY:n,pixR:n-10*devicePixelRatio,pixWidth:30*devicePixelRatio};x(e,a,"rgb(255,0,0)"),g(e,a),m(a),o({x:r+a.r,y:r}),f({x:r,y:r})}}}),[O.current]);return Object(c.useMemo)((function(){return h&&E(r,a,s,h)}),[a,s]),i.a.createElement("div",{className:u.a.colorPannelWrap},i.a.createElement("canvas",{ref:O,className:u.a.colorPannel}),i.a.createElement("div",{className:u.a.circlePoint,style:{transform:"translate3d(".concat(a.x-5,"px, ").concat(a.y-5,"px, 0)")}}),i.a.createElement("div",{style:{transform:"translate3d(".concat(s.x-5,"px, ").concat(s.y-5,"px, 0)")},className:u.a.selectPoint}),i.a.createElement("div",{className:u.a.canvasCover,style:{height:"".concat(h&&2*h.x,"px")},onPointerDown:function(e){var t=e.nativeEvent,r=t.offsetX,n=t.offsetY;if(h){H.current.isSelecting=!0,b(w({x:r,y:n},h));var a=w({x:r,y:n},h);"circle"===a&&o(C({x:r,y:n},h)),"round"===a&&f({x:r,y:n})}},onPointerUp:function(){H.current.isSelecting=!1,b(null)},onPointerMove:function(e){var t=e.nativeEvent,r=t.offsetX,n=t.offsetY;if(H.current.isSelecting&&h&&v){if("circle"===v&&_){o(C({x:r,y:n},h));var a=R({x:r,y:n},{x:h.x,y:h.y});x(_,h,a.toRGBAString())}if("round"===v){var c=G({x:r,y:n},h);c&&f(c)}}}}))};h(P,"useState{[circlePoint, setCirclePoint]({x: 0, y:0})}\nuseState{[ selectPoint, setSelectPoint ]({x: 0, y:0})}\nuseState{[ pointType,  setPointType ](null)}\nuseState{[cirleInfo, setCircleInfo ]}\nuseState{[ctx, setCtx]}\nuseRef{operateInfo}\nuseRef{canvas}\nuseEffect{}\nuseEffect{}\nuseMemo{}"),t.default=P,(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(m,"drawCircleFragment","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(g,"drawCircle","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(x,"drawSelectArea","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(L,"isInSelectArea","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(w,"getPointType","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(C,"getCirclePosition","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(G,"getSelectPoint","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(R,"getStandardColor","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(_,"getSelectColor","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(E,"handleChange","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx"),b.register(P,"default","D:\\code\\WebPencil\\src\\pages\\paint\\top-tool-bar\\tool-item\\color-selector\\color-pannel.tsx")),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&y(e)}.call(this,r(3)(e))},,,,,,,,,function(e,t,r){e.exports={colorBar:"colorBar_22b99",colorPannelWrap:"colorPannelWrap_94f56",colorPannel:"colorPannel_02c11",circlePoint:"circlePoint_0a8ba",selectPoint:"selectPoint_5aa22",canvasCover:"canvasCover_4958d"}},function(e,t,r){e.exports={recordBtnActive:"recordBtnActive_a74d3"}},function(e,t,r){e.exports={layerPannel:"layerPannel_e799a",pannelWrap:"pannelWrap_b4fbf",canvases:"canvases_b0d45",active:"active_1674e"}},,function(e,t,r){e.exports={asideTool:"asideTool_faaa6"}},function(e,t,r){e.exports={pCanvas:"pCanvas_efb40",canvasWrap:"canvasWrap_4e8dd",unvisible:"unvisible_0b5e4",cover:"cover_edb6c"}},function(e,t,r){e.exports={topToolBar:"topToolBar_7b6e5"}},,function(e,t,r){e.exports={layout:"layout_72e38"}},,,,,,,function(e,t){e.exports=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(51),a=r(52),o=r(53),c=Math.max,i=Math.min;e.exports=function(e,t,r){var l,u,s,d,f,p,v=0,b=!1,y=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=l,n=u;return l=u=void 0,v=t,d=e.apply(n,r)}function g(e){return v=e,f=setTimeout(L,t),b?m(e):d}function x(e){var r=e-p;return void 0===p||r>=t||r<0||y&&e-v>=s}function L(){var e=a();if(x(e))return w(e);f=setTimeout(L,function(e){var r=t-(e-p);return y?i(r,s-(e-v)):r}(e))}function w(e){return f=void 0,h&&l?m(e):(l=u=void 0,d)}function C(){var e=a(),r=x(e);if(l=arguments,u=this,p=e,r){if(void 0===f)return g(p);if(y)return clearTimeout(f),f=setTimeout(L,t),m(p)}return void 0===f&&(f=setTimeout(L,t)),d}return t=o(t)||0,n(r)&&(b=!!r.leading,s=(y="maxWait"in r)?c(o(r.maxWait)||0,t):s,h="trailing"in r?!!r.trailing:h),C.cancel=function(){void 0!==f&&clearTimeout(f),v=0,l=p=u=f=void 0},C.flush=function(){return void 0===f?d:w(a())},C}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var n=r(44);e.exports=function(){return n.Date.now()}},function(e,t){e.exports=function(e){return e}},,,,,,,,,function(e,t,r){"use strict";(function(e){var n,a=r(63),o=r.n(a),c=r(0);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,u,s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},d=function(e,t){var r=t.getContext("2d");r&&(r.clearRect(0,0,t.width,t.height),r.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height))},f=function(e,t){var r=o()(e.current,(function(e){return e.layerId})),n=t.current;i(r).forEach((function(t){var r=n[t.layerId];if(r){console.log("map..",t.layerId),d(t.canvas,r);var a=e.current.findIndex((function(e){return e.layerId===t.layerId}));e.current.splice(a,1)}}))},p=function(e,t,r){var n=function(){return f(t,r)};return Object(c.useEffect)(n,[e]),{copyCanvas:n}};s(p,"useEffect{}"),t.a=p,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(d,"mapCanvas","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts"),l.register(f,"copCanvas","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts"),l.register(p,"default","D:\\code\\WebPencil\\src\\hooks\\use-copy-layer.ts")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,r(3)(e))},function(e,t,r){var n=r(64),a=r(65);e.exports=function(e,t){return e&&e.length?a(e,n(t,2)):[]}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(66),a=r(67),o=r(68),c=r(69),i=r(70),l=r(71);e.exports=function(e,t,r){var u=-1,s=a,d=e.length,f=!0,p=[],v=p;if(r)f=!1,s=o;else if(d>=200){var b=t?null:i(e);if(b)return l(b);f=!1,s=c,v=new n}else v=t?[]:p;e:for(;++u<d;){var y=e[u],h=t?t(y):y;if(y=r||0!==y?y:0,f&&h==h){for(var m=v.length;m--;)if(v[m]===h)continue e;t&&v.push(h),p.push(y)}else s(v,h,r)||(v!==p&&v.push(h),p.push(y))}return p}},function(e,t,r){var n=r(47);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return n(e)?e:[e]}},function(e,t,r){var n=r(49);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},function(e,t){e.exports=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}},function(e,t,r){var n=r(49);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(){return[]}},,function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return v}));var n,a=r(0),o=r.n(a),c=r(74),i=r.n(c),l=r(14),u=r(1),s=r(91);function d(e,t,r,n,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f,p;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function v(e){var t=e.className,r=void 0===t?"":t,n=e.headNode,a=void 0===n?null:n,c=e.asideClass,f=void 0===c?"":c,p=e.asideNode,v=void 0===p?null:p,b=e.children,y=void 0===b?null:b,h=e.beforeBack,m=e.showBackButton,g=void 0===m||m,x=e.contentClassName,L=void 0===x?"":x,w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=h,!e.t1){e.next=5;break}return e.next=4,h();case 4:e.t1=e.sent;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}e.t0=!h;case 8:if(!e.t0){e.next=10;break}l.b.goBack();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function c(e){d(o,n,a,c,i,"next",e)}function i(e){d(o,n,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.a.createElement("section",{className:"".concat(i.a.section," ").concat(r)},o.a.createElement("header",null,g&&o.a.createElement(u.Button,{ghost:!0,onPointerUp:w,shape:"circle",size:"small",icon:o.a.createElement(s.a,null)}),!1,a),o.a.createElement("div",{className:i.a.wrapper},o.a.createElement("aside",{className:f},v),o.a.createElement("main",{className:L},y)))}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(v,"Home","D:\\code\\WebPencil\\src\\lauout\\BasicLayout.tsx"),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r(3)(e))},function(e,t,r){e.exports={section:"section_c21f7",wrapper:"wrapper_e44d8"}}]]);