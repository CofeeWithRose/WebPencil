(window.webpackJsonp=window.webpackJsonp||[]).push([[3,6,15,18,23,24],[,,,,,function(e,t,r){"use strict";r.r(t),function(e){var o,a=r(0),n=r.n(a),c=r(1),i=r(35),d=r.n(i),l=r(54),u=r(24);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var r=[],o=!0,a=!1,n=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw n}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var f,v,p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=function(e){var t=e.pCanvasController,r=s(Object(a.useReducer)(u.recordListReducer,{cursor:-1,recorderList:[]}),2),o=r[0],i=o.cursor,f=o.recorderList,v=r[1],p=i>=0,y=i<f.length-1;Object(a.useEffect)((function(){var e=function(e){var t=e.data,r=t.layerDetail.canvas,o=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("add",{index:o,canvas:Object(l.a)(r)})})},r=function(e){var t=e.data,r=t.layerDetail.canvas,o=t.preContent,a=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("modify",{index:a,from:o,to:Object(l.a)(r)})})},o=function(e){var t=e.data,r=t.layerDetail.canvas,o=t.index;"history"!==e.creator&&v({type:"add",payload:new u.RecordInfo("remove",{index:o,canvas:Object(l.a)(r)})})};return t.on("addLayer",e),t.on("contentChange",r),t.on("removeLayer",o),function(){t.off("addLayer",e),t.off("contentChange",r),t.off("removeLayer",o)}}),[]);return n.a.createElement(a.Fragment,null,n.a.createElement("span",{className:y&&d.a.recordBtnActive||"",onPointerUp:y&&function(){v({type:"redo",pCanvasController:t})}||void 0},"redo"),n.a.createElement(c.Divider,null),n.a.createElement("span",{className:p&&d.a.recordBtnActive||"",onPointerUp:p&&function(){v({type:"undo",pCanvasController:t})}||void 0},"undo"))};p(y,"useReducer{[ {cursor, recorderList}, dispatchRecord ]({ cursor: -1, recorderList: []})}\nuseEffect{}"),t.default=y,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(y,"default","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/index.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)}.call(this,r(3)(e))},,function(e,t,r){"use strict";r.r(t),function(e){var o,a=r(0),n=r.n(a),c=r(1),i=r(37),d=r.n(i),l=r(5);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var u,s,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=function(e){var t=e.pCanvasController;Object(a.useEffect)((function(){if(t){var e=function(){t.setBrushWidth(1),t.setOpacity(1)};return t.on("init",e),function(){return t.off("init",e)}}}),[]);return n.a.createElement("div",{className:d.a.asideTool},n.a.createElement(c.Divider,null),n.a.createElement(c.Slider,{defaultValue:1,vertical:!0,min:1,max:200,step:2,onChange:function(e){t&&t.setBrushWidth(e)}}),n.a.createElement(c.Divider,null),n.a.createElement(c.Slider,{vertical:!0,defaultValue:1,min:0,max:1,step:.01,onChange:function(e){t&&t.setOpacity(e)}}),n.a.createElement(c.Divider,null),n.a.createElement(l.default,{pCanvasController:t}),n.a.createElement(c.Divider,null))};f(v,"useEffect{}"),t.default=v,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(1,"defaultWidth","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/index.tsx"),u.register(1,"defaultOpacity","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/index.tsx"),u.register(v,"default","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/index.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}.call(this,r(3)(e))},,,,,,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var enterModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}__webpack_require__.d(__webpack_exports__,"RecordData",(function(){return RecordData})),__webpack_require__.d(__webpack_exports__,"RecordInfo",(function(){return RecordInfo})),__webpack_require__.d(__webpack_exports__,"recordListReducer",(function(){return recordListReducer})),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},RecordData=function(){function RecordData(){_classCallCheck(this,RecordData),this.add=void 0,this.remove=void 0,this.modify=void 0}return _createClass(RecordData,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordData}(),RecordInfo=function(){function RecordInfo(e,t){_classCallCheck(this,RecordInfo),this.type=e,this.data=t}return _createClass(RecordInfo,[{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),RecordInfo}(),getRevertRecor=function(e){var t=e.type,r=e.data;if("add"===t){var o=r,a=o.index,n=o.canvas;return new RecordInfo("remove",{index:a,canvas:n})}if("modify"===t){var c=r,i=c.index,d=c.from,l=c.to;return new RecordInfo("modify",{index:i,from:l,to:d})}var u=r,s=u.index,f=u.canvas;return new RecordInfo("add",{index:s,canvas:f})},handleOperate=function(e,t){var r=e.type,o=e.data;if(console.log("handleOperate: ",r),"add"!==r)if("modify"!==r)if("remove"!==r);else{var a=o.index;t.removeLayerByIndex(a,"history")}else{var n=o,c=n.index,i=(n.from,n.to),d=t.setLayerContent(c,i,"history");t.focusLayer(d)}else{var l=o,u=l.index,s=l.canvas,f=t.addLayerContent(u,s,"history");t.focusLayer(f)}},recordListReducer=function(e,t){var r=e.cursor,o=e.recorderList,a=t.type,n=t.payload,c=t.pCanvasController;switch(a){case"add":r<o.length-1&&o.splice(Math.max(r,0)),r++,n&&o.push(n);break;case"redo":if(++r<=o.length-1){var i=o[r];c&&handleOperate(i,c)}break;case"undo":if(r>-1){var d=o[r];c&&handleOperate(getRevertRecor(d),c)}r--}return{cursor:Math.max(Math.min(r,o.length-1),-1),recorderList:o}},reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(RecordData,"RecordData","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(RecordInfo,"RecordInfo","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(getRevertRecor,"getRevertRecor","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(handleOperate,"handleOperate","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts"),reactHotLoader.register(recordListReducer,"recordListReducer","/Users/muyin/Documents/code/WebPencil/src/pages/paint/aside-tool-bar/record/reducer.ts")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__webpack_require__(3)(module))},,,,,,,,,,,function(e,t,r){e.exports={recordBtnActive:"recordBtnActive_a74d3"}},,function(e,t,r){e.exports={asideTool:"asideTool_faaa6"}},,,,,,,function(e,t,r){var o=r(45),a="object"==typeof self&&self&&self.Object===Object&&self,n=o||a||Function("return this")();e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(46))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var o=r(49),a=0;e.exports=function(e){var t=++a;return o(e)+t}},function(e,t,r){var o=r(50);e.exports=function(e){return null==e?"":o(e)}},function(e,t,r){var o=r(51),a=r(52),n=r(47),c=r(53),i=o?o.prototype:void 0,d=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(n(t))return a(t,e)+"";if(c(t))return d?d.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t,r){var o=r(44).Symbol;e.exports=o},function(e,t){e.exports=function(e,t){for(var r=-1,o=null==e?0:e.length,a=Array(o);++r<o;)a[r]=t(e[r],r,e);return a}},function(e,t){e.exports=function(){return!1}},function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return l}));var o,a=r(48),n=r.n(a);(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,i,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=document.createElement("canvas");o.width=e,o.height=t,o.setAttribute("uuid",n()("canvasId-"));var a=o.getContext("2d");return a&&r&&(a.fillStyle=r.toRGBAString(),a.fillRect(0,0,e,t)),o},l=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return null==r||r.clearRect(0,0,t.width,t.height),null==r||r.drawImage(e,0,0,e.width,e.height),t};(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(d,"createCanvas","/Users/muyin/Documents/code/WebPencil/src/workStorage/canvas.util.ts"),c.register(l,"copyCanvas","/Users/muyin/Documents/code/WebPencil/src/workStorage/canvas.util.ts")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r(3)(e))}]]);